{"version":3,"file":"bundle.js","sources":["../../node_modules/svelte/internal/index.mjs","../../node_modules/@rdfjs/data-model/lib/blank-node.js","../../node_modules/@rdfjs/data-model/lib/default-graph.js","../../node_modules/@rdfjs/data-model/lib/named-node.js","../../node_modules/@rdfjs/data-model/lib/literal.js","../../node_modules/@rdfjs/data-model/lib/quad.js","../../node_modules/@rdfjs/data-model/lib/variable.js","../../node_modules/@rdfjs/data-model/lib/data-factory.js","../../node_modules/@rdfjs/dataset/isMatch.js","../../node_modules/@rdfjs/dataset/DatasetCore.js","../../node_modules/@rdfjs/dataset/index.js","../../node_modules/rdfjs-svelte/src/valueEditors/SimpleLiteralEditor.svelte","../../node_modules/cl-editor/dist/index.js","../../node_modules/rdfjs-svelte/src/valueEditors/HtmlEditor.svelte","../../node_modules/rdfjs-svelte/src/valueEditors/BlankNodeEditor.svelte","../../node_modules/awesomplete/awesomplete.js","../../node_modules/n3/src/IRIs.js","../../node_modules/n3/src/N3DataFactory.js","../../node_modules/n3/src/N3Lexer.js","../../node_modules/n3/src/N3Parser.js","../../node_modules/n3/src/N3Writer.js","../../node_modules/rollup-plugin-node-builtins/src/es6/events.js","../../node_modules/process-es6/browser.js","../../node_modules/rollup-plugin-node-builtins/src/es6/inherits.js","../../node_modules/rollup-plugin-node-builtins/src/es6/util.js","../../node_modules/buffer-es6/base64.js","../../node_modules/buffer-es6/ieee754.js","../../node_modules/buffer-es6/isArray.js","../../node_modules/buffer-es6/index.js","../../node_modules/rollup-plugin-node-builtins/src/es6/readable-stream/buffer-list.js","../../node_modules/rollup-plugin-node-builtins/src/es6/string-decoder.js","../../node_modules/rollup-plugin-node-builtins/src/es6/readable-stream/readable.js","../../node_modules/rollup-plugin-node-builtins/src/es6/readable-stream/writable.js","../../node_modules/rollup-plugin-node-builtins/src/es6/readable-stream/duplex.js","../../node_modules/rollup-plugin-node-builtins/src/es6/readable-stream/transform.js","../../node_modules/rollup-plugin-node-builtins/src/es6/readable-stream/passthrough.js","../../node_modules/rollup-plugin-node-builtins/src/es6/stream.js","../../node_modules/n3/src/N3Store.js","../../node_modules/n3/src/N3Util.js","../../node_modules/n3/src/N3StreamParser.js","../../node_modules/n3/src/N3StreamWriter.js","../../node_modules/node-fetch/browser.js","../../node_modules/@retog/sparql-client/lib/SparqlEndpoint.js","../../node_modules/prefixplete/lib/prefixplete.js","../../node_modules/rdfjs-svelte/src/valueEditors/NamedNodeEditor.svelte","../../node_modules/rdfjs-svelte/src/ExistingTermEditor.svelte","../../node_modules/rdfjs-svelte/src/TermEditor.svelte","../../node_modules/rdfjs-svelte/src/QuadEditor.svelte","../../node_modules/rdfjs-svelte/src/DatasetUtils.js","../../node_modules/rdfjs-svelte/src/DatasetEditor.svelte","../../node_modules/rdfjs-svelte/src/images/SubjExpand.svelte","../../node_modules/rdfjs-svelte/src/images/ObjExpand.svelte","../../node_modules/rdfjs-svelte/src/ResourceNavigator.svelte","../../node_modules/rdfjs-svelte/src/BrowserRow.svelte","../../node_modules/rdfjs-svelte/src/DatasetBrowser.svelte","../../src/App.svelte","../../src/main.js"],"sourcesContent":["function noop() { }\nconst identity = x => x;\nfunction assign(tar, src) {\n    // @ts-ignore\n    for (const k in src)\n        tar[k] = src[k];\n    return tar;\n}\nfunction is_promise(value) {\n    return value && typeof value === 'object' && typeof value.then === 'function';\n}\nfunction add_location(element, file, line, column, char) {\n    element.__svelte_meta = {\n        loc: { file, line, column, char }\n    };\n}\nfunction run(fn) {\n    return fn();\n}\nfunction blank_object() {\n    return Object.create(null);\n}\nfunction run_all(fns) {\n    fns.forEach(run);\n}\nfunction is_function(thing) {\n    return typeof thing === 'function';\n}\nfunction safe_not_equal(a, b) {\n    return a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\nfunction not_equal(a, b) {\n    return a != a ? b == b : a !== b;\n}\nfunction validate_store(store, name) {\n    if (store != null && typeof store.subscribe !== 'function') {\n        throw new Error(`'${name}' is not a store with a 'subscribe' method`);\n    }\n}\nfunction subscribe(store, ...callbacks) {\n    if (store == null) {\n        return noop;\n    }\n    const unsub = store.subscribe(...callbacks);\n    return unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\nfunction get_store_value(store) {\n    let value;\n    subscribe(store, _ => value = _)();\n    return value;\n}\nfunction component_subscribe(component, store, callback) {\n    component.$$.on_destroy.push(subscribe(store, callback));\n}\nfunction create_slot(definition, ctx, $$scope, fn) {\n    if (definition) {\n        const slot_ctx = get_slot_context(definition, ctx, $$scope, fn);\n        return definition[0](slot_ctx);\n    }\n}\nfunction get_slot_context(definition, ctx, $$scope, fn) {\n    return definition[1] && fn\n        ? assign($$scope.ctx.slice(), definition[1](fn(ctx)))\n        : $$scope.ctx;\n}\nfunction get_slot_changes(definition, $$scope, dirty, fn) {\n    if (definition[2] && fn) {\n        const lets = definition[2](fn(dirty));\n        if ($$scope.dirty === undefined) {\n            return lets;\n        }\n        if (typeof lets === 'object') {\n            const merged = [];\n            const len = Math.max($$scope.dirty.length, lets.length);\n            for (let i = 0; i < len; i += 1) {\n                merged[i] = $$scope.dirty[i] | lets[i];\n            }\n            return merged;\n        }\n        return $$scope.dirty | lets;\n    }\n    return $$scope.dirty;\n}\nfunction exclude_internal_props(props) {\n    const result = {};\n    for (const k in props)\n        if (k[0] !== '$')\n            result[k] = props[k];\n    return result;\n}\nfunction compute_rest_props(props, keys) {\n    const rest = {};\n    keys = new Set(keys);\n    for (const k in props)\n        if (!keys.has(k) && k[0] !== '$')\n            rest[k] = props[k];\n    return rest;\n}\nfunction once(fn) {\n    let ran = false;\n    return function (...args) {\n        if (ran)\n            return;\n        ran = true;\n        fn.call(this, ...args);\n    };\n}\nfunction null_to_empty(value) {\n    return value == null ? '' : value;\n}\nfunction set_store_value(store, ret, value = ret) {\n    store.set(value);\n    return ret;\n}\nconst has_prop = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\nfunction action_destroyer(action_result) {\n    return action_result && is_function(action_result.destroy) ? action_result.destroy : noop;\n}\n\nconst is_client = typeof window !== 'undefined';\nlet now = is_client\n    ? () => window.performance.now()\n    : () => Date.now();\nlet raf = is_client ? cb => requestAnimationFrame(cb) : noop;\n// used internally for testing\nfunction set_now(fn) {\n    now = fn;\n}\nfunction set_raf(fn) {\n    raf = fn;\n}\n\nconst tasks = new Set();\nfunction run_tasks(now) {\n    tasks.forEach(task => {\n        if (!task.c(now)) {\n            tasks.delete(task);\n            task.f();\n        }\n    });\n    if (tasks.size !== 0)\n        raf(run_tasks);\n}\n/**\n * For testing purposes only!\n */\nfunction clear_loops() {\n    tasks.clear();\n}\n/**\n * Creates a new task that runs on each raf frame\n * until it returns a falsy value or is aborted\n */\nfunction loop(callback) {\n    let task;\n    if (tasks.size === 0)\n        raf(run_tasks);\n    return {\n        promise: new Promise(fulfill => {\n            tasks.add(task = { c: callback, f: fulfill });\n        }),\n        abort() {\n            tasks.delete(task);\n        }\n    };\n}\n\nfunction append(target, node) {\n    target.appendChild(node);\n}\nfunction insert(target, node, anchor) {\n    target.insertBefore(node, anchor || null);\n}\nfunction detach(node) {\n    node.parentNode.removeChild(node);\n}\nfunction destroy_each(iterations, detaching) {\n    for (let i = 0; i < iterations.length; i += 1) {\n        if (iterations[i])\n            iterations[i].d(detaching);\n    }\n}\nfunction element(name) {\n    return document.createElement(name);\n}\nfunction element_is(name, is) {\n    return document.createElement(name, { is });\n}\nfunction object_without_properties(obj, exclude) {\n    const target = {};\n    for (const k in obj) {\n        if (has_prop(obj, k)\n            // @ts-ignore\n            && exclude.indexOf(k) === -1) {\n            // @ts-ignore\n            target[k] = obj[k];\n        }\n    }\n    return target;\n}\nfunction svg_element(name) {\n    return document.createElementNS('http://www.w3.org/2000/svg', name);\n}\nfunction text(data) {\n    return document.createTextNode(data);\n}\nfunction space() {\n    return text(' ');\n}\nfunction empty() {\n    return text('');\n}\nfunction listen(node, event, handler, options) {\n    node.addEventListener(event, handler, options);\n    return () => node.removeEventListener(event, handler, options);\n}\nfunction prevent_default(fn) {\n    return function (event) {\n        event.preventDefault();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction stop_propagation(fn) {\n    return function (event) {\n        event.stopPropagation();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction self(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.target === this)\n            fn.call(this, event);\n    };\n}\nfunction attr(node, attribute, value) {\n    if (value == null)\n        node.removeAttribute(attribute);\n    else if (node.getAttribute(attribute) !== value)\n        node.setAttribute(attribute, value);\n}\nfunction set_attributes(node, attributes) {\n    // @ts-ignore\n    const descriptors = Object.getOwnPropertyDescriptors(node.__proto__);\n    for (const key in attributes) {\n        if (attributes[key] == null) {\n            node.removeAttribute(key);\n        }\n        else if (key === 'style') {\n            node.style.cssText = attributes[key];\n        }\n        else if (key === '__value') {\n            node.value = node[key] = attributes[key];\n        }\n        else if (descriptors[key] && descriptors[key].set) {\n            node[key] = attributes[key];\n        }\n        else {\n            attr(node, key, attributes[key]);\n        }\n    }\n}\nfunction set_svg_attributes(node, attributes) {\n    for (const key in attributes) {\n        attr(node, key, attributes[key]);\n    }\n}\nfunction set_custom_element_data(node, prop, value) {\n    if (prop in node) {\n        node[prop] = value;\n    }\n    else {\n        attr(node, prop, value);\n    }\n}\nfunction xlink_attr(node, attribute, value) {\n    node.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\nfunction get_binding_group_value(group) {\n    const value = [];\n    for (let i = 0; i < group.length; i += 1) {\n        if (group[i].checked)\n            value.push(group[i].__value);\n    }\n    return value;\n}\nfunction to_number(value) {\n    return value === '' ? undefined : +value;\n}\nfunction time_ranges_to_array(ranges) {\n    const array = [];\n    for (let i = 0; i < ranges.length; i += 1) {\n        array.push({ start: ranges.start(i), end: ranges.end(i) });\n    }\n    return array;\n}\nfunction children(element) {\n    return Array.from(element.childNodes);\n}\nfunction claim_element(nodes, name, attributes, svg) {\n    for (let i = 0; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeName === name) {\n            let j = 0;\n            while (j < node.attributes.length) {\n                const attribute = node.attributes[j];\n                if (attributes[attribute.name]) {\n                    j++;\n                }\n                else {\n                    node.removeAttribute(attribute.name);\n                }\n            }\n            return nodes.splice(i, 1)[0];\n        }\n    }\n    return svg ? svg_element(name) : element(name);\n}\nfunction claim_text(nodes, data) {\n    for (let i = 0; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeType === 3) {\n            node.data = '' + data;\n            return nodes.splice(i, 1)[0];\n        }\n    }\n    return text(data);\n}\nfunction claim_space(nodes) {\n    return claim_text(nodes, ' ');\n}\nfunction set_data(text, data) {\n    data = '' + data;\n    if (text.data !== data)\n        text.data = data;\n}\nfunction set_input_value(input, value) {\n    if (value != null || input.value) {\n        input.value = value;\n    }\n}\nfunction set_input_type(input, type) {\n    try {\n        input.type = type;\n    }\n    catch (e) {\n        // do nothing\n    }\n}\nfunction set_style(node, key, value, important) {\n    node.style.setProperty(key, value, important ? 'important' : '');\n}\nfunction select_option(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        if (option.__value === value) {\n            option.selected = true;\n            return;\n        }\n    }\n}\nfunction select_options(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        option.selected = ~value.indexOf(option.__value);\n    }\n}\nfunction select_value(select) {\n    const selected_option = select.querySelector(':checked') || select.options[0];\n    return selected_option && selected_option.__value;\n}\nfunction select_multiple_value(select) {\n    return [].map.call(select.querySelectorAll(':checked'), option => option.__value);\n}\n// unfortunately this can't be a constant as that wouldn't be tree-shakeable\n// so we cache the result instead\nlet crossorigin;\nfunction is_crossorigin() {\n    if (crossorigin === undefined) {\n        crossorigin = false;\n        try {\n            if (typeof window !== 'undefined' && window.parent) {\n                void window.parent.document;\n            }\n        }\n        catch (error) {\n            crossorigin = true;\n        }\n    }\n    return crossorigin;\n}\nfunction add_resize_listener(node, fn) {\n    const computed_style = getComputedStyle(node);\n    const z_index = (parseInt(computed_style.zIndex) || 0) - 1;\n    if (computed_style.position === 'static') {\n        node.style.position = 'relative';\n    }\n    const iframe = element('iframe');\n    iframe.setAttribute('style', `display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; ` +\n        `overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: ${z_index};`);\n    iframe.setAttribute('aria-hidden', 'true');\n    iframe.tabIndex = -1;\n    let unsubscribe;\n    if (is_crossorigin()) {\n        iframe.src = `data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}</script>`;\n        unsubscribe = listen(window, 'message', (event) => {\n            if (event.source === iframe.contentWindow)\n                fn();\n        });\n    }\n    else {\n        iframe.src = 'about:blank';\n        iframe.onload = () => {\n            unsubscribe = listen(iframe.contentWindow, 'resize', fn);\n        };\n    }\n    append(node, iframe);\n    return () => {\n        detach(iframe);\n        if (unsubscribe)\n            unsubscribe();\n    };\n}\nfunction toggle_class(element, name, toggle) {\n    element.classList[toggle ? 'add' : 'remove'](name);\n}\nfunction custom_event(type, detail) {\n    const e = document.createEvent('CustomEvent');\n    e.initCustomEvent(type, false, false, detail);\n    return e;\n}\nfunction query_selector_all(selector, parent = document.body) {\n    return Array.from(parent.querySelectorAll(selector));\n}\nclass HtmlTag {\n    constructor(html, anchor = null) {\n        this.e = element('div');\n        this.a = anchor;\n        this.u(html);\n    }\n    m(target, anchor = null) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert(target, this.n[i], anchor);\n        }\n        this.t = target;\n    }\n    u(html) {\n        this.e.innerHTML = html;\n        this.n = Array.from(this.e.childNodes);\n    }\n    p(html) {\n        this.d();\n        this.u(html);\n        this.m(this.t, this.a);\n    }\n    d() {\n        this.n.forEach(detach);\n    }\n}\n\nconst active_docs = new Set();\nlet active = 0;\n// https://github.com/darkskyapp/string-hash/blob/master/index.js\nfunction hash(str) {\n    let hash = 5381;\n    let i = str.length;\n    while (i--)\n        hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n    return hash >>> 0;\n}\nfunction create_rule(node, a, b, duration, delay, ease, fn, uid = 0) {\n    const step = 16.666 / duration;\n    let keyframes = '{\\n';\n    for (let p = 0; p <= 1; p += step) {\n        const t = a + (b - a) * ease(p);\n        keyframes += p * 100 + `%{${fn(t, 1 - t)}}\\n`;\n    }\n    const rule = keyframes + `100% {${fn(b, 1 - b)}}\\n}`;\n    const name = `__svelte_${hash(rule)}_${uid}`;\n    const doc = node.ownerDocument;\n    active_docs.add(doc);\n    const stylesheet = doc.__svelte_stylesheet || (doc.__svelte_stylesheet = doc.head.appendChild(element('style')).sheet);\n    const current_rules = doc.__svelte_rules || (doc.__svelte_rules = {});\n    if (!current_rules[name]) {\n        current_rules[name] = true;\n        stylesheet.insertRule(`@keyframes ${name} ${rule}`, stylesheet.cssRules.length);\n    }\n    const animation = node.style.animation || '';\n    node.style.animation = `${animation ? `${animation}, ` : ``}${name} ${duration}ms linear ${delay}ms 1 both`;\n    active += 1;\n    return name;\n}\nfunction delete_rule(node, name) {\n    const previous = (node.style.animation || '').split(', ');\n    const next = previous.filter(name\n        ? anim => anim.indexOf(name) < 0 // remove specific animation\n        : anim => anim.indexOf('__svelte') === -1 // remove all Svelte animations\n    );\n    const deleted = previous.length - next.length;\n    if (deleted) {\n        node.style.animation = next.join(', ');\n        active -= deleted;\n        if (!active)\n            clear_rules();\n    }\n}\nfunction clear_rules() {\n    raf(() => {\n        if (active)\n            return;\n        active_docs.forEach(doc => {\n            const stylesheet = doc.__svelte_stylesheet;\n            let i = stylesheet.cssRules.length;\n            while (i--)\n                stylesheet.deleteRule(i);\n            doc.__svelte_rules = {};\n        });\n        active_docs.clear();\n    });\n}\n\nfunction create_animation(node, from, fn, params) {\n    if (!from)\n        return noop;\n    const to = node.getBoundingClientRect();\n    if (from.left === to.left && from.right === to.right && from.top === to.top && from.bottom === to.bottom)\n        return noop;\n    const { delay = 0, duration = 300, easing = identity, \n    // @ts-ignore todo: should this be separated from destructuring? Or start/end added to public api and documentation?\n    start: start_time = now() + delay, \n    // @ts-ignore todo:\n    end = start_time + duration, tick = noop, css } = fn(node, { from, to }, params);\n    let running = true;\n    let started = false;\n    let name;\n    function start() {\n        if (css) {\n            name = create_rule(node, 0, 1, duration, delay, easing, css);\n        }\n        if (!delay) {\n            started = true;\n        }\n    }\n    function stop() {\n        if (css)\n            delete_rule(node, name);\n        running = false;\n    }\n    loop(now => {\n        if (!started && now >= start_time) {\n            started = true;\n        }\n        if (started && now >= end) {\n            tick(1, 0);\n            stop();\n        }\n        if (!running) {\n            return false;\n        }\n        if (started) {\n            const p = now - start_time;\n            const t = 0 + 1 * easing(p / duration);\n            tick(t, 1 - t);\n        }\n        return true;\n    });\n    start();\n    tick(0, 1);\n    return stop;\n}\nfunction fix_position(node) {\n    const style = getComputedStyle(node);\n    if (style.position !== 'absolute' && style.position !== 'fixed') {\n        const { width, height } = style;\n        const a = node.getBoundingClientRect();\n        node.style.position = 'absolute';\n        node.style.width = width;\n        node.style.height = height;\n        add_transform(node, a);\n    }\n}\nfunction add_transform(node, a) {\n    const b = node.getBoundingClientRect();\n    if (a.left !== b.left || a.top !== b.top) {\n        const style = getComputedStyle(node);\n        const transform = style.transform === 'none' ? '' : style.transform;\n        node.style.transform = `${transform} translate(${a.left - b.left}px, ${a.top - b.top}px)`;\n    }\n}\n\nlet current_component;\nfunction set_current_component(component) {\n    current_component = component;\n}\nfunction get_current_component() {\n    if (!current_component)\n        throw new Error(`Function called outside component initialization`);\n    return current_component;\n}\nfunction beforeUpdate(fn) {\n    get_current_component().$$.before_update.push(fn);\n}\nfunction onMount(fn) {\n    get_current_component().$$.on_mount.push(fn);\n}\nfunction afterUpdate(fn) {\n    get_current_component().$$.after_update.push(fn);\n}\nfunction onDestroy(fn) {\n    get_current_component().$$.on_destroy.push(fn);\n}\nfunction createEventDispatcher() {\n    const component = get_current_component();\n    return (type, detail) => {\n        const callbacks = component.$$.callbacks[type];\n        if (callbacks) {\n            // TODO are there situations where events could be dispatched\n            // in a server (non-DOM) environment?\n            const event = custom_event(type, detail);\n            callbacks.slice().forEach(fn => {\n                fn.call(component, event);\n            });\n        }\n    };\n}\nfunction setContext(key, context) {\n    get_current_component().$$.context.set(key, context);\n}\nfunction getContext(key) {\n    return get_current_component().$$.context.get(key);\n}\n// TODO figure out if we still want to support\n// shorthand events, or if we want to implement\n// a real bubbling mechanism\nfunction bubble(component, event) {\n    const callbacks = component.$$.callbacks[event.type];\n    if (callbacks) {\n        callbacks.slice().forEach(fn => fn(event));\n    }\n}\n\nconst dirty_components = [];\nconst intros = { enabled: false };\nconst binding_callbacks = [];\nconst render_callbacks = [];\nconst flush_callbacks = [];\nconst resolved_promise = Promise.resolve();\nlet update_scheduled = false;\nfunction schedule_update() {\n    if (!update_scheduled) {\n        update_scheduled = true;\n        resolved_promise.then(flush);\n    }\n}\nfunction tick() {\n    schedule_update();\n    return resolved_promise;\n}\nfunction add_render_callback(fn) {\n    render_callbacks.push(fn);\n}\nfunction add_flush_callback(fn) {\n    flush_callbacks.push(fn);\n}\nlet flushing = false;\nconst seen_callbacks = new Set();\nfunction flush() {\n    if (flushing)\n        return;\n    flushing = true;\n    do {\n        // first, call beforeUpdate functions\n        // and update components\n        for (let i = 0; i < dirty_components.length; i += 1) {\n            const component = dirty_components[i];\n            set_current_component(component);\n            update(component.$$);\n        }\n        dirty_components.length = 0;\n        while (binding_callbacks.length)\n            binding_callbacks.pop()();\n        // then, once components are updated, call\n        // afterUpdate functions. This may cause\n        // subsequent updates...\n        for (let i = 0; i < render_callbacks.length; i += 1) {\n            const callback = render_callbacks[i];\n            if (!seen_callbacks.has(callback)) {\n                // ...so guard against infinite loops\n                seen_callbacks.add(callback);\n                callback();\n            }\n        }\n        render_callbacks.length = 0;\n    } while (dirty_components.length);\n    while (flush_callbacks.length) {\n        flush_callbacks.pop()();\n    }\n    update_scheduled = false;\n    flushing = false;\n    seen_callbacks.clear();\n}\nfunction update($$) {\n    if ($$.fragment !== null) {\n        $$.update();\n        run_all($$.before_update);\n        const dirty = $$.dirty;\n        $$.dirty = [-1];\n        $$.fragment && $$.fragment.p($$.ctx, dirty);\n        $$.after_update.forEach(add_render_callback);\n    }\n}\n\nlet promise;\nfunction wait() {\n    if (!promise) {\n        promise = Promise.resolve();\n        promise.then(() => {\n            promise = null;\n        });\n    }\n    return promise;\n}\nfunction dispatch(node, direction, kind) {\n    node.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));\n}\nconst outroing = new Set();\nlet outros;\nfunction group_outros() {\n    outros = {\n        r: 0,\n        c: [],\n        p: outros // parent group\n    };\n}\nfunction check_outros() {\n    if (!outros.r) {\n        run_all(outros.c);\n    }\n    outros = outros.p;\n}\nfunction transition_in(block, local) {\n    if (block && block.i) {\n        outroing.delete(block);\n        block.i(local);\n    }\n}\nfunction transition_out(block, local, detach, callback) {\n    if (block && block.o) {\n        if (outroing.has(block))\n            return;\n        outroing.add(block);\n        outros.c.push(() => {\n            outroing.delete(block);\n            if (callback) {\n                if (detach)\n                    block.d(1);\n                callback();\n            }\n        });\n        block.o(local);\n    }\n}\nconst null_transition = { duration: 0 };\nfunction create_in_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = false;\n    let animation_name;\n    let task;\n    let uid = 0;\n    function cleanup() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);\n        tick(0, 1);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        if (task)\n            task.abort();\n        running = true;\n        add_render_callback(() => dispatch(node, true, 'start'));\n        task = loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(1, 0);\n                    dispatch(node, true, 'end');\n                    cleanup();\n                    return running = false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(t, 1 - t);\n                }\n            }\n            return running;\n        });\n    }\n    let started = false;\n    return {\n        start() {\n            if (started)\n                return;\n            delete_rule(node);\n            if (is_function(config)) {\n                config = config();\n                wait().then(go);\n            }\n            else {\n                go();\n            }\n        },\n        invalidate() {\n            started = false;\n        },\n        end() {\n            if (running) {\n                cleanup();\n                running = false;\n            }\n        }\n    };\n}\nfunction create_out_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = true;\n    let animation_name;\n    const group = outros;\n    group.r += 1;\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 1, 0, duration, delay, easing, css);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        add_render_callback(() => dispatch(node, false, 'start'));\n        loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(0, 1);\n                    dispatch(node, false, 'end');\n                    if (!--group.r) {\n                        // this will result in `end()` being called,\n                        // so we don't need to clean up here\n                        run_all(group.c);\n                    }\n                    return false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(1 - t, t);\n                }\n            }\n            return running;\n        });\n    }\n    if (is_function(config)) {\n        wait().then(() => {\n            // @ts-ignore\n            config = config();\n            go();\n        });\n    }\n    else {\n        go();\n    }\n    return {\n        end(reset) {\n            if (reset && config.tick) {\n                config.tick(1, 0);\n            }\n            if (running) {\n                if (animation_name)\n                    delete_rule(node, animation_name);\n                running = false;\n            }\n        }\n    };\n}\nfunction create_bidirectional_transition(node, fn, params, intro) {\n    let config = fn(node, params);\n    let t = intro ? 0 : 1;\n    let running_program = null;\n    let pending_program = null;\n    let animation_name = null;\n    function clear_animation() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function init(program, duration) {\n        const d = program.b - t;\n        duration *= Math.abs(d);\n        return {\n            a: t,\n            b: program.b,\n            d,\n            duration,\n            start: program.start,\n            end: program.start + duration,\n            group: program.group\n        };\n    }\n    function go(b) {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        const program = {\n            start: now() + delay,\n            b\n        };\n        if (!b) {\n            // @ts-ignore todo: improve typings\n            program.group = outros;\n            outros.r += 1;\n        }\n        if (running_program) {\n            pending_program = program;\n        }\n        else {\n            // if this is an intro, and there's a delay, we need to do\n            // an initial tick and/or apply CSS animation immediately\n            if (css) {\n                clear_animation();\n                animation_name = create_rule(node, t, b, duration, delay, easing, css);\n            }\n            if (b)\n                tick(0, 1);\n            running_program = init(program, duration);\n            add_render_callback(() => dispatch(node, b, 'start'));\n            loop(now => {\n                if (pending_program && now > pending_program.start) {\n                    running_program = init(pending_program, duration);\n                    pending_program = null;\n                    dispatch(node, running_program.b, 'start');\n                    if (css) {\n                        clear_animation();\n                        animation_name = create_rule(node, t, running_program.b, running_program.duration, 0, easing, config.css);\n                    }\n                }\n                if (running_program) {\n                    if (now >= running_program.end) {\n                        tick(t = running_program.b, 1 - t);\n                        dispatch(node, running_program.b, 'end');\n                        if (!pending_program) {\n                            // we're done\n                            if (running_program.b) {\n                                // intro — we can tidy up immediately\n                                clear_animation();\n                            }\n                            else {\n                                // outro — needs to be coordinated\n                                if (!--running_program.group.r)\n                                    run_all(running_program.group.c);\n                            }\n                        }\n                        running_program = null;\n                    }\n                    else if (now >= running_program.start) {\n                        const p = now - running_program.start;\n                        t = running_program.a + running_program.d * easing(p / running_program.duration);\n                        tick(t, 1 - t);\n                    }\n                }\n                return !!(running_program || pending_program);\n            });\n        }\n    }\n    return {\n        run(b) {\n            if (is_function(config)) {\n                wait().then(() => {\n                    // @ts-ignore\n                    config = config();\n                    go(b);\n                });\n            }\n            else {\n                go(b);\n            }\n        },\n        end() {\n            clear_animation();\n            running_program = pending_program = null;\n        }\n    };\n}\n\nfunction handle_promise(promise, info) {\n    const token = info.token = {};\n    function update(type, index, key, value) {\n        if (info.token !== token)\n            return;\n        info.resolved = value;\n        let child_ctx = info.ctx;\n        if (key !== undefined) {\n            child_ctx = child_ctx.slice();\n            child_ctx[key] = value;\n        }\n        const block = type && (info.current = type)(child_ctx);\n        let needs_flush = false;\n        if (info.block) {\n            if (info.blocks) {\n                info.blocks.forEach((block, i) => {\n                    if (i !== index && block) {\n                        group_outros();\n                        transition_out(block, 1, 1, () => {\n                            info.blocks[i] = null;\n                        });\n                        check_outros();\n                    }\n                });\n            }\n            else {\n                info.block.d(1);\n            }\n            block.c();\n            transition_in(block, 1);\n            block.m(info.mount(), info.anchor);\n            needs_flush = true;\n        }\n        info.block = block;\n        if (info.blocks)\n            info.blocks[index] = block;\n        if (needs_flush) {\n            flush();\n        }\n    }\n    if (is_promise(promise)) {\n        const current_component = get_current_component();\n        promise.then(value => {\n            set_current_component(current_component);\n            update(info.then, 1, info.value, value);\n            set_current_component(null);\n        }, error => {\n            set_current_component(current_component);\n            update(info.catch, 2, info.error, error);\n            set_current_component(null);\n        });\n        // if we previously had a then/catch block, destroy it\n        if (info.current !== info.pending) {\n            update(info.pending, 0);\n            return true;\n        }\n    }\n    else {\n        if (info.current !== info.then) {\n            update(info.then, 1, info.value, promise);\n            return true;\n        }\n        info.resolved = promise;\n    }\n}\n\nconst globals = (typeof window !== 'undefined'\n    ? window\n    : typeof globalThis !== 'undefined'\n        ? globalThis\n        : global);\n\nfunction destroy_block(block, lookup) {\n    block.d(1);\n    lookup.delete(block.key);\n}\nfunction outro_and_destroy_block(block, lookup) {\n    transition_out(block, 1, 1, () => {\n        lookup.delete(block.key);\n    });\n}\nfunction fix_and_destroy_block(block, lookup) {\n    block.f();\n    destroy_block(block, lookup);\n}\nfunction fix_and_outro_and_destroy_block(block, lookup) {\n    block.f();\n    outro_and_destroy_block(block, lookup);\n}\nfunction update_keyed_each(old_blocks, dirty, get_key, dynamic, ctx, list, lookup, node, destroy, create_each_block, next, get_context) {\n    let o = old_blocks.length;\n    let n = list.length;\n    let i = o;\n    const old_indexes = {};\n    while (i--)\n        old_indexes[old_blocks[i].key] = i;\n    const new_blocks = [];\n    const new_lookup = new Map();\n    const deltas = new Map();\n    i = n;\n    while (i--) {\n        const child_ctx = get_context(ctx, list, i);\n        const key = get_key(child_ctx);\n        let block = lookup.get(key);\n        if (!block) {\n            block = create_each_block(key, child_ctx);\n            block.c();\n        }\n        else if (dynamic) {\n            block.p(child_ctx, dirty);\n        }\n        new_lookup.set(key, new_blocks[i] = block);\n        if (key in old_indexes)\n            deltas.set(key, Math.abs(i - old_indexes[key]));\n    }\n    const will_move = new Set();\n    const did_move = new Set();\n    function insert(block) {\n        transition_in(block, 1);\n        block.m(node, next, lookup.has(block.key));\n        lookup.set(block.key, block);\n        next = block.first;\n        n--;\n    }\n    while (o && n) {\n        const new_block = new_blocks[n - 1];\n        const old_block = old_blocks[o - 1];\n        const new_key = new_block.key;\n        const old_key = old_block.key;\n        if (new_block === old_block) {\n            // do nothing\n            next = new_block.first;\n            o--;\n            n--;\n        }\n        else if (!new_lookup.has(old_key)) {\n            // remove old block\n            destroy(old_block, lookup);\n            o--;\n        }\n        else if (!lookup.has(new_key) || will_move.has(new_key)) {\n            insert(new_block);\n        }\n        else if (did_move.has(old_key)) {\n            o--;\n        }\n        else if (deltas.get(new_key) > deltas.get(old_key)) {\n            did_move.add(new_key);\n            insert(new_block);\n        }\n        else {\n            will_move.add(old_key);\n            o--;\n        }\n    }\n    while (o--) {\n        const old_block = old_blocks[o];\n        if (!new_lookup.has(old_block.key))\n            destroy(old_block, lookup);\n    }\n    while (n)\n        insert(new_blocks[n - 1]);\n    return new_blocks;\n}\nfunction validate_each_keys(ctx, list, get_context, get_key) {\n    const keys = new Set();\n    for (let i = 0; i < list.length; i++) {\n        const key = get_key(get_context(ctx, list, i));\n        if (keys.has(key)) {\n            throw new Error(`Cannot have duplicate keys in a keyed each`);\n        }\n        keys.add(key);\n    }\n}\n\nfunction get_spread_update(levels, updates) {\n    const update = {};\n    const to_null_out = {};\n    const accounted_for = { $$scope: 1 };\n    let i = levels.length;\n    while (i--) {\n        const o = levels[i];\n        const n = updates[i];\n        if (n) {\n            for (const key in o) {\n                if (!(key in n))\n                    to_null_out[key] = 1;\n            }\n            for (const key in n) {\n                if (!accounted_for[key]) {\n                    update[key] = n[key];\n                    accounted_for[key] = 1;\n                }\n            }\n            levels[i] = n;\n        }\n        else {\n            for (const key in o) {\n                accounted_for[key] = 1;\n            }\n        }\n    }\n    for (const key in to_null_out) {\n        if (!(key in update))\n            update[key] = undefined;\n    }\n    return update;\n}\nfunction get_spread_object(spread_props) {\n    return typeof spread_props === 'object' && spread_props !== null ? spread_props : {};\n}\n\n// source: https://html.spec.whatwg.org/multipage/indices.html\nconst boolean_attributes = new Set([\n    'allowfullscreen',\n    'allowpaymentrequest',\n    'async',\n    'autofocus',\n    'autoplay',\n    'checked',\n    'controls',\n    'default',\n    'defer',\n    'disabled',\n    'formnovalidate',\n    'hidden',\n    'ismap',\n    'loop',\n    'multiple',\n    'muted',\n    'nomodule',\n    'novalidate',\n    'open',\n    'playsinline',\n    'readonly',\n    'required',\n    'reversed',\n    'selected'\n]);\n\nconst invalid_attribute_name_character = /[\\s'\">/=\\u{FDD0}-\\u{FDEF}\\u{FFFE}\\u{FFFF}\\u{1FFFE}\\u{1FFFF}\\u{2FFFE}\\u{2FFFF}\\u{3FFFE}\\u{3FFFF}\\u{4FFFE}\\u{4FFFF}\\u{5FFFE}\\u{5FFFF}\\u{6FFFE}\\u{6FFFF}\\u{7FFFE}\\u{7FFFF}\\u{8FFFE}\\u{8FFFF}\\u{9FFFE}\\u{9FFFF}\\u{AFFFE}\\u{AFFFF}\\u{BFFFE}\\u{BFFFF}\\u{CFFFE}\\u{CFFFF}\\u{DFFFE}\\u{DFFFF}\\u{EFFFE}\\u{EFFFF}\\u{FFFFE}\\u{FFFFF}\\u{10FFFE}\\u{10FFFF}]/u;\n// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\n// https://infra.spec.whatwg.org/#noncharacter\nfunction spread(args, classes_to_add) {\n    const attributes = Object.assign({}, ...args);\n    if (classes_to_add) {\n        if (attributes.class == null) {\n            attributes.class = classes_to_add;\n        }\n        else {\n            attributes.class += ' ' + classes_to_add;\n        }\n    }\n    let str = '';\n    Object.keys(attributes).forEach(name => {\n        if (invalid_attribute_name_character.test(name))\n            return;\n        const value = attributes[name];\n        if (value === true)\n            str += \" \" + name;\n        else if (boolean_attributes.has(name.toLowerCase())) {\n            if (value)\n                str += \" \" + name;\n        }\n        else if (value != null) {\n            str += ` ${name}=\"${String(value).replace(/\"/g, '&#34;').replace(/'/g, '&#39;')}\"`;\n        }\n    });\n    return str;\n}\nconst escaped = {\n    '\"': '&quot;',\n    \"'\": '&#39;',\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;'\n};\nfunction escape(html) {\n    return String(html).replace(/[\"'&<>]/g, match => escaped[match]);\n}\nfunction each(items, fn) {\n    let str = '';\n    for (let i = 0; i < items.length; i += 1) {\n        str += fn(items[i], i);\n    }\n    return str;\n}\nconst missing_component = {\n    $$render: () => ''\n};\nfunction validate_component(component, name) {\n    if (!component || !component.$$render) {\n        if (name === 'svelte:component')\n            name += ' this={...}';\n        throw new Error(`<${name}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules`);\n    }\n    return component;\n}\nfunction debug(file, line, column, values) {\n    console.log(`{@debug} ${file ? file + ' ' : ''}(${line}:${column})`); // eslint-disable-line no-console\n    console.log(values); // eslint-disable-line no-console\n    return '';\n}\nlet on_destroy;\nfunction create_ssr_component(fn) {\n    function $$render(result, props, bindings, slots) {\n        const parent_component = current_component;\n        const $$ = {\n            on_destroy,\n            context: new Map(parent_component ? parent_component.$$.context : []),\n            // these will be immediately discarded\n            on_mount: [],\n            before_update: [],\n            after_update: [],\n            callbacks: blank_object()\n        };\n        set_current_component({ $$ });\n        const html = fn(result, props, bindings, slots);\n        set_current_component(parent_component);\n        return html;\n    }\n    return {\n        render: (props = {}, options = {}) => {\n            on_destroy = [];\n            const result = { title: '', head: '', css: new Set() };\n            const html = $$render(result, props, {}, options);\n            run_all(on_destroy);\n            return {\n                html,\n                css: {\n                    code: Array.from(result.css).map(css => css.code).join('\\n'),\n                    map: null // TODO\n                },\n                head: result.title + result.head\n            };\n        },\n        $$render\n    };\n}\nfunction add_attribute(name, value, boolean) {\n    if (value == null || (boolean && !value))\n        return '';\n    return ` ${name}${value === true ? '' : `=${typeof value === 'string' ? JSON.stringify(escape(value)) : `\"${value}\"`}`}`;\n}\nfunction add_classes(classes) {\n    return classes ? ` class=\"${classes}\"` : ``;\n}\n\nfunction bind(component, name, callback) {\n    const index = component.$$.props[name];\n    if (index !== undefined) {\n        component.$$.bound[index] = callback;\n        callback(component.$$.ctx[index]);\n    }\n}\nfunction create_component(block) {\n    block && block.c();\n}\nfunction claim_component(block, parent_nodes) {\n    block && block.l(parent_nodes);\n}\nfunction mount_component(component, target, anchor) {\n    const { fragment, on_mount, on_destroy, after_update } = component.$$;\n    fragment && fragment.m(target, anchor);\n    // onMount happens before the initial afterUpdate\n    add_render_callback(() => {\n        const new_on_destroy = on_mount.map(run).filter(is_function);\n        if (on_destroy) {\n            on_destroy.push(...new_on_destroy);\n        }\n        else {\n            // Edge case - component was destroyed immediately,\n            // most likely as a result of a binding initialising\n            run_all(new_on_destroy);\n        }\n        component.$$.on_mount = [];\n    });\n    after_update.forEach(add_render_callback);\n}\nfunction destroy_component(component, detaching) {\n    const $$ = component.$$;\n    if ($$.fragment !== null) {\n        run_all($$.on_destroy);\n        $$.fragment && $$.fragment.d(detaching);\n        // TODO null out other refs, including component.$$ (but need to\n        // preserve final state?)\n        $$.on_destroy = $$.fragment = null;\n        $$.ctx = [];\n    }\n}\nfunction make_dirty(component, i) {\n    if (component.$$.dirty[0] === -1) {\n        dirty_components.push(component);\n        schedule_update();\n        component.$$.dirty.fill(0);\n    }\n    component.$$.dirty[(i / 31) | 0] |= (1 << (i % 31));\n}\nfunction init(component, options, instance, create_fragment, not_equal, props, dirty = [-1]) {\n    const parent_component = current_component;\n    set_current_component(component);\n    const prop_values = options.props || {};\n    const $$ = component.$$ = {\n        fragment: null,\n        ctx: null,\n        // state\n        props,\n        update: noop,\n        not_equal,\n        bound: blank_object(),\n        // lifecycle\n        on_mount: [],\n        on_destroy: [],\n        before_update: [],\n        after_update: [],\n        context: new Map(parent_component ? parent_component.$$.context : []),\n        // everything else\n        callbacks: blank_object(),\n        dirty\n    };\n    let ready = false;\n    $$.ctx = instance\n        ? instance(component, prop_values, (i, ret, ...rest) => {\n            const value = rest.length ? rest[0] : ret;\n            if ($$.ctx && not_equal($$.ctx[i], $$.ctx[i] = value)) {\n                if ($$.bound[i])\n                    $$.bound[i](value);\n                if (ready)\n                    make_dirty(component, i);\n            }\n            return ret;\n        })\n        : [];\n    $$.update();\n    ready = true;\n    run_all($$.before_update);\n    // `false` as a special case of no DOM component\n    $$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n    if (options.target) {\n        if (options.hydrate) {\n            const nodes = children(options.target);\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.l(nodes);\n            nodes.forEach(detach);\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.c();\n        }\n        if (options.intro)\n            transition_in(component.$$.fragment);\n        mount_component(component, options.target, options.anchor);\n        flush();\n    }\n    set_current_component(parent_component);\n}\nlet SvelteElement;\nif (typeof HTMLElement === 'function') {\n    SvelteElement = class extends HTMLElement {\n        constructor() {\n            super();\n            this.attachShadow({ mode: 'open' });\n        }\n        connectedCallback() {\n            // @ts-ignore todo: improve typings\n            for (const key in this.$$.slotted) {\n                // @ts-ignore todo: improve typings\n                this.appendChild(this.$$.slotted[key]);\n            }\n        }\n        attributeChangedCallback(attr, _oldValue, newValue) {\n            this[attr] = newValue;\n        }\n        $destroy() {\n            destroy_component(this, 1);\n            this.$destroy = noop;\n        }\n        $on(type, callback) {\n            // TODO should this delegate to addEventListener?\n            const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n            callbacks.push(callback);\n            return () => {\n                const index = callbacks.indexOf(callback);\n                if (index !== -1)\n                    callbacks.splice(index, 1);\n            };\n        }\n        $set() {\n            // overridden by instance, if it has props\n        }\n    };\n}\nclass SvelteComponent {\n    $destroy() {\n        destroy_component(this, 1);\n        this.$destroy = noop;\n    }\n    $on(type, callback) {\n        const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n        callbacks.push(callback);\n        return () => {\n            const index = callbacks.indexOf(callback);\n            if (index !== -1)\n                callbacks.splice(index, 1);\n        };\n    }\n    $set() {\n        // overridden by instance, if it has props\n    }\n}\n\nfunction dispatch_dev(type, detail) {\n    document.dispatchEvent(custom_event(type, Object.assign({ version: '3.22.3' }, detail)));\n}\nfunction append_dev(target, node) {\n    dispatch_dev(\"SvelteDOMInsert\", { target, node });\n    append(target, node);\n}\nfunction insert_dev(target, node, anchor) {\n    dispatch_dev(\"SvelteDOMInsert\", { target, node, anchor });\n    insert(target, node, anchor);\n}\nfunction detach_dev(node) {\n    dispatch_dev(\"SvelteDOMRemove\", { node });\n    detach(node);\n}\nfunction detach_between_dev(before, after) {\n    while (before.nextSibling && before.nextSibling !== after) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction detach_before_dev(after) {\n    while (after.previousSibling) {\n        detach_dev(after.previousSibling);\n    }\n}\nfunction detach_after_dev(before) {\n    while (before.nextSibling) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction listen_dev(node, event, handler, options, has_prevent_default, has_stop_propagation) {\n    const modifiers = options === true ? [\"capture\"] : options ? Array.from(Object.keys(options)) : [];\n    if (has_prevent_default)\n        modifiers.push('preventDefault');\n    if (has_stop_propagation)\n        modifiers.push('stopPropagation');\n    dispatch_dev(\"SvelteDOMAddEventListener\", { node, event, handler, modifiers });\n    const dispose = listen(node, event, handler, options);\n    return () => {\n        dispatch_dev(\"SvelteDOMRemoveEventListener\", { node, event, handler, modifiers });\n        dispose();\n    };\n}\nfunction attr_dev(node, attribute, value) {\n    attr(node, attribute, value);\n    if (value == null)\n        dispatch_dev(\"SvelteDOMRemoveAttribute\", { node, attribute });\n    else\n        dispatch_dev(\"SvelteDOMSetAttribute\", { node, attribute, value });\n}\nfunction prop_dev(node, property, value) {\n    node[property] = value;\n    dispatch_dev(\"SvelteDOMSetProperty\", { node, property, value });\n}\nfunction dataset_dev(node, property, value) {\n    node.dataset[property] = value;\n    dispatch_dev(\"SvelteDOMSetDataset\", { node, property, value });\n}\nfunction set_data_dev(text, data) {\n    data = '' + data;\n    if (text.data === data)\n        return;\n    dispatch_dev(\"SvelteDOMSetData\", { node: text, data });\n    text.data = data;\n}\nfunction validate_each_argument(arg) {\n    if (typeof arg !== 'string' && !(arg && typeof arg === 'object' && 'length' in arg)) {\n        let msg = '{#each} only iterates over array-like objects.';\n        if (typeof Symbol === 'function' && arg && Symbol.iterator in arg) {\n            msg += ' You can use a spread to convert this iterable into an array.';\n        }\n        throw new Error(msg);\n    }\n}\nfunction validate_slots(name, slot, keys) {\n    for (const slot_key of Object.keys(slot)) {\n        if (!~keys.indexOf(slot_key)) {\n            console.warn(`<${name}> received an unexpected slot \"${slot_key}\".`);\n        }\n    }\n}\nclass SvelteComponentDev extends SvelteComponent {\n    constructor(options) {\n        if (!options || (!options.target && !options.$$inline)) {\n            throw new Error(`'target' is a required option`);\n        }\n        super();\n    }\n    $destroy() {\n        super.$destroy();\n        this.$destroy = () => {\n            console.warn(`Component was already destroyed`); // eslint-disable-line no-console\n        };\n    }\n    $capture_state() { }\n    $inject_state() { }\n}\nfunction loop_guard(timeout) {\n    const start = Date.now();\n    return () => {\n        if (Date.now() - start > timeout) {\n            throw new Error(`Infinite loop detected`);\n        }\n    };\n}\n\nexport { HtmlTag, SvelteComponent, SvelteComponentDev, SvelteElement, action_destroyer, add_attribute, add_classes, add_flush_callback, add_location, add_render_callback, add_resize_listener, add_transform, afterUpdate, append, append_dev, assign, attr, attr_dev, beforeUpdate, bind, binding_callbacks, blank_object, bubble, check_outros, children, claim_component, claim_element, claim_space, claim_text, clear_loops, component_subscribe, compute_rest_props, createEventDispatcher, create_animation, create_bidirectional_transition, create_component, create_in_transition, create_out_transition, create_slot, create_ssr_component, current_component, custom_event, dataset_dev, debug, destroy_block, destroy_component, destroy_each, detach, detach_after_dev, detach_before_dev, detach_between_dev, detach_dev, dirty_components, dispatch_dev, each, element, element_is, empty, escape, escaped, exclude_internal_props, fix_and_destroy_block, fix_and_outro_and_destroy_block, fix_position, flush, getContext, get_binding_group_value, get_current_component, get_slot_changes, get_slot_context, get_spread_object, get_spread_update, get_store_value, globals, group_outros, handle_promise, has_prop, identity, init, insert, insert_dev, intros, invalid_attribute_name_character, is_client, is_crossorigin, is_function, is_promise, listen, listen_dev, loop, loop_guard, missing_component, mount_component, noop, not_equal, now, null_to_empty, object_without_properties, onDestroy, onMount, once, outro_and_destroy_block, prevent_default, prop_dev, query_selector_all, raf, run, run_all, safe_not_equal, schedule_update, select_multiple_value, select_option, select_options, select_value, self, setContext, set_attributes, set_current_component, set_custom_element_data, set_data, set_data_dev, set_input_type, set_input_value, set_now, set_raf, set_store_value, set_style, set_svg_attributes, space, spread, stop_propagation, subscribe, svg_element, text, tick, time_ranges_to_array, to_number, toggle_class, transition_in, transition_out, update_keyed_each, validate_component, validate_each_argument, validate_each_keys, validate_slots, validate_store, xlink_attr };\n","export function BlankNode (id) {\n  this.value = id || ('b' + (++BlankNode.nextId))\n}\n\nBlankNode.prototype.equals = function (other) {\n  return !!other && other.termType === this.termType && other.value === this.value\n}\n\nBlankNode.prototype.termType = 'BlankNode'\n\nBlankNode.nextId = 0\n","export function DefaultGraph () {\n  this.value = ''\n}\n\nDefaultGraph.prototype.equals = function (other) {\n  return !!other && other.termType === this.termType\n}\n\nDefaultGraph.prototype.termType = 'DefaultGraph'\n","export function NamedNode (iri) {\n  this.value = iri\n}\n\nNamedNode.prototype.equals = function (other) {\n  return !!other && other.termType === this.termType && other.value === this.value\n}\n\nNamedNode.prototype.termType = 'NamedNode'\n","import { NamedNode } from './named-node'\n\nexport function Literal (value, language, datatype) {\n  this.value = value\n  this.datatype = Literal.stringDatatype\n  this.language = ''\n\n  if (language) {\n    this.language = language\n    this.datatype = Literal.langStringDatatype\n  } else if (datatype) {\n    this.datatype = datatype\n  }\n}\n\nLiteral.prototype.equals = function (other) {\n  return !!other && other.termType === this.termType && other.value === this.value &&\n    other.language === this.language && other.datatype.equals(this.datatype)\n}\n\nLiteral.prototype.termType = 'Literal'\nLiteral.langStringDatatype = new NamedNode('http://www.w3.org/1999/02/22-rdf-syntax-ns#langString')\nLiteral.stringDatatype = new NamedNode('http://www.w3.org/2001/XMLSchema#string')\n","import { DefaultGraph } from './default-graph'\n\nexport function Quad (subject, predicate, object, graph) {\n  this.subject = subject\n  this.predicate = predicate\n  this.object = object\n\n  if (graph) {\n    this.graph = graph\n  } else {\n    this.graph = new DefaultGraph()\n  }\n}\n\nQuad.prototype.equals = function (other) {\n  return !!other && other.subject.equals(this.subject) && other.predicate.equals(this.predicate) &&\n    other.object.equals(this.object) && other.graph.equals(this.graph)\n}\n","export function Variable (name) {\n  this.value = name\n}\n\nVariable.prototype.equals = function (other) {\n  return !!other && other.termType === this.termType && other.value === this.value\n}\n\nVariable.prototype.termType = 'Variable'\n","import { BlankNode } from './blank-node'\nimport { DefaultGraph } from './default-graph'\nimport { Literal } from './literal'\nimport { NamedNode } from './named-node'\nimport { Quad } from './quad'\nimport { Variable } from './variable'\n\nexport const defaultGraphInstance = new DefaultGraph()\n\nexport function namedNode (value) {\n  return new NamedNode(value)\n}\n\nexport function blankNode (value) {\n  return new BlankNode(value)\n}\n\nexport function literal (value, languageOrDatatype) {\n  if (typeof languageOrDatatype === 'string') {\n    if (languageOrDatatype.indexOf(':') === -1) {\n      return new Literal(value, languageOrDatatype)\n    }\n\n    return new Literal(value, null, namedNode(languageOrDatatype))\n  }\n\n  return new Literal(value, null, languageOrDatatype)\n}\n\nexport function defaultGraph () {\n  return defaultGraphInstance\n}\n\nexport function variable (value) {\n  return new Variable(value)\n}\n\nexport function quad (subject, predicate, object, graph) {\n  return new Quad(subject, predicate, object, graph || defaultGraphInstance)\n}\n\nexport function triple (subject, predicate, object) {\n  return quad(subject, predicate, object)\n}\n","function isMatch (quad, subject, predicate, object, graph) {\n  if (subject && !quad.subject.equals(subject)) {\n    return false\n  }\n\n  if (predicate && !quad.predicate.equals(predicate)) {\n    return false\n  }\n\n  if (object && !quad.object.equals(object)) {\n    return false\n  }\n\n  if (graph && !quad.graph.equals(graph)) {\n    return false\n  }\n\n  return true\n}\n\nmodule.exports = isMatch\n","const isMatch = require('./isMatch')\n\nclass DatasetCore {\n  constructor (quads) {\n    this.quads = new Set()\n\n    if (quads) {\n      for (const quad of quads) {\n        this.quads.add(quad)\n      }\n    }\n  }\n\n  get size () {\n    return this.quads.size\n  }\n\n  add (quad) {\n    if (!this.has(quad)) {\n      this.quads.add(quad)\n    }\n\n    return this\n  }\n\n  delete (quad) {\n    for (const localQuad of this) {\n      if (isMatch(quad, localQuad.subject, localQuad.predicate, localQuad.object, localQuad.graph)) {\n        this.quads.delete(localQuad)\n\n        return this\n      }\n    }\n\n    return this\n  }\n\n  has (quad) {\n    for (const other of this) {\n      if (isMatch(other, quad.subject, quad.predicate, quad.object, quad.graph)) {\n        return true\n      }\n    }\n\n    return false\n  }\n\n  match (subject, predicate, object, graph) {\n    const matches = new Set()\n\n    for (const quad of this) {\n      if (isMatch(quad, subject, predicate, object, graph)) {\n        matches.add(quad)\n      }\n    }\n\n    return new this.constructor(matches)\n  }\n\n  [Symbol.iterator] () {\n    return this.quads[Symbol.iterator]()\n  }\n}\n\nmodule.exports = DatasetCore\n","const rdf = require('@rdfjs/data-model')\nconst DatasetCore = require('./DatasetCore')\n\nfunction dataset (quads) {\n  return new DatasetCore(quads)\n}\n\nmodule.exports = Object.assign({ dataset }, rdf)\n","<script>\n  import * as Factory from \"@rdfjs/data-model\";\n  let content = \"\";\n  let lang = \"\";\n  export let value;\n  $: content = value.value;\n  $: lang = value.language;\n  function userChange(e) {\n    value = lang\n      ? Factory.literal(content, lang)\n      : Factory.literal(content, \"http://www.w3.org/2001/XMLSchema#string\");\n  }\n</script>\n\n<div>\n  <input type=\"text\" bind:value={content} on:input={userChange} />\n  <input\n    class=\"language\"\n    type=\"text\"\n    size=\"2\"\n    pattern=\"[a-z][a-z]\"\n    spellcheck=\"false\"\n    bind:value={lang} on:input={userChange} />\n</div>\n","(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define(factory) :\n    (global = global || self, global.clEditor = factory());\n}(this, (function () { 'use strict';\n\n    function noop() {}\n\n    function run(fn) {\n      return fn();\n    }\n\n    function blank_object() {\n      return Object.create(null);\n    }\n\n    function run_all(fns) {\n      fns.forEach(run);\n    }\n\n    function is_function(thing) {\n      return typeof thing === 'function';\n    }\n\n    function safe_not_equal(a, b) {\n      return a != a ? b == b : a !== b || a && typeof a === 'object' || typeof a === 'function';\n    }\n\n    function subscribe(store, ...callbacks) {\n      if (store == null) {\n        return noop;\n      }\n\n      const unsub = store.subscribe(...callbacks);\n      return unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n    }\n\n    function get_store_value(store) {\n      let value;\n      subscribe(store, _ => value = _)();\n      return value;\n    }\n\n    function component_subscribe(component, store, callback) {\n      component.$$.on_destroy.push(subscribe(store, callback));\n    }\n\n    function set_store_value(store, ret, value = ret) {\n      store.set(value);\n      return ret;\n    }\n\n    function append(target, node) {\n      target.appendChild(node);\n    }\n\n    function insert(target, node, anchor) {\n      target.insertBefore(node, anchor || null);\n    }\n\n    function detach(node) {\n      node.parentNode.removeChild(node);\n    }\n\n    function destroy_each(iterations, detaching) {\n      for (let i = 0; i < iterations.length; i += 1) {\n        if (iterations[i]) iterations[i].d(detaching);\n      }\n    }\n\n    function element(name) {\n      return document.createElement(name);\n    }\n\n    function text(data) {\n      return document.createTextNode(data);\n    }\n\n    function space() {\n      return text(' ');\n    }\n\n    function listen(node, event, handler, options) {\n      node.addEventListener(event, handler, options);\n      return () => node.removeEventListener(event, handler, options);\n    }\n\n    function prevent_default(fn) {\n      return function (event) {\n        event.preventDefault(); // @ts-ignore\n\n        return fn.call(this, event);\n      };\n    }\n\n    function attr(node, attribute, value) {\n      if (value == null) node.removeAttribute(attribute);else if (node.getAttribute(attribute) !== value) node.setAttribute(attribute, value);\n    }\n\n    function children(element) {\n      return Array.from(element.childNodes);\n    }\n\n    function set_data(text, data) {\n      data = '' + data;\n      if (text.data !== data) text.data = data;\n    }\n\n    function set_input_value(input, value) {\n      if (value != null || input.value) {\n        input.value = value;\n      }\n    }\n\n    function set_style(node, key, value, important) {\n      node.style.setProperty(key, value, important ? 'important' : '');\n    }\n\n    function toggle_class(element, name, toggle) {\n      element.classList[toggle ? 'add' : 'remove'](name);\n    }\n\n    function custom_event(type, detail) {\n      const e = document.createEvent('CustomEvent');\n      e.initCustomEvent(type, false, false, detail);\n      return e;\n    }\n\n    class HtmlTag {\n      constructor(html, anchor = null) {\n        this.e = element('div');\n        this.a = anchor;\n        this.u(html);\n      }\n\n      m(target, anchor = null) {\n        for (let i = 0; i < this.n.length; i += 1) {\n          insert(target, this.n[i], anchor);\n        }\n\n        this.t = target;\n      }\n\n      u(html) {\n        this.e.innerHTML = html;\n        this.n = Array.from(this.e.childNodes);\n      }\n\n      p(html) {\n        this.d();\n        this.u(html);\n        this.m(this.t, this.a);\n      }\n\n      d() {\n        this.n.forEach(detach);\n      }\n\n    }\n\n    let current_component;\n\n    function set_current_component(component) {\n      current_component = component;\n    }\n\n    function get_current_component() {\n      if (!current_component) throw new Error(`Function called outside component initialization`);\n      return current_component;\n    }\n\n    function onMount(fn) {\n      get_current_component().$$.on_mount.push(fn);\n    }\n\n    function createEventDispatcher() {\n      const component = get_current_component();\n      return (type, detail) => {\n        const callbacks = component.$$.callbacks[type];\n\n        if (callbacks) {\n          // TODO are there situations where events could be dispatched\n          // in a server (non-DOM) environment?\n          const event = custom_event(type, detail);\n          callbacks.slice().forEach(fn => {\n            fn.call(component, event);\n          });\n        }\n      };\n    }\n\n    function setContext(key, context) {\n      get_current_component().$$.context.set(key, context);\n    }\n\n    const dirty_components = [];\n    const binding_callbacks = [];\n    const render_callbacks = [];\n    const flush_callbacks = [];\n    const resolved_promise = Promise.resolve();\n    let update_scheduled = false;\n\n    function schedule_update() {\n      if (!update_scheduled) {\n        update_scheduled = true;\n        resolved_promise.then(flush);\n      }\n    }\n\n    function add_render_callback(fn) {\n      render_callbacks.push(fn);\n    }\n\n    let flushing = false;\n    const seen_callbacks = new Set();\n\n    function flush() {\n      if (flushing) return;\n      flushing = true;\n\n      do {\n        // first, call beforeUpdate functions\n        // and update components\n        for (let i = 0; i < dirty_components.length; i += 1) {\n          const component = dirty_components[i];\n          set_current_component(component);\n          update(component.$$);\n        }\n\n        dirty_components.length = 0;\n\n        while (binding_callbacks.length) binding_callbacks.pop()(); // then, once components are updated, call\n        // afterUpdate functions. This may cause\n        // subsequent updates...\n\n\n        for (let i = 0; i < render_callbacks.length; i += 1) {\n          const callback = render_callbacks[i];\n\n          if (!seen_callbacks.has(callback)) {\n            // ...so guard against infinite loops\n            seen_callbacks.add(callback);\n            callback();\n          }\n        }\n\n        render_callbacks.length = 0;\n      } while (dirty_components.length);\n\n      while (flush_callbacks.length) {\n        flush_callbacks.pop()();\n      }\n\n      update_scheduled = false;\n      flushing = false;\n      seen_callbacks.clear();\n    }\n\n    function update($$) {\n      if ($$.fragment !== null) {\n        $$.update();\n        run_all($$.before_update);\n        const dirty = $$.dirty;\n        $$.dirty = [-1];\n        $$.fragment && $$.fragment.p($$.ctx, dirty);\n        $$.after_update.forEach(add_render_callback);\n      }\n    }\n\n    const outroing = new Set();\n    let outros;\n\n    function transition_in(block, local) {\n      if (block && block.i) {\n        outroing.delete(block);\n        block.i(local);\n      }\n    }\n\n    function transition_out(block, local, detach, callback) {\n      if (block && block.o) {\n        if (outroing.has(block)) return;\n        outroing.add(block);\n        outros.c.push(() => {\n          outroing.delete(block);\n\n          if (callback) {\n            if (detach) block.d(1);\n            callback();\n          }\n        });\n        block.o(local);\n      }\n    }\n\n    const globals = typeof window !== 'undefined' ? window : global;\n\n    function create_component(block) {\n      block && block.c();\n    }\n\n    function mount_component(component, target, anchor) {\n      const {\n        fragment,\n        on_mount,\n        on_destroy,\n        after_update\n      } = component.$$;\n      fragment && fragment.m(target, anchor); // onMount happens before the initial afterUpdate\n\n      add_render_callback(() => {\n        const new_on_destroy = on_mount.map(run).filter(is_function);\n\n        if (on_destroy) {\n          on_destroy.push(...new_on_destroy);\n        } else {\n          // Edge case - component was destroyed immediately,\n          // most likely as a result of a binding initialising\n          run_all(new_on_destroy);\n        }\n\n        component.$$.on_mount = [];\n      });\n      after_update.forEach(add_render_callback);\n    }\n\n    function destroy_component(component, detaching) {\n      const $$ = component.$$;\n\n      if ($$.fragment !== null) {\n        run_all($$.on_destroy);\n        $$.fragment && $$.fragment.d(detaching); // TODO null out other refs, including component.$$ (but need to\n        // preserve final state?)\n\n        $$.on_destroy = $$.fragment = null;\n        $$.ctx = [];\n      }\n    }\n\n    function make_dirty(component, i) {\n      if (component.$$.dirty[0] === -1) {\n        dirty_components.push(component);\n        schedule_update();\n        component.$$.dirty.fill(0);\n      }\n\n      component.$$.dirty[i / 31 | 0] |= 1 << i % 31;\n    }\n\n    function init(component, options, instance, create_fragment, not_equal, props, dirty = [-1]) {\n      const parent_component = current_component;\n      set_current_component(component);\n      const prop_values = options.props || {};\n      const $$ = component.$$ = {\n        fragment: null,\n        ctx: null,\n        // state\n        props,\n        update: noop,\n        not_equal,\n        bound: blank_object(),\n        // lifecycle\n        on_mount: [],\n        on_destroy: [],\n        before_update: [],\n        after_update: [],\n        context: new Map(parent_component ? parent_component.$$.context : []),\n        // everything else\n        callbacks: blank_object(),\n        dirty\n      };\n      let ready = false;\n      $$.ctx = instance ? instance(component, prop_values, (i, ret, ...rest) => {\n        const value = rest.length ? rest[0] : ret;\n\n        if ($$.ctx && not_equal($$.ctx[i], $$.ctx[i] = value)) {\n          if ($$.bound[i]) $$.bound[i](value);\n          if (ready) make_dirty(component, i);\n        }\n\n        return ret;\n      }) : [];\n      $$.update();\n      ready = true;\n      run_all($$.before_update); // `false` as a special case of no DOM component\n\n      $$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n\n      if (options.target) {\n        if (options.hydrate) {\n          // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n          $$.fragment && $$.fragment.l(children(options.target));\n        } else {\n          // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n          $$.fragment && $$.fragment.c();\n        }\n\n        if (options.intro) transition_in(component.$$.fragment);\n        mount_component(component, options.target, options.anchor);\n        flush();\n      }\n\n      set_current_component(parent_component);\n    }\n\n    class SvelteComponent {\n      $destroy() {\n        destroy_component(this, 1);\n        this.$destroy = noop;\n      }\n\n      $on(type, callback) {\n        const callbacks = this.$$.callbacks[type] || (this.$$.callbacks[type] = []);\n        callbacks.push(callback);\n        return () => {\n          const index = callbacks.indexOf(callback);\n          if (index !== -1) callbacks.splice(index, 1);\n        };\n      }\n\n      $set() {// overridden by instance, if it has props\n      }\n\n    }\n\n    let t = {};\n\n    const exec = (command, value = null) => {\n      document.execCommand(command, false, value);\n    };\n\n    const getTagsRecursive = (element, tags) => {\n      tags = tags || (element && element.tagName ? [element.tagName] : []);\n\n      if (element && element.parentNode) {\n        element = element.parentNode;\n      } else {\n        return tags;\n      }\n\n      const tag = element.tagName;\n      if (element.style && element.getAttribute) {\n        [element.style.textAlign || element.getAttribute('align'), element.style.color || tag === 'FONT' && 'forecolor', element.style.backgroundColor && 'backcolor']\n          .filter((item) => item)\n          .forEach((item) => tags.push(item));\n      }\n\n      if (tag === 'DIV') {\n        return tags;\n      }\n\n      tags.push(tag);\n\n      return getTagsRecursive(element, tags).filter((_tag) => _tag != null);\n    };\n\n    const saveRange = (editor) => {\n      const documentSelection = document.getSelection();\n\n      t.range = null;\n\n      if (documentSelection.rangeCount) {\n          let savedRange = t.range = documentSelection.getRangeAt(0);\n          let range = document.createRange();\n          let rangeStart;\n          range.selectNodeContents(editor);\n          range.setEnd(savedRange.startContainer, savedRange.startOffset);\n          rangeStart = (range + '').length;\n          t.metaRange = {\n              start: rangeStart,\n              end: rangeStart + (savedRange + '').length\n          };\n      }\n    };\n    const restoreRange = (editor) => {\n      let metaRange = t.metaRange;\n      let savedRange = t.range;\n      let documentSelection = document.getSelection();\n      let range;\n\n      if (!savedRange) {\n          return;\n      }\n\n      if (metaRange && metaRange.start !== metaRange.end) { // Algorithm from http://jsfiddle.net/WeWy7/3/\n          let charIndex = 0,\n              nodeStack = [editor],\n              node,\n              foundStart = false,\n              stop = false;\n\n          range = document.createRange();\n\n          while (!stop && (node = nodeStack.pop())) {\n              if (node.nodeType === 3) {\n                  let nextCharIndex = charIndex + node.length;\n                  if (!foundStart && metaRange.start >= charIndex && metaRange.start <= nextCharIndex) {\n                      range.setStart(node, metaRange.start - charIndex);\n                      foundStart = true;\n                  }\n                  if (foundStart && metaRange.end >= charIndex && metaRange.end <= nextCharIndex) {\n                      range.setEnd(node, metaRange.end - charIndex);\n                      stop = true;\n                  }\n                  charIndex = nextCharIndex;\n              } else {\n                  let cn = node.childNodes;\n                  let i = cn.length;\n\n                  while (i > 0) {\n                      i -= 1;\n                      nodeStack.push(cn[i]);\n                  }\n              }\n          }\n      }\n\n      documentSelection.removeAllRanges();\n      documentSelection.addRange(range || savedRange);\n    };\n\n    const cleanHtml = (input) => {\n      const html = input.match(/<!--StartFragment-->(.*?)<!--EndFragment-->/);\n      let output = html && html[1] || input;\n      output = output\n        .replace(/\\r?\\n|\\r/g, ' ')\n        .replace(/<!--(.*?)-->/g, '')\n        .replace(new RegExp('<(/)*(meta|link|span|\\\\?xml:|st1:|o:|font|w:sdt)(.*?)>', 'gi'), '')\n        .replace(/<!\\[if !supportLists\\]>(.*?)<!\\[endif\\]>/gi, '')\n        .replace(/style=\"[^\"]*\"/gi, '')\n        .replace(/style='[^']*'/gi, '')\n        .replace(/&nbsp;/gi, ' ')\n        .replace(/>(\\s+)</g, '><')\n        .replace(/class=\"[^\"]*\"/gi, '')\n        .replace(/class='[^']*'/gi, '')\n        .replace(/<[^/].*?>/g, i => i.split(/[ >]/g)[0] + '>')\n        .trim();\n\n        output = removeBadTags(output);\n        return output;\n    };\n\n    const unwrap = (wrapper) => {\n    \tconst docFrag = document.createDocumentFragment();\n    \twhile (wrapper.firstChild) {\n    \t\tconst child = wrapper.removeChild(wrapper.firstChild);\n    \t\tdocFrag.appendChild(child);\n    \t}\n\n    \t// replace wrapper with document fragment\n    \twrapper.parentNode.replaceChild(docFrag, wrapper);\n    };\n\n    const removeBlockTagsRecursive = (elements, tagsToRemove) => {\n      Array.from(elements).forEach((item) => {\n        if (tagsToRemove.some((tag) => tag === item.tagName.toLowerCase())) {\n          if (item.children.length) {\n            removeBlockTagsRecursive(item.children, tagsToRemove);\n          }\n          unwrap(item);\n        }\n      });\n    };\n\n    const getActionBtns = (actions) => {\n      return Object.keys(actions).map((action) => actions[action]);\n    };\n\n    const getNewActionObj = (actions, userActions = []) => {\n        if (userActions && userActions.length) {\n            const newActions = {};\n            userActions.forEach((action) => {\n                if (typeof action === 'string') {\n                    newActions[action] = Object.assign({}, actions[action]);\n                } else if (actions[action.name]) {\n                    newActions[action.name] = Object.assign(actions[action.name], action);\n                } else {\n                    newActions[action.name] = Object.assign({}, action);\n                }\n            });\n\n            return newActions;\n        } else {\n            return actions;\n        }\n    };\n\n    const removeBadTags = (html) => {\n        ['style', 'script', 'applet', 'embed', 'noframes', 'noscript'].forEach((badTag) => {\n            html = html.replace(new RegExp(`<${badTag}.*?${badTag}(.*?)>`, 'gi'), '');\n        });\n\n        return html;\n    };\n\n    const isEditorClick = (target, editorWrapper) => {\n        if (target === editorWrapper) {\n            return true;\n        }\n        if (target.parentElement) {\n            return isEditorClick(target.parentElement, editorWrapper);\n        }\n        return false;\n    };\n\n    const subscriber_queue = [];\n    /**\n     * Create a `Writable` store that allows both updating and reading by subscription.\n     * @param {*=}value initial value\n     * @param {StartStopNotifier=}start start and stop notifications for subscriptions\n     */\n\n\n    function writable(value, start = noop) {\n      let stop;\n      const subscribers = [];\n\n      function set(new_value) {\n        if (safe_not_equal(value, new_value)) {\n          value = new_value;\n\n          if (stop) {\n            // store is ready\n            const run_queue = !subscriber_queue.length;\n\n            for (let i = 0; i < subscribers.length; i += 1) {\n              const s = subscribers[i];\n              s[1]();\n              subscriber_queue.push(s, value);\n            }\n\n            if (run_queue) {\n              for (let i = 0; i < subscriber_queue.length; i += 2) {\n                subscriber_queue[i][0](subscriber_queue[i + 1]);\n              }\n\n              subscriber_queue.length = 0;\n            }\n          }\n        }\n      }\n\n      function update(fn) {\n        set(fn(value));\n      }\n\n      function subscribe(run, invalidate = noop) {\n        const subscriber = [run, invalidate];\n        subscribers.push(subscriber);\n\n        if (subscribers.length === 1) {\n          stop = start(set) || noop;\n        }\n\n        run(value);\n        return () => {\n          const index = subscribers.indexOf(subscriber);\n\n          if (index !== -1) {\n            subscribers.splice(index, 1);\n          }\n\n          if (subscribers.length === 0) {\n            stop();\n            stop = null;\n          }\n        };\n      }\n\n      return {\n        set,\n        update,\n        subscribe\n      };\n    }\n\n    const linkSvg =\n    \t'<svg viewBox=\"0 0 72 72\" width=\"17px\" height=\"100%\"><path d=\"M31.1 48.9l-6.7 6.7c-.8.8-1.6.9-2.1.9s-1.4-.1-2.1-.9L15 50.4c-1.1-1.1-1.1-3.1 0-4.2l6.1-6.1.2-.2 6.5-6.5c-1.2-.6-2.5-.9-3.8-.9-2.3 0-4.6.9-6.3 2.6L11 41.8c-3.5 3.5-3.5 9.2 0 12.7l5.2 5.2c1.7 1.7 4 2.6 6.3 2.6s4.6-.9 6.3-2.6l6.7-6.7c2.5-2.6 3.1-6.7 1.5-10l-5.9 5.9zM38.7 22.5l6.7-6.7c.8-.8 1.6-.9 2.1-.9s1.4.1 2.1.9l5.2 5.2c1.1 1.1 1.1 3.1 0 4.2l-6.1 6.1-.2.2L42 38c1.2.6 2.5.9 3.8.9 2.3 0 4.6-.9 6.3-2.6l6.7-6.7c3.5-3.5 3.5-9.2 0-12.7l-5.2-5.2c-1.7-1.7-4-2.6-6.3-2.6s-4.6.9-6.3 2.6l-6.7 6.7c-2.7 2.7-3.3 6.9-1.7 10.2l6.1-6.1c0 .1 0 .1 0 0z\"></path><path d=\"M44.2 30.5c.2-.2.4-.6.4-.9 0-.3-.1-.6-.4-.9l-2.3-2.3c-.3-.2-.6-.4-.9-.4-.3 0-.6.1-.9.4L25.9 40.6c-.2.2-.4.6-.4.9 0 .3.1.6.4.9l2.3 2.3c.2.2.6.4.9.4.3 0 .6-.1.9-.4l14.2-14.2zM49.9 55.4h-8.5v-5h8.5v-8.9h5.2v8.9h8.5v5h-8.5v8.9h-5.2v-8.9z\"></path></svg>';\n    const unlinkSvg =\n    \t'<svg viewBox=\"0 0 72 72\" width=\"17px\" height=\"100%\"><path d=\"M30.9 49.1l-6.7 6.7c-.8.8-1.6.9-2.1.9s-1.4-.1-2.1-.9l-5.2-5.2c-1.1-1.1-1.1-3.1 0-4.2l6.1-6.1.2-.2 6.5-6.5c-1.2-.6-2.5-.9-3.8-.9-2.3 0-4.6.9-6.3 2.6L10.8 42c-3.5 3.5-3.5 9.2 0 12.7l5.2 5.2c1.7 1.7 4 2.6 6.3 2.6s4.6-.9 6.3-2.6l6.7-6.7C38 50.5 38.6 46.3 37 43l-6.1 6.1zM38.5 22.7l6.7-6.7c.8-.8 1.6-.9 2.1-.9s1.4.1 2.1.9l5.2 5.2c1.1 1.1 1.1 3.1 0 4.2l-6.1 6.1-.2.2-6.5 6.5c1.2.6 2.5.9 3.8.9 2.3 0 4.6-.9 6.3-2.6l6.7-6.7c3.5-3.5 3.5-9.2 0-12.7l-5.2-5.2c-1.7-1.7-4-2.6-6.3-2.6s-4.6.9-6.3 2.6l-6.7 6.7c-2.7 2.7-3.3 6.9-1.7 10.2l6.1-6.1z\"></path><path d=\"M44.1 30.7c.2-.2.4-.6.4-.9 0-.3-.1-.6-.4-.9l-2.3-2.3c-.2-.2-.6-.4-.9-.4-.3 0-.6.1-.9.4L25.8 40.8c-.2.2-.4.6-.4.9 0 .3.1.6.4.9l2.3 2.3c.2.2.6.4.9.4.3 0 .6-.1.9-.4l14.2-14.2zM41.3 55.8v-5h22.2v5H41.3z\"></path></svg>';\n\n    var defaultActions = {\n    \tviewHtml: {\n    \t\ticon:\n    \t\t\t'<svg viewBox=\"0 0 72 72\" width=\"17px\" height=\"100%\"><path fill=\"none\" stroke=\"currentColor\" stroke-width=\"8\" stroke-miterlimit=\"10\" d=\"M26.9 17.9L9 36.2 26.9 54M45 54l17.9-18.3L45 17.9\"></path></svg>',\n    \t\ttitle: \"View HTML\",\n    \t\tresult: function() {\n    \t\t\tlet refs = get_store_value(this.references);\n    \t\t\tlet actionObj = get_store_value(this.state).actionObj;\n    \t\t\tlet helper = get_store_value(this.helper);\n\n    \t\t\thelper.showEditor = !helper.showEditor;\n    \t\t\trefs.editor.style.display = helper.showEditor ? \"block\" : \"none\";\n    \t\t\trefs.raw.style.display = helper.showEditor ? \"none\" : \"block\";\n    \t\t\tif (helper.showEditor) {\n    \t\t\t\trefs.editor.innerHTML = refs.raw.value;\n    \t\t\t} else {\n    \t\t\t\trefs.raw.value = refs.editor.innerHTML;\n    \t\t\t}\n    \t\t\tsetTimeout(() => {\n    \t\t\t\tObject.keys(actionObj).forEach(\n    \t\t\t\t\taction => (actionObj[action].disabled = !helper.showEditor)\n    \t\t\t\t);\n    \t\t\t\tactionObj.viewHtml.disabled = false;\n    \t\t\t\tactionObj.viewHtml.active = !helper.showEditor;\n\n    \t\t\t\tthis.state.update(state => {\n    \t\t\t\t\tstate.actionBtns = getActionBtns(actionObj);\n    \t\t\t\t\tstate.actionObj = actionObj;\n    \t\t\t\t\treturn state;\n    \t\t\t\t});\n    \t\t\t});\n    \t\t}\n    \t},\n    \tundo: {\n    \t\ticon:\n    \t\t\t'<svg viewBox=\"0 0 72 72\" width=\"17px\" height=\"100%\"><path d=\"M61.2 51.2c0-5.1-2.1-9.7-5.4-13.1-3.3-3.3-8-5.4-13.1-5.4H26.1v-12L10.8 36l15.3 15.3V39.1h16.7c3.3 0 6.4 1.3 8.5 3.5 2.2 2.2 3.5 5.2 3.5 8.5h6.4z\"></path></svg>',\n    \t\ttitle: \"Undo\",\n    \t\tresult: () => exec(\"undo\")\n    \t},\n    \tredo: {\n    \t\ticon:\n    \t\t\t'<svg viewBox=\"0 0 72 72\" width=\"17px\" height=\"100%\"><path d=\"M10.8 51.2c0-5.1 2.1-9.7 5.4-13.1 3.3-3.3 8-5.4 13.1-5.4H46v-12L61.3 36 45.9 51.3V39.1H29.3c-3.3 0-6.4 1.3-8.5 3.5-2.2 2.2-3.5 5.2-3.5 8.5h-6.5z\"></path></svg>',\n    \t\ttitle: \"Redo\",\n    \t\tresult: () => exec(\"redo\")\n    \t},\n    \tb: {\n    \t\ticon: \"<b>B</b>\",\n    \t\ttitle: \"Bold\",\n    \t\tresult: () => exec(\"bold\")\n    \t},\n    \ti: {\n    \t\ticon: \"<i>I</i>\",\n    \t\ttitle: \"Italic\",\n    \t\tresult: () => exec(\"italic\")\n    \t},\n    \tu: {\n    \t\ticon: \"<u>U</u>\",\n    \t\ttitle: \"Underline\",\n    \t\tresult: () => exec(\"underline\")\n    \t},\n    \tstrike: {\n    \t\ticon: \"<strike>S</strike>\",\n    \t\ttitle: \"Strike-through\",\n    \t\tresult: () => exec(\"strikeThrough\")\n    \t},\n    \tsup: {\n    \t\ticon: \"A<sup>2</sup>\",\n    \t\ttitle: \"Superscript\",\n    \t\tresult: () => exec(\"superscript\")\n    \t},\n    \tsub: {\n    \t\ticon: \"A<sub>2</sub>\",\n    \t\ttitle: \"Subscript\",\n    \t\tresult: () => exec(\"subscript\")\n    \t},\n    \th1: {\n    \t\ticon: \"<b>H<sub>1</sub></b>\",\n    \t\ttitle: \"Heading 1\",\n    \t\tresult: () => exec(\"formatBlock\", \"<H1>\")\n    \t},\n    \th2: {\n    \t\ticon: \"<b>H<sub>2</sub></b>\",\n    \t\ttitle: \"Heading 2\",\n    \t\tresult: () => exec(\"formatBlock\", \"<H2>\")\n    \t},\n    \tp: {\n    \t\ticon: \"&#182;\",\n    \t\ttitle: \"Paragraph\",\n    \t\tresult: () => exec(\"formatBlock\", \"<P>\")\n    \t},\n    \tblockquote: {\n    \t\ticon: \"&#8220; &#8221;\",\n    \t\ttitle: \"Quote\",\n    \t\tresult: () => exec(\"formatBlock\", \"<BLOCKQUOTE>\")\n    \t},\n    \tol: {\n    \t\ticon:\n    \t\t\t'<svg viewBox=\"0 0 72 72\" width=\"17px\" height=\"100%\"><path d=\"M27 14h36v8H27zM27 50h36v8H27zM27 32h36v8H27zM11.8 15.8V22h1.8v-7.8h-1.5l-2.1 1 .3 1.3zM12.1 38.5l.7-.6c1.1-1 2.1-2.1 2.1-3.4 0-1.4-1-2.4-2.7-2.4-1.1 0-2 .4-2.6.8l.5 1.3c.4-.3 1-.6 1.7-.6.9 0 1.3.5 1.3 1.1 0 .9-.9 1.8-2.6 3.3l-1 .9V40H15v-1.5h-2.9zM13.3 53.9c1-.4 1.4-1 1.4-1.8 0-1.1-.9-1.9-2.6-1.9-1 0-1.9.3-2.4.6l.4 1.3c.3-.2 1-.5 1.6-.5.8 0 1.2.3 1.2.8 0 .7-.8.9-1.4.9h-.7v1.3h.7c.8 0 1.6.3 1.6 1.1 0 .6-.5 1-1.4 1-.7 0-1.5-.3-1.8-.5l-.4 1.4c.5.3 1.3.6 2.3.6 2 0 3.2-1 3.2-2.4 0-1.1-.8-1.8-1.7-1.9z\"></path></svg>',\n    \t\ttitle: \"Ordered List\",\n    \t\tresult: () => exec(\"insertOrderedList\")\n    \t},\n    \tul: {\n    \t\ticon:\n    \t\t\t'<svg viewBox=\"0 0 72 72\" width=\"17px\" height=\"100%\"><path d=\"M27 14h36v8H27zM27 50h36v8H27zM9 50h9v8H9zM9 32h9v8H9zM9 14h9v8H9zM27 32h36v8H27z\"></path></svg>',\n    \t\ttitle: \"Unordered List\",\n    \t\tresult: () => exec(\"insertUnorderedList\")\n    \t},\n    \thr: {\n    \t\ticon: \"&#8213;\",\n    \t\ttitle: \"Horizontal Line\",\n    \t\tresult: () => exec(\"insertHorizontalRule\")\n    \t},\n    \tleft: {\n    \t\ticon:\n    \t\t\t'<svg viewBox=\"0 0 72 72\" width=\"17px\" height=\"100%\"><path d=\"M9 14h54v8H9zM9 50h54v8H9zM9 32h36v8H9z\"></path></svg>',\n    \t\ttitle: \"Justify left\",\n    \t\tresult: () => exec(\"justifyLeft\")\n    \t},\n    \tright: {\n    \t\ticon:\n    \t\t\t'<svg viewBox=\"0 0 72 72\" width=\"17px\" height=\"100%\"><path d=\"M9 14h54v8H9zM9 50h54v8H9zM27 32h36v8H27z\"></path></svg>',\n    \t\ttitle: \"Justify right\",\n    \t\tresult: () => exec(\"justifyRight\")\n    \t},\n    \tcenter: {\n    \t\ticon:\n    \t\t\t'<svg viewBox=\"0 0 72 72\" width=\"17px\" height=\"100%\"><path d=\"M9 14h54v8H9zM9 50h54v8H9zM18 32h36v8H18z\"></path></svg>',\n    \t\ttitle: \"Justify center\",\n    \t\tresult: () => exec(\"justifyCenter\")\n    \t},\n    \tjustify: {\n    \t\ticon:\n    \t\t\t'<svg viewBox=\"0 0 72 72\" width=\"17px\" height=\"100%\"><path d=\"M9 14h54v8H9zM9 50h54v8H9zM9 32h54v8H9z\"></path></svg>',\n    \t\ttitle: \"Justify full\",\n    \t\tresult: () => exec(\"justifyFull\")\n    \t},\n    \ta: {\n    \t\ticon: linkSvg,\n    \t\ttitle: \"Insert link\",\n    \t\tresult: function() {\n    \t\t\tconst actionObj = get_store_value(this.state).actionObj;\n    \t\t\tconst refs = get_store_value(this.references);\n\n    \t\t\tif (actionObj.a.active) {\n    \t\t\t\tconst selection = window.getSelection();\n    \t\t\t\tconst range = document.createRange();\n    \t\t\t\trange.selectNodeContents(document.getSelection().focusNode);\n    \t\t\t\tselection.removeAllRanges();\n    \t\t\t\tselection.addRange(range);\n    \t\t\t\texec(\"unlink\");\n    \t\t\t\tactionObj.a.title = \"Insert link\";\n    \t\t\t\tactionObj.a.icon = linkSvg;\n    \t\t\t\tthis.state.update(state => {\n    \t\t\t\t\tstate.actionBtn = getActionBtns(actionObj);\n    \t\t\t\t\tstate.actionObj = actionObj;\n    \t\t\t\t\treturn state;\n    \t\t\t\t});\n    \t\t\t} else {\n    \t\t\t\tsaveRange(refs.editor);\n    \t\t\t\trefs.modal.$set({\n    \t\t\t\t\tshow: true,\n    \t\t\t\t\tevent: \"linkUrl\",\n    \t\t\t\t\ttitle: \"Insert link\",\n    \t\t\t\t\tlabel: \"Url\"\n    \t\t\t\t});\n    \t\t\t\tif (!get_store_value(this.helper).link) {\n    \t\t\t\t\tthis.helper.update(state => {\n    \t\t\t\t\t\tstate.link = true;\n    \t\t\t\t\t\treturn state;\n    \t\t\t\t\t});\n    \t\t\t\t\trefs.modal.$on(\"linkUrl\", event => {\n    \t\t\t\t\t\trestoreRange(refs.editor);\n    \t\t\t\t\t\texec(\"createLink\", event.detail);\n    \t\t\t\t\t\tactionObj.a.title = \"Unlink\";\n    \t\t\t\t\t\tactionObj.a.icon = unlinkSvg;\n\n    \t\t\t\t\t\tthis.state.update(state => {\n    \t\t\t\t\t\t\tstate.actionBtn = getActionBtns(actionObj);\n    \t\t\t\t\t\t\tstate.actionObj = actionObj;\n    \t\t\t\t\t\t\treturn state;\n    \t\t\t\t\t\t});\n    \t\t\t\t\t});\n    \t\t\t\t}\n    \t\t\t}\n    \t\t}\n    \t},\n    \timage: {\n    \t\ticon:\n    \t\t\t'<svg viewBox=\"0 0 72 72\" width=\"17px\" height=\"100%\"><path d=\"M64 17v38H8V17h56m8-8H0v54h72V9z\"></path><path d=\"M17.5 22C15 22 13 24 13 26.5s2 4.5 4.5 4.5 4.5-2 4.5-4.5-2-4.5-4.5-4.5zM16 50h27L29.5 32zM36 36.2l8.9-8.5L60.2 50H45.9S35.6 35.9 36 36.2z\"></path></svg>',\n    \t\ttitle: \"Image\",\n    \t\tresult: function() {\n    \t\t\tconst actionObj = get_store_value(this.state).actionObj;\n    \t\t\tconst refs = get_store_value(this.references);\n    \t\t\tsaveRange(refs.editor);\n    \t\t\trefs.modal.$set({\n    \t\t\t\tshow: true,\n    \t\t\t\tevent: \"imageUrl\",\n    \t\t\t\ttitle: \"Insert image\",\n    \t\t\t\tlabel: \"Url\"\n    \t\t\t});\n    \t\t\tif (!get_store_value(this.helper).image) {\n    \t\t\t\tthis.helper.update(state => {\n    \t\t\t\t\tstate.image = true;\n    \t\t\t\t\treturn state;\n    \t\t\t\t});\n    \t\t\t\trefs.modal.$on(\"imageUrl\", event => {\n    \t\t\t\t\trestoreRange(refs.editor);\n    \t\t\t\t\texec(\"insertImage\", event.detail);\n    \t\t\t\t});\n    \t\t\t}\n    \t\t}\n    \t},\n    \tforecolor: {\n    \t\ticon:\n    \t\t\t'<svg viewBox=\"0 0 72 72\" width=\"17px\" height=\"100%\"><path d=\"M32 15h7.8L56 57.1h-7.9l-4-11.1H27.4l-4 11.1h-7.6L32 15zm-2.5 25.4h12.9L36 22.3h-.2l-6.3 18.1z\"></path></svg>',\n    \t\ttitle: \"Text color\",\n    \t\tcolorPicker: true,\n    \t\tresult: function() {\n    \t\t\tshowColorPicker.call(this, \"foreColor\");\n    \t\t}\n    \t},\n    \tbackcolor: {\n    \t\ticon:\n    \t\t\t'<svg viewBox=\"0 0 72 72\" width=\"17px\" height=\"100%\"><path d=\"M36.5 22.3l-6.3 18.1H43l-6.3-18.1z\"></path><path d=\"M9 8.9v54.2h54.1V8.9H9zm39.9 48.2L45 46H28.2l-3.9 11.1h-7.6L32.8 15h7.8l16.2 42.1h-7.9z\"></path></svg>',\n    \t\ttitle: \"Background color\",\n    \t\tcolorPicker: true,\n    \t\tresult: function() {\n    \t\t\tshowColorPicker.call(this, \"backColor\");\n    \t\t}\n    \t},\n    \tremoveFormat: {\n    \t\ticon:\n    \t\t\t'<svg viewBox=\"0 0 72 72\" width=\"17px\" height=\"100%\"><path d=\"M58.2 54.6L52 48.5l3.6-3.6 6.1 6.1 6.4-6.4 3.8 3.8-6.4 6.4 6.1 6.1-3.6 3.6-6.1-6.1-6.4 6.4-3.7-3.8 6.4-6.4zM21.7 52.1H50V57H21.7zM18.8 15.2h34.1v6.4H39.5v24.2h-7.4V21.5H18.8v-6.3z\"></path></svg>',\n    \t\ttitle: \"Remove format\",\n    \t\tresult: function() {\n    \t\t\tconst refs = get_store_value(this.references);\n    \t\t\tconst selection = window.getSelection();\n    \t\t\tif (!selection.toString().length) {\n    \t\t\t\tremoveBlockTagsRecursive(\n    \t\t\t\t\trefs.editor.children,\n    \t\t\t\t\tthis.removeFormatTags\n    \t\t\t\t);\n    \t\t\t\tconst range = document.createRange();\n    \t\t\t\trange.selectNodeContents(refs.editor);\n    \t\t\t\tselection.removeAllRanges();\n    \t\t\t\tselection.addRange(range);\n    \t\t\t}\n    \t\t\texec(\"removeFormat\");\n    \t\t\tselection.removeAllRanges();\n    \t\t}\n    \t}\n    };\n\n    const showColorPicker = function(cmd) {\n    \tconst refs = get_store_value(this.references);\n    \tsaveRange(refs.editor);\n    \tconsole.log(refs.colorPicker);\n    \trefs.colorPicker.$set({show: true, event: cmd});\n    \tif (!get_store_value(this.helper)[cmd]) {\n    \t\tthis.helper.update(state => {\n    \t\t\tstate[cmd] = true;\n    \t\t\treturn state;\n    \t\t});\n    \t\trefs.colorPicker.$on(cmd, event => {\n    \t\t\tlet item = event.detail;\n    \t\t\tif (item.modal) {\n    \t\t\t\tthis.modal.$set({\n    \t\t\t\t\tshow: true,\n    \t\t\t\t\tevent: \"colorHref\",\n    \t\t\t\t\ttitle: \"Text color\",\n    \t\t\t\t\tlabel:\n    \t\t\t\t\t\tcmd === \"foreColor\" ? \"Text color\" : \"Background color\"\n    \t\t\t\t});\n    \t\t\t\tconst command = cmd;\n    \t\t\t\tif (!get_store_value(this.helper)[`${command}Modal`]) {\n    \t\t\t\t\tget_store_value(this.helper)[`${command}Modal`] = true;\n    \t\t\t\t\tthis.modal.$on(\"colorHref\", event => {\n    \t\t\t\t\t\tlet color = event.detail;\n    \t\t\t\t\t\trestoreRange(refs.editor);\n    \t\t\t\t\t\texec(command, color);\n    \t\t\t\t\t});\n    \t\t\t\t}\n    \t\t\t} else {\n    \t\t\t\trestoreRange(refs.editor);\n    \t\t\t\texec(cmd, item.color);\n    \t\t\t}\n    \t\t});\n    \t}\n    };\n\n    /* src/helpers/EditorModal.svelte generated by Svelte v3.18.2 */\n\n    function add_css() {\n    \tvar style = element(\"style\");\n    \tstyle.id = \"svelte-1d1bzev-style\";\n    \tstyle.textContent = \".cl-editor-modal.svelte-1d1bzev.svelte-1d1bzev{position:absolute;top:37px;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);max-width:520px;width:100%;height:140px;backface-visibility:hidden;z-index:11}.cl-editor-overlay.svelte-1d1bzev.svelte-1d1bzev{position:absolute;background-color:rgba(255,255,255,.5);height:100%;width:100%;left:0;top:0;z-index:10}.modal-box.svelte-1d1bzev.svelte-1d1bzev{position:absolute;top:0;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);max-width:500px;width:calc(100% - 20px);padding-bottom:36px;z-index:1;background-color:#FFF;text-align:center;font-size:14px;box-shadow:rgba(0,0,0,.2) 0 2px 3px;-webkit-backface-visibility:hidden;backface-visibility:hidden}.modal-title.svelte-1d1bzev.svelte-1d1bzev{font-size:24px;font-weight:700;margin:0 0 20px;padding:2px 0 4px;display:block;border-bottom:1px solid #EEE;color:#333;background:#fbfcfc}.modal-label.svelte-1d1bzev.svelte-1d1bzev{display:block;position:relative;margin:15px 12px;height:29px;line-height:29px;overflow:hidden}.modal-label.svelte-1d1bzev input.svelte-1d1bzev{position:absolute;top:0;right:0;height:27px;line-height:25px;border:1px solid #DEDEDE;background:#fff;font-size:14px;max-width:330px;width:70%;padding:0 7px;transition:all 150ms}.modal-label.svelte-1d1bzev input.svelte-1d1bzev:focus{outline:none}.input-error.svelte-1d1bzev input.svelte-1d1bzev{border:1px solid #e74c3c}.input-info.svelte-1d1bzev.svelte-1d1bzev{display:block;text-align:left;height:25px;line-height:25px;transition:all 150ms}.input-info.svelte-1d1bzev span.svelte-1d1bzev{display:block;color:#69878f;background-color:#fbfcfc;border:1px solid #DEDEDE;padding:0 7px;width:150px}.input-error.svelte-1d1bzev .input-info.svelte-1d1bzev{margin-top:-27px}.input-error.svelte-1d1bzev .msg-error.svelte-1d1bzev{color:#e74c3c}.modal-button.svelte-1d1bzev.svelte-1d1bzev{position:absolute;bottom:10px;right:0;text-decoration:none;color:#FFF;display:block;width:100px;height:35px;line-height:33px;margin:0 10px;background-color:#333;border:none;cursor:pointer;font-family:\\\"Lato\\\",Helvetica,Verdana,sans-serif;font-size:16px;transition:all 150ms}.modal-submit.svelte-1d1bzev.svelte-1d1bzev{right:110px;background:#2bc06a}.modal-reset.svelte-1d1bzev.svelte-1d1bzev{color:#555;background:#e6e6e6}\";\n    \tappend(document.head, style);\n    }\n\n    // (12:24) {#if error}\n    function create_if_block(ctx) {\n    \tlet span;\n\n    \treturn {\n    \t\tc() {\n    \t\t\tspan = element(\"span\");\n    \t\t\tspan.textContent = \"Required\";\n    \t\t\tattr(span, \"class\", \"msg-error svelte-1d1bzev\");\n    \t\t},\n    \t\tm(target, anchor) {\n    \t\t\tinsert(target, span, anchor);\n    \t\t},\n    \t\td(detaching) {\n    \t\t\tif (detaching) detach(span);\n    \t\t}\n    \t};\n    }\n\n    function create_fragment(ctx) {\n    \tlet div3;\n    \tlet div0;\n    \tlet t0;\n    \tlet div2;\n    \tlet div1;\n    \tlet span0;\n    \tlet t1;\n    \tlet t2;\n    \tlet form;\n    \tlet label_1;\n    \tlet input;\n    \tlet t3;\n    \tlet span2;\n    \tlet span1;\n    \tlet t4;\n    \tlet t5;\n    \tlet t6;\n    \tlet button0;\n    \tlet t8;\n    \tlet button1;\n    \tlet dispose;\n    \tlet if_block = /*error*/ ctx[2] && create_if_block();\n\n    \treturn {\n    \t\tc() {\n    \t\t\tdiv3 = element(\"div\");\n    \t\t\tdiv0 = element(\"div\");\n    \t\t\tt0 = space();\n    \t\t\tdiv2 = element(\"div\");\n    \t\t\tdiv1 = element(\"div\");\n    \t\t\tspan0 = element(\"span\");\n    \t\t\tt1 = text(/*title*/ ctx[3]);\n    \t\t\tt2 = space();\n    \t\t\tform = element(\"form\");\n    \t\t\tlabel_1 = element(\"label\");\n    \t\t\tinput = element(\"input\");\n    \t\t\tt3 = space();\n    \t\t\tspan2 = element(\"span\");\n    \t\t\tspan1 = element(\"span\");\n    \t\t\tt4 = text(/*label*/ ctx[4]);\n    \t\t\tt5 = space();\n    \t\t\tif (if_block) if_block.c();\n    \t\t\tt6 = space();\n    \t\t\tbutton0 = element(\"button\");\n    \t\t\tbutton0.textContent = \"Confirm\";\n    \t\t\tt8 = space();\n    \t\t\tbutton1 = element(\"button\");\n    \t\t\tbutton1.textContent = \"Cancel\";\n    \t\t\tattr(div0, \"class\", \"cl-editor-overlay svelte-1d1bzev\");\n    \t\t\tattr(span0, \"class\", \"modal-title svelte-1d1bzev\");\n    \t\t\tattr(input, \"type\", \"text\");\n    \t\t\tattr(input, \"name\", \"text\");\n    \t\t\tattr(input, \"class\", \"svelte-1d1bzev\");\n    \t\t\tattr(span1, \"class\", \"svelte-1d1bzev\");\n    \t\t\tattr(span2, \"class\", \"input-info svelte-1d1bzev\");\n    \t\t\tattr(label_1, \"class\", \"modal-label svelte-1d1bzev\");\n    \t\t\ttoggle_class(label_1, \"input-error\", /*error*/ ctx[2]);\n    \t\t\tattr(button0, \"class\", \"modal-button modal-submit svelte-1d1bzev\");\n    \t\t\tattr(button0, \"type\", \"submit\");\n    \t\t\tattr(button1, \"class\", \"modal-button modal-reset svelte-1d1bzev\");\n    \t\t\tattr(button1, \"type\", \"reset\");\n    \t\t\tattr(div1, \"class\", \"modal-box svelte-1d1bzev\");\n    \t\t\tattr(div2, \"class\", \"cl-editor-modal svelte-1d1bzev\");\n    \t\t\tset_style(div3, \"display\", /*show*/ ctx[0] ? \"block\" : \"none\");\n    \t\t},\n    \t\tm(target, anchor) {\n    \t\t\tinsert(target, div3, anchor);\n    \t\t\tappend(div3, div0);\n    \t\t\tappend(div3, t0);\n    \t\t\tappend(div3, div2);\n    \t\t\tappend(div2, div1);\n    \t\t\tappend(div1, span0);\n    \t\t\tappend(span0, t1);\n    \t\t\tappend(div1, t2);\n    \t\t\tappend(div1, form);\n    \t\t\tappend(form, label_1);\n    \t\t\tappend(label_1, input);\n    \t\t\t/*input_binding*/ ctx[11](input);\n    \t\t\tset_input_value(input, /*text*/ ctx[1]);\n    \t\t\tappend(label_1, t3);\n    \t\t\tappend(label_1, span2);\n    \t\t\tappend(span2, span1);\n    \t\t\tappend(span1, t4);\n    \t\t\tappend(span2, t5);\n    \t\t\tif (if_block) if_block.m(span2, null);\n    \t\t\tappend(form, t6);\n    \t\t\tappend(form, button0);\n    \t\t\tappend(form, t8);\n    \t\t\tappend(form, button1);\n\n    \t\t\tdispose = [\n    \t\t\t\tlisten(div0, \"click\", /*cancel*/ ctx[7]),\n    \t\t\t\tlisten(input, \"keyup\", /*hideError*/ ctx[8]),\n    \t\t\t\tlisten(input, \"input\", /*input_input_handler*/ ctx[12]),\n    \t\t\t\tlisten(button1, \"click\", /*cancel*/ ctx[7]),\n    \t\t\t\tlisten(form, \"submit\", prevent_default(/*submit_handler*/ ctx[13]))\n    \t\t\t];\n    \t\t},\n    \t\tp(ctx, [dirty]) {\n    \t\t\tif (dirty & /*title*/ 8) set_data(t1, /*title*/ ctx[3]);\n\n    \t\t\tif (dirty & /*text*/ 2 && input.value !== /*text*/ ctx[1]) {\n    \t\t\t\tset_input_value(input, /*text*/ ctx[1]);\n    \t\t\t}\n\n    \t\t\tif (dirty & /*label*/ 16) set_data(t4, /*label*/ ctx[4]);\n\n    \t\t\tif (/*error*/ ctx[2]) {\n    \t\t\t\tif (!if_block) {\n    \t\t\t\t\tif_block = create_if_block();\n    \t\t\t\t\tif_block.c();\n    \t\t\t\t\tif_block.m(span2, null);\n    \t\t\t\t}\n    \t\t\t} else if (if_block) {\n    \t\t\t\tif_block.d(1);\n    \t\t\t\tif_block = null;\n    \t\t\t}\n\n    \t\t\tif (dirty & /*error*/ 4) {\n    \t\t\t\ttoggle_class(label_1, \"input-error\", /*error*/ ctx[2]);\n    \t\t\t}\n\n    \t\t\tif (dirty & /*show*/ 1) {\n    \t\t\t\tset_style(div3, \"display\", /*show*/ ctx[0] ? \"block\" : \"none\");\n    \t\t\t}\n    \t\t},\n    \t\ti: noop,\n    \t\to: noop,\n    \t\td(detaching) {\n    \t\t\tif (detaching) detach(div3);\n    \t\t\t/*input_binding*/ ctx[11](null);\n    \t\t\tif (if_block) if_block.d();\n    \t\t\trun_all(dispose);\n    \t\t}\n    \t};\n    }\n\n    function instance($$self, $$props, $$invalidate) {\n    \tlet dispatcher = new createEventDispatcher();\n    \tlet { show = false } = $$props;\n    \tlet { text = \"\" } = $$props;\n    \tlet { event = \"\" } = $$props;\n    \tlet { title = \"\" } = $$props;\n    \tlet { label = \"\" } = $$props;\n    \tlet { error = false } = $$props;\n    \tlet refs = {};\n\n    \tfunction confirm() {\n    \t\tif (text) {\n    \t\t\tconsole.log(\"dispatcher\", text, event);\n    \t\t\tdispatcher(event, text);\n    \t\t\tcancel();\n    \t\t} else {\n    \t\t\t$$invalidate(2, error = true);\n    \t\t\trefs.text.focus();\n    \t\t}\n    \t}\n\n    \tfunction cancel() {\n    \t\t$$invalidate(0, show = false);\n    \t\t$$invalidate(1, text = \"\");\n    \t\t$$invalidate(2, error = false);\n    \t}\n\n    \tfunction hideError() {\n    \t\t$$invalidate(2, error = false);\n    \t}\n\n    \tfunction input_binding($$value) {\n    \t\tbinding_callbacks[$$value ? \"unshift\" : \"push\"](() => {\n    \t\t\trefs.text = $$value;\n    \t\t\t$$invalidate(5, refs);\n    \t\t});\n    \t}\n\n    \tfunction input_input_handler() {\n    \t\ttext = this.value;\n    \t\t$$invalidate(1, text);\n    \t}\n\n    \tconst submit_handler = event => confirm();\n\n    \t$$self.$set = $$props => {\n    \t\tif (\"show\" in $$props) $$invalidate(0, show = $$props.show);\n    \t\tif (\"text\" in $$props) $$invalidate(1, text = $$props.text);\n    \t\tif (\"event\" in $$props) $$invalidate(9, event = $$props.event);\n    \t\tif (\"title\" in $$props) $$invalidate(3, title = $$props.title);\n    \t\tif (\"label\" in $$props) $$invalidate(4, label = $$props.label);\n    \t\tif (\"error\" in $$props) $$invalidate(2, error = $$props.error);\n    \t};\n\n    \t$$self.$$.update = () => {\n    \t\tif ($$self.$$.dirty & /*show, refs*/ 33) {\n    \t\t\t {\n    \t\t\t\tif (show) {\n    \t\t\t\t\tsetTimeout(() => {\n    \t\t\t\t\t\trefs.text.focus();\n    \t\t\t\t\t});\n    \t\t\t\t}\n    \t\t\t}\n    \t\t}\n    \t};\n\n    \treturn [\n    \t\tshow,\n    \t\ttext,\n    \t\terror,\n    \t\ttitle,\n    \t\tlabel,\n    \t\trefs,\n    \t\tconfirm,\n    \t\tcancel,\n    \t\thideError,\n    \t\tevent,\n    \t\tdispatcher,\n    \t\tinput_binding,\n    \t\tinput_input_handler,\n    \t\tsubmit_handler\n    \t];\n    }\n\n    class EditorModal extends SvelteComponent {\n    \tconstructor(options) {\n    \t\tsuper();\n    \t\tif (!document.getElementById(\"svelte-1d1bzev-style\")) add_css();\n\n    \t\tinit(this, options, instance, create_fragment, safe_not_equal, {\n    \t\t\tshow: 0,\n    \t\t\ttext: 1,\n    \t\t\tevent: 9,\n    \t\t\ttitle: 3,\n    \t\t\tlabel: 4,\n    \t\t\terror: 2\n    \t\t});\n    \t}\n\n    \tget show() {\n    \t\treturn this.$$.ctx[0];\n    \t}\n\n    \tset show(show) {\n    \t\tthis.$set({ show });\n    \t\tflush();\n    \t}\n\n    \tget text() {\n    \t\treturn this.$$.ctx[1];\n    \t}\n\n    \tset text(text) {\n    \t\tthis.$set({ text });\n    \t\tflush();\n    \t}\n\n    \tget event() {\n    \t\treturn this.$$.ctx[9];\n    \t}\n\n    \tset event(event) {\n    \t\tthis.$set({ event });\n    \t\tflush();\n    \t}\n\n    \tget title() {\n    \t\treturn this.$$.ctx[3];\n    \t}\n\n    \tset title(title) {\n    \t\tthis.$set({ title });\n    \t\tflush();\n    \t}\n\n    \tget label() {\n    \t\treturn this.$$.ctx[4];\n    \t}\n\n    \tset label(label) {\n    \t\tthis.$set({ label });\n    \t\tflush();\n    \t}\n\n    \tget error() {\n    \t\treturn this.$$.ctx[2];\n    \t}\n\n    \tset error(error) {\n    \t\tthis.$set({ error });\n    \t\tflush();\n    \t}\n    }\n\n    /* src/helpers/EditorColorPicker.svelte generated by Svelte v3.18.2 */\n\n    function add_css$1() {\n    \tvar style = element(\"style\");\n    \tstyle.id = \"svelte-njq4pk-style\";\n    \tstyle.textContent = \".color-picker-wrapper.svelte-njq4pk{border:1px solid #ecf0f1;border-top:none;background:#FFF;box-shadow:rgba(0,0,0,.1) 0 2px 3px;width:290px;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);padding:0;position:absolute;top:37px;z-index:11}.color-picker-overlay.svelte-njq4pk{position:absolute;background-color:rgba(255,255,255,.5);height:100%;width:100%;left:0;top:0;z-index:10}.color-picker-btn.svelte-njq4pk{display:block;position:relative;float:left;height:20px;width:20px;border:1px solid #333;padding:0;margin:2px;line-height:35px;text-decoration:none;background:#FFF;color:#333!important;cursor:pointer;text-align:left;font-size:15px;transition:all 150ms;line-height:20px;padding:0px 5px}.color-picker-btn.svelte-njq4pk:hover::after{content:\\\" \\\";display:block;position:absolute;top:-5px;left:-5px;height:27px;width:27px;background:inherit;border:1px solid #FFF;box-shadow:#000 0 0 2px;z-index:10}\";\n    \tappend(document.head, style);\n    }\n\n    function get_each_context(ctx, list, i) {\n    \tconst child_ctx = ctx.slice();\n    \tchild_ctx[9] = list[i];\n    \treturn child_ctx;\n    }\n\n    // (4:8) {#each btns as btn}\n    function create_each_block(ctx) {\n    \tlet button;\n    \tlet t_value = (/*btn*/ ctx[9].text || \"\") + \"\";\n    \tlet t;\n    \tlet dispose;\n\n    \tfunction click_handler(...args) {\n    \t\treturn /*click_handler*/ ctx[8](/*btn*/ ctx[9], ...args);\n    \t}\n\n    \treturn {\n    \t\tc() {\n    \t\t\tbutton = element(\"button\");\n    \t\t\tt = text(t_value);\n    \t\t\tattr(button, \"type\", \"button\");\n    \t\t\tattr(button, \"class\", \"color-picker-btn svelte-njq4pk\");\n    \t\t\tset_style(button, \"background-color\", /*btn*/ ctx[9].color);\n    \t\t},\n    \t\tm(target, anchor) {\n    \t\t\tinsert(target, button, anchor);\n    \t\t\tappend(button, t);\n    \t\t\tdispose = listen(button, \"click\", click_handler);\n    \t\t},\n    \t\tp(new_ctx, dirty) {\n    \t\t\tctx = new_ctx;\n    \t\t\tif (dirty & /*btns*/ 2 && t_value !== (t_value = (/*btn*/ ctx[9].text || \"\") + \"\")) set_data(t, t_value);\n\n    \t\t\tif (dirty & /*btns*/ 2) {\n    \t\t\t\tset_style(button, \"background-color\", /*btn*/ ctx[9].color);\n    \t\t\t}\n    \t\t},\n    \t\td(detaching) {\n    \t\t\tif (detaching) detach(button);\n    \t\t\tdispose();\n    \t\t}\n    \t};\n    }\n\n    function create_fragment$1(ctx) {\n    \tlet div2;\n    \tlet div0;\n    \tlet t;\n    \tlet div1;\n    \tlet dispose;\n    \tlet each_value = /*btns*/ ctx[1];\n    \tlet each_blocks = [];\n\n    \tfor (let i = 0; i < each_value.length; i += 1) {\n    \t\teach_blocks[i] = create_each_block(get_each_context(ctx, each_value, i));\n    \t}\n\n    \treturn {\n    \t\tc() {\n    \t\t\tdiv2 = element(\"div\");\n    \t\t\tdiv0 = element(\"div\");\n    \t\t\tt = space();\n    \t\t\tdiv1 = element(\"div\");\n\n    \t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n    \t\t\t\teach_blocks[i].c();\n    \t\t\t}\n\n    \t\t\tattr(div0, \"class\", \"color-picker-overlay svelte-njq4pk\");\n    \t\t\tattr(div1, \"class\", \"color-picker-wrapper svelte-njq4pk\");\n    \t\t\tset_style(div2, \"display\", /*show*/ ctx[0] ? \"block\" : \"none\");\n    \t\t},\n    \t\tm(target, anchor) {\n    \t\t\tinsert(target, div2, anchor);\n    \t\t\tappend(div2, div0);\n    \t\t\tappend(div2, t);\n    \t\t\tappend(div2, div1);\n\n    \t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n    \t\t\t\teach_blocks[i].m(div1, null);\n    \t\t\t}\n\n    \t\t\tdispose = listen(div0, \"click\", /*close*/ ctx[2]);\n    \t\t},\n    \t\tp(ctx, [dirty]) {\n    \t\t\tif (dirty & /*btns, selectColor*/ 10) {\n    \t\t\t\teach_value = /*btns*/ ctx[1];\n    \t\t\t\tlet i;\n\n    \t\t\t\tfor (i = 0; i < each_value.length; i += 1) {\n    \t\t\t\t\tconst child_ctx = get_each_context(ctx, each_value, i);\n\n    \t\t\t\t\tif (each_blocks[i]) {\n    \t\t\t\t\t\teach_blocks[i].p(child_ctx, dirty);\n    \t\t\t\t\t} else {\n    \t\t\t\t\t\teach_blocks[i] = create_each_block(child_ctx);\n    \t\t\t\t\t\teach_blocks[i].c();\n    \t\t\t\t\t\teach_blocks[i].m(div1, null);\n    \t\t\t\t\t}\n    \t\t\t\t}\n\n    \t\t\t\tfor (; i < each_blocks.length; i += 1) {\n    \t\t\t\t\teach_blocks[i].d(1);\n    \t\t\t\t}\n\n    \t\t\t\teach_blocks.length = each_value.length;\n    \t\t\t}\n\n    \t\t\tif (dirty & /*show*/ 1) {\n    \t\t\t\tset_style(div2, \"display\", /*show*/ ctx[0] ? \"block\" : \"none\");\n    \t\t\t}\n    \t\t},\n    \t\ti: noop,\n    \t\to: noop,\n    \t\td(detaching) {\n    \t\t\tif (detaching) detach(div2);\n    \t\t\tdestroy_each(each_blocks, detaching);\n    \t\t\tdispose();\n    \t\t}\n    \t};\n    }\n\n    function instance$1($$self, $$props, $$invalidate) {\n    \tlet dispatcher = new createEventDispatcher();\n\n    \tconst colors = [\n    \t\t\"ffffff\",\n    \t\t\"000000\",\n    \t\t\"eeece1\",\n    \t\t\"1f497d\",\n    \t\t\"4f81bd\",\n    \t\t\"c0504d\",\n    \t\t\"9bbb59\",\n    \t\t\"8064a2\",\n    \t\t\"4bacc6\",\n    \t\t\"f79646\",\n    \t\t\"ffff00\",\n    \t\t\"f2f2f2\",\n    \t\t\"7f7f7f\",\n    \t\t\"ddd9c3\",\n    \t\t\"c6d9f0\",\n    \t\t\"dbe5f1\",\n    \t\t\"f2dcdb\",\n    \t\t\"ebf1dd\",\n    \t\t\"e5e0ec\",\n    \t\t\"dbeef3\",\n    \t\t\"fdeada\",\n    \t\t\"fff2ca\",\n    \t\t\"d8d8d8\",\n    \t\t\"595959\",\n    \t\t\"c4bd97\",\n    \t\t\"8db3e2\",\n    \t\t\"b8cce4\",\n    \t\t\"e5b9b7\",\n    \t\t\"d7e3bc\",\n    \t\t\"ccc1d9\",\n    \t\t\"b7dde8\",\n    \t\t\"fbd5b5\",\n    \t\t\"ffe694\",\n    \t\t\"bfbfbf\",\n    \t\t\"3f3f3f\",\n    \t\t\"938953\",\n    \t\t\"548dd4\",\n    \t\t\"95b3d7\",\n    \t\t\"d99694\",\n    \t\t\"c3d69b\",\n    \t\t\"b2a2c7\",\n    \t\t\"b7dde8\",\n    \t\t\"fac08f\",\n    \t\t\"f2c314\",\n    \t\t\"a5a5a5\",\n    \t\t\"262626\",\n    \t\t\"494429\",\n    \t\t\"17365d\",\n    \t\t\"366092\",\n    \t\t\"953734\",\n    \t\t\"76923c\",\n    \t\t\"5f497a\",\n    \t\t\"92cddc\",\n    \t\t\"e36c09\",\n    \t\t\"c09100\",\n    \t\t\"7f7f7f\",\n    \t\t\"0c0c0c\",\n    \t\t\"1d1b10\",\n    \t\t\"0f243e\",\n    \t\t\"244061\",\n    \t\t\"632423\",\n    \t\t\"4f6128\",\n    \t\t\"3f3151\",\n    \t\t\"31859b\",\n    \t\t\"974806\",\n    \t\t\"7f6000\"\n    \t];\n\n    \tconst getBtns = () => {\n    \t\tconst btns = colors.map(color => ({ color: `#${color}` }));\n    \t\tbtns.push({ text: \"#\", modal: true });\n    \t\treturn btns;\n    \t};\n\n    \tlet { show = false } = $$props;\n    \tlet { btns = [] } = $$props;\n    \tlet { event = \"\" } = $$props;\n\n    \tonMount(() => {\n    \t\t$$invalidate(1, btns = getBtns());\n    \t});\n\n    \tfunction close() {\n    \t\t$$invalidate(0, show = false);\n    \t}\n\n    \tfunction selectColor(btn) {\n    \t\tdispatcher(event, btn);\n    \t\tclose();\n    \t}\n\n    \tconst click_handler = (btn, event) => selectColor(btn);\n\n    \t$$self.$set = $$props => {\n    \t\tif (\"show\" in $$props) $$invalidate(0, show = $$props.show);\n    \t\tif (\"btns\" in $$props) $$invalidate(1, btns = $$props.btns);\n    \t\tif (\"event\" in $$props) $$invalidate(4, event = $$props.event);\n    \t};\n\n    \treturn [\n    \t\tshow,\n    \t\tbtns,\n    \t\tclose,\n    \t\tselectColor,\n    \t\tevent,\n    \t\tdispatcher,\n    \t\tcolors,\n    \t\tgetBtns,\n    \t\tclick_handler\n    \t];\n    }\n\n    class EditorColorPicker extends SvelteComponent {\n    \tconstructor(options) {\n    \t\tsuper();\n    \t\tif (!document.getElementById(\"svelte-njq4pk-style\")) add_css$1();\n    \t\tinit(this, options, instance$1, create_fragment$1, safe_not_equal, { show: 0, btns: 1, event: 4 });\n    \t}\n    }\n\n    const state = (function(name ){\n\n        let state = {\n            actionBtns: [],\n            actionObj: {}\n        };\n\n        const { subscribe, set, update } = writable(state);\n\n        return {\n            name,\n            set,\n            update,\n            subscribe\n        }\n    });\n\n    const createStateStore = state;\n\n    /* src/Editor.svelte generated by Svelte v3.18.2 */\n\n    const { document: document_1 } = globals;\n\n    function add_css$2() {\n    \tvar style = element(\"style\");\n    \tstyle.id = \"svelte-1a534py-style\";\n    \tstyle.textContent = \".cl.svelte-1a534py .svelte-1a534py{box-sizing:border-box}.cl.svelte-1a534py.svelte-1a534py{box-shadow:0 2px 3px rgba(10, 10, 10, 0.1), 0 0 0 1px rgba(10, 10, 10, 0.1);box-sizing:border-box;width:100%;position:relative}.cl-content.svelte-1a534py.svelte-1a534py{height:300px;outline:0;overflow-y:auto;padding:10px;width:100%;background-color:white}.cl-actionbar.svelte-1a534py.svelte-1a534py{background-color:#ecf0f1;border-bottom:1px solid rgba(10, 10, 10, 0.1);width:100%}.cl-button.svelte-1a534py.svelte-1a534py{background-color:transparent;border:none;cursor:pointer;height:35px;outline:0;width:35px;vertical-align:top;position:relative}.cl-button.svelte-1a534py.svelte-1a534py:hover,.cl-button.active.svelte-1a534py.svelte-1a534py{background-color:#fff}.cl-button.svelte-1a534py.svelte-1a534py:disabled{opacity:.5;pointer-events:none}.cl-textarea.svelte-1a534py.svelte-1a534py{display:none;max-width:100%;min-width:100%;border:none;padding:10px}.cl-textarea.svelte-1a534py.svelte-1a534py:focus{outline:none}\";\n    \tappend(document_1.head, style);\n    }\n\n    function get_each_context$1(ctx, list, i) {\n    \tconst child_ctx = ctx.slice();\n    \tchild_ctx[35] = list[i];\n    \treturn child_ctx;\n    }\n\n    // (8:4) {#each $state.actionBtns as action}\n    function create_each_block$1(ctx) {\n    \tlet button;\n    \tlet html_tag;\n    \tlet raw_value = /*action*/ ctx[35].icon + \"\";\n    \tlet t;\n    \tlet button_class_value;\n    \tlet button_title_value;\n    \tlet button_disabled_value;\n    \tlet dispose;\n\n    \tfunction click_handler_1(...args) {\n    \t\treturn /*click_handler_1*/ ctx[25](/*action*/ ctx[35], ...args);\n    \t}\n\n    \treturn {\n    \t\tc() {\n    \t\t\tbutton = element(\"button\");\n    \t\t\tt = space();\n    \t\t\thtml_tag = new HtmlTag(raw_value, t);\n    \t\t\tattr(button, \"class\", button_class_value = \"cl-button \" + (/*action*/ ctx[35].active ? \"active\" : \"\") + \" svelte-1a534py\");\n    \t\t\tattr(button, \"title\", button_title_value = /*action*/ ctx[35].title);\n    \t\t\tbutton.disabled = button_disabled_value = /*action*/ ctx[35].disabled;\n    \t\t},\n    \t\tm(target, anchor) {\n    \t\t\tinsert(target, button, anchor);\n    \t\t\thtml_tag.m(button);\n    \t\t\tappend(button, t);\n    \t\t\tdispose = listen(button, \"click\", click_handler_1);\n    \t\t},\n    \t\tp(new_ctx, dirty) {\n    \t\t\tctx = new_ctx;\n    \t\t\tif (dirty[0] & /*$state*/ 2 && raw_value !== (raw_value = /*action*/ ctx[35].icon + \"\")) html_tag.p(raw_value);\n\n    \t\t\tif (dirty[0] & /*$state*/ 2 && button_class_value !== (button_class_value = \"cl-button \" + (/*action*/ ctx[35].active ? \"active\" : \"\") + \" svelte-1a534py\")) {\n    \t\t\t\tattr(button, \"class\", button_class_value);\n    \t\t\t}\n\n    \t\t\tif (dirty[0] & /*$state*/ 2 && button_title_value !== (button_title_value = /*action*/ ctx[35].title)) {\n    \t\t\t\tattr(button, \"title\", button_title_value);\n    \t\t\t}\n\n    \t\t\tif (dirty[0] & /*$state*/ 2 && button_disabled_value !== (button_disabled_value = /*action*/ ctx[35].disabled)) {\n    \t\t\t\tbutton.disabled = button_disabled_value;\n    \t\t\t}\n    \t\t},\n    \t\td(detaching) {\n    \t\t\tif (detaching) detach(button);\n    \t\t\tdispose();\n    \t\t}\n    \t};\n    }\n\n    function create_fragment$2(ctx) {\n    \tlet div2;\n    \tlet div0;\n    \tlet t0;\n    \tlet div1;\n    \tlet t1;\n    \tlet textarea;\n    \tlet t2;\n    \tlet t3;\n    \tlet current;\n    \tlet dispose;\n    \tlet each_value = /*$state*/ ctx[1].actionBtns;\n    \tlet each_blocks = [];\n\n    \tfor (let i = 0; i < each_value.length; i += 1) {\n    \t\teach_blocks[i] = create_each_block$1(get_each_context$1(ctx, each_value, i));\n    \t}\n\n    \tlet editormodal_props = {};\n    \tconst editormodal = new EditorModal({ props: editormodal_props });\n    \t/*editormodal_binding*/ ctx[32](editormodal);\n    \tlet editorcolorpicker_props = {};\n    \tconst editorcolorpicker = new EditorColorPicker({ props: editorcolorpicker_props });\n    \t/*editorcolorpicker_binding*/ ctx[33](editorcolorpicker);\n\n    \treturn {\n    \t\tc() {\n    \t\t\tdiv2 = element(\"div\");\n    \t\t\tdiv0 = element(\"div\");\n\n    \t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n    \t\t\t\teach_blocks[i].c();\n    \t\t\t}\n\n    \t\t\tt0 = space();\n    \t\t\tdiv1 = element(\"div\");\n    \t\t\tt1 = space();\n    \t\t\ttextarea = element(\"textarea\");\n    \t\t\tt2 = space();\n    \t\t\tcreate_component(editormodal.$$.fragment);\n    \t\t\tt3 = space();\n    \t\t\tcreate_component(editorcolorpicker.$$.fragment);\n    \t\t\tattr(div0, \"class\", \"cl-actionbar svelte-1a534py\");\n    \t\t\tattr(div1, \"class\", \"cl-content svelte-1a534py\");\n    \t\t\tset_style(div1, \"height\", /*height*/ ctx[0]);\n    \t\t\tattr(div1, \"contenteditable\", \"true\");\n    \t\t\tattr(textarea, \"class\", \"cl-textarea svelte-1a534py\");\n    \t\t\tset_style(textarea, \"max-height\", /*height*/ ctx[0]);\n    \t\t\tset_style(textarea, \"min-height\", /*height*/ ctx[0]);\n    \t\t\tattr(div2, \"class\", \"cl svelte-1a534py\");\n    \t\t},\n    \t\tm(target, anchor) {\n    \t\t\tinsert(target, div2, anchor);\n    \t\t\tappend(div2, div0);\n\n    \t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n    \t\t\t\teach_blocks[i].m(div0, null);\n    \t\t\t}\n\n    \t\t\tappend(div2, t0);\n    \t\t\tappend(div2, div1);\n    \t\t\t/*div1_binding*/ ctx[26](div1);\n    \t\t\tappend(div2, t1);\n    \t\t\tappend(div2, textarea);\n    \t\t\t/*textarea_binding*/ ctx[31](textarea);\n    \t\t\tappend(div2, t2);\n    \t\t\tmount_component(editormodal, div2, null);\n    \t\t\tappend(div2, t3);\n    \t\t\tmount_component(editorcolorpicker, div2, null);\n    \t\t\t/*div2_binding*/ ctx[34](div2);\n    \t\t\tcurrent = true;\n\n    \t\t\tdispose = [\n    \t\t\t\tlisten(window, \"click\", /*click_handler*/ ctx[24]),\n    \t\t\t\tlisten(div1, \"input\", /*input_handler*/ ctx[27]),\n    \t\t\t\tlisten(div1, \"mouseup\", /*mouseup_handler*/ ctx[28]),\n    \t\t\t\tlisten(div1, \"keyup\", /*keyup_handler*/ ctx[29]),\n    \t\t\t\tlisten(div1, \"paste\", /*paste_handler*/ ctx[30])\n    \t\t\t];\n    \t\t},\n    \t\tp(ctx, dirty) {\n    \t\t\tif (dirty[0] & /*$state, _btnClicked*/ 66) {\n    \t\t\t\teach_value = /*$state*/ ctx[1].actionBtns;\n    \t\t\t\tlet i;\n\n    \t\t\t\tfor (i = 0; i < each_value.length; i += 1) {\n    \t\t\t\t\tconst child_ctx = get_each_context$1(ctx, each_value, i);\n\n    \t\t\t\t\tif (each_blocks[i]) {\n    \t\t\t\t\t\teach_blocks[i].p(child_ctx, dirty);\n    \t\t\t\t\t} else {\n    \t\t\t\t\t\teach_blocks[i] = create_each_block$1(child_ctx);\n    \t\t\t\t\t\teach_blocks[i].c();\n    \t\t\t\t\t\teach_blocks[i].m(div0, null);\n    \t\t\t\t\t}\n    \t\t\t\t}\n\n    \t\t\t\tfor (; i < each_blocks.length; i += 1) {\n    \t\t\t\t\teach_blocks[i].d(1);\n    \t\t\t\t}\n\n    \t\t\t\teach_blocks.length = each_value.length;\n    \t\t\t}\n\n    \t\t\tif (!current || dirty[0] & /*height*/ 1) {\n    \t\t\t\tset_style(div1, \"height\", /*height*/ ctx[0]);\n    \t\t\t}\n\n    \t\t\tif (!current || dirty[0] & /*height*/ 1) {\n    \t\t\t\tset_style(textarea, \"max-height\", /*height*/ ctx[0]);\n    \t\t\t}\n\n    \t\t\tif (!current || dirty[0] & /*height*/ 1) {\n    \t\t\t\tset_style(textarea, \"min-height\", /*height*/ ctx[0]);\n    \t\t\t}\n\n    \t\t\tconst editormodal_changes = {};\n    \t\t\teditormodal.$set(editormodal_changes);\n    \t\t\tconst editorcolorpicker_changes = {};\n    \t\t\teditorcolorpicker.$set(editorcolorpicker_changes);\n    \t\t},\n    \t\ti(local) {\n    \t\t\tif (current) return;\n    \t\t\ttransition_in(editormodal.$$.fragment, local);\n    \t\t\ttransition_in(editorcolorpicker.$$.fragment, local);\n    \t\t\tcurrent = true;\n    \t\t},\n    \t\to(local) {\n    \t\t\ttransition_out(editormodal.$$.fragment, local);\n    \t\t\ttransition_out(editorcolorpicker.$$.fragment, local);\n    \t\t\tcurrent = false;\n    \t\t},\n    \t\td(detaching) {\n    \t\t\tif (detaching) detach(div2);\n    \t\t\tdestroy_each(each_blocks, detaching);\n    \t\t\t/*div1_binding*/ ctx[26](null);\n    \t\t\t/*textarea_binding*/ ctx[31](null);\n    \t\t\t/*editormodal_binding*/ ctx[32](null);\n    \t\t\tdestroy_component(editormodal);\n    \t\t\t/*editorcolorpicker_binding*/ ctx[33](null);\n    \t\t\tdestroy_component(editorcolorpicker);\n    \t\t\t/*div2_binding*/ ctx[34](null);\n    \t\t\trun_all(dispose);\n    \t\t}\n    \t};\n    }\n\n    const editors = [];\n\n    function _onPaste(event) {\n    \tevent.preventDefault();\n\n    \texec$1(\"insertHTML\", event.clipboardData.getData(\"text/html\")\n    \t? cleanHtml(event.clipboardData.getData(\"text/html\"))\n    \t: event.clipboardData.getData(\"text\"));\n    }\n\n    function exec$1(cmd, value) {\n    \texec(cmd, value);\n    }\n\n    function instance$2($$self, $$props, $$invalidate) {\n    \tlet $state;\n    \tlet $references;\n    \tlet $helper;\n    \tlet dispatcher = new createEventDispatcher();\n    \tlet { actions = [] } = $$props;\n    \tlet { height = \"300px\" } = $$props;\n    \tlet { html = \"\" } = $$props;\n    \tlet { removeFormatTags = [\"h1\", \"h2\", \"blockquote\"] } = $$props;\n\n    \tlet helper = writable({\n    \t\tforeColor: false,\n    \t\tbackColor: false,\n    \t\tforeColorModal: false,\n    \t\tbackColorModal: false,\n    \t\timage: false,\n    \t\tlink: false,\n    \t\tshowEditor: true,\n    \t\tblurActive: false\n    \t});\n\n    \tcomponent_subscribe($$self, helper, value => $$invalidate(20, $helper = value));\n    \teditors.push({});\n    \tlet contextKey = \"editor_\" + editors.length;\n    \tlet state = createStateStore(contextKey);\n    \tcomponent_subscribe($$self, state, value => $$invalidate(1, $state = value));\n    \tlet references = writable({});\n    \tcomponent_subscribe($$self, references, value => $$invalidate(2, $references = value));\n    \tset_store_value(state, $state.actionObj = getNewActionObj(defaultActions, actions), $state);\n\n    \tlet context = {\n    \t\texec: exec$1,\n    \t\tgetHtml,\n    \t\tgetText,\n    \t\tsetHtml,\n    \t\tsaveRange: saveRange$1,\n    \t\trestoreRange: restoreRange$1,\n    \t\thelper,\n    \t\treferences,\n    \t\tstate,\n    \t\tremoveFormatTags\n    \t};\n\n    \tsetContext(contextKey, context);\n\n    \tonMount(() => {\n    \t\tset_store_value(state, $state.actionBtns = getActionBtns($state.actionObj), $state);\n    \t\tsetHtml(html);\n    \t});\n\n    \tfunction _btnClicked(action) {\n    \t\t$references.editor.focus();\n    \t\tsaveRange$1($references.editor);\n    \t\trestoreRange$1($references.editor);\n    \t\taction.result.call(context);\n    \t\t_handleButtonStatus();\n    \t}\n\n    \tfunction _handleButtonStatus(clearBtns) {\n    \t\tconst tags = clearBtns\n    \t\t? []\n    \t\t: getTagsRecursive(document.getSelection().focusNode);\n\n    \t\tObject.keys($state.actionObj).forEach(action => set_store_value(state, $state.actionObj[action].active = false, $state));\n    \t\ttags.forEach(tag => ($state.actionObj[tag.toLowerCase()] || {}).active = true);\n    \t\tset_store_value(state, $state.actionBtns = getActionBtns($state.actionObj), $state);\n    \t\tstate.set($state);\n    \t}\n\n    \tfunction _onChange(html) {\n    \t\tdispatcher(\"change\", html);\n    \t}\n\n    \tfunction _documentClick(event) {\n    \t\tif (!isEditorClick(event.target, $references.editorWrapper) && $helper.blurActive) {\n    \t\t\tdispatcher(\"blur\", event);\n    \t\t}\n\n    \t\tset_store_value(helper, $helper.blurActive = true, $helper);\n    \t}\n\n    \t\n\n    \tfunction getHtml(sanitize) {\n    \t\treturn sanitize\n    \t\t? removeBadTags($references.editor.innerHTML)\n    \t\t: $references.editor.innerHTML;\n    \t}\n\n    \tfunction getText() {\n    \t\treturn $references.editor.innerText;\n    \t}\n\n    \tfunction setHtml(html, sanitize) {\n    \t\tset_store_value(references, $references.editor.innerHTML = sanitize ? removeBadTags(html) : html || \"\", $references);\n    \t}\n\n    \tfunction saveRange$1() {\n    \t\tsaveRange($references.editor);\n    \t}\n\n    \tfunction restoreRange$1() {\n    \t\trestoreRange($references.editor);\n    \t}\n\n    \tconst refs = $references;\n    \tconst click_handler = event => _documentClick(event);\n    \tconst click_handler_1 = (action, event) => _btnClicked(action);\n\n    \tfunction div1_binding($$value) {\n    \t\tbinding_callbacks[$$value ? \"unshift\" : \"push\"](() => {\n    \t\t\t$references.editor = $$value;\n    \t\t\treferences.set($references);\n    \t\t});\n    \t}\n\n    \tconst input_handler = event => _onChange(event.target.innerHTML);\n    \tconst mouseup_handler = () => _handleButtonStatus();\n    \tconst keyup_handler = () => _handleButtonStatus();\n    \tconst paste_handler = event => _onPaste(event);\n\n    \tfunction textarea_binding($$value) {\n    \t\tbinding_callbacks[$$value ? \"unshift\" : \"push\"](() => {\n    \t\t\t$references.raw = $$value;\n    \t\t\treferences.set($references);\n    \t\t});\n    \t}\n\n    \tfunction editormodal_binding($$value) {\n    \t\tbinding_callbacks[$$value ? \"unshift\" : \"push\"](() => {\n    \t\t\t$references.modal = $$value;\n    \t\t\treferences.set($references);\n    \t\t});\n    \t}\n\n    \tfunction editorcolorpicker_binding($$value) {\n    \t\tbinding_callbacks[$$value ? \"unshift\" : \"push\"](() => {\n    \t\t\t$references.colorPicker = $$value;\n    \t\t\treferences.set($references);\n    \t\t});\n    \t}\n\n    \tfunction div2_binding($$value) {\n    \t\tbinding_callbacks[$$value ? \"unshift\" : \"push\"](() => {\n    \t\t\t$references.editorWrapper = $$value;\n    \t\t\treferences.set($references);\n    \t\t});\n    \t}\n\n    \t$$self.$set = $$props => {\n    \t\tif (\"actions\" in $$props) $$invalidate(10, actions = $$props.actions);\n    \t\tif (\"height\" in $$props) $$invalidate(0, height = $$props.height);\n    \t\tif (\"html\" in $$props) $$invalidate(11, html = $$props.html);\n    \t\tif (\"removeFormatTags\" in $$props) $$invalidate(12, removeFormatTags = $$props.removeFormatTags);\n    \t};\n\n    \treturn [\n    \t\theight,\n    \t\t$state,\n    \t\t$references,\n    \t\thelper,\n    \t\tstate,\n    \t\treferences,\n    \t\t_btnClicked,\n    \t\t_handleButtonStatus,\n    \t\t_onChange,\n    \t\t_documentClick,\n    \t\tactions,\n    \t\thtml,\n    \t\tremoveFormatTags,\n    \t\texec$1,\n    \t\tgetHtml,\n    \t\tgetText,\n    \t\tsetHtml,\n    \t\tsaveRange$1,\n    \t\trestoreRange$1,\n    \t\trefs,\n    \t\t$helper,\n    \t\tdispatcher,\n    \t\tcontextKey,\n    \t\tcontext,\n    \t\tclick_handler,\n    \t\tclick_handler_1,\n    \t\tdiv1_binding,\n    \t\tinput_handler,\n    \t\tmouseup_handler,\n    \t\tkeyup_handler,\n    \t\tpaste_handler,\n    \t\ttextarea_binding,\n    \t\teditormodal_binding,\n    \t\teditorcolorpicker_binding,\n    \t\tdiv2_binding\n    \t];\n    }\n\n    class Editor extends SvelteComponent {\n    \tconstructor(options) {\n    \t\tsuper();\n    \t\tif (!document_1.getElementById(\"svelte-1a534py-style\")) add_css$2();\n\n    \t\tinit(\n    \t\t\tthis,\n    \t\t\toptions,\n    \t\t\tinstance$2,\n    \t\t\tcreate_fragment$2,\n    \t\t\tsafe_not_equal,\n    \t\t\t{\n    \t\t\t\tactions: 10,\n    \t\t\t\theight: 0,\n    \t\t\t\thtml: 11,\n    \t\t\t\tremoveFormatTags: 12,\n    \t\t\t\texec: 13,\n    \t\t\t\tgetHtml: 14,\n    \t\t\t\tgetText: 15,\n    \t\t\t\tsetHtml: 16,\n    \t\t\t\tsaveRange: 17,\n    \t\t\t\trestoreRange: 18,\n    \t\t\t\trefs: 19\n    \t\t\t},\n    \t\t\t[-1, -1]\n    \t\t);\n    \t}\n\n    \tget actions() {\n    \t\treturn this.$$.ctx[10];\n    \t}\n\n    \tset actions(actions) {\n    \t\tthis.$set({ actions });\n    \t\tflush();\n    \t}\n\n    \tget height() {\n    \t\treturn this.$$.ctx[0];\n    \t}\n\n    \tset height(height) {\n    \t\tthis.$set({ height });\n    \t\tflush();\n    \t}\n\n    \tget html() {\n    \t\treturn this.$$.ctx[11];\n    \t}\n\n    \tset html(html) {\n    \t\tthis.$set({ html });\n    \t\tflush();\n    \t}\n\n    \tget removeFormatTags() {\n    \t\treturn this.$$.ctx[12];\n    \t}\n\n    \tset removeFormatTags(removeFormatTags) {\n    \t\tthis.$set({ removeFormatTags });\n    \t\tflush();\n    \t}\n\n    \tget exec() {\n    \t\treturn exec$1;\n    \t}\n\n    \tget getHtml() {\n    \t\treturn this.$$.ctx[14];\n    \t}\n\n    \tget getText() {\n    \t\treturn this.$$.ctx[15];\n    \t}\n\n    \tget setHtml() {\n    \t\treturn this.$$.ctx[16];\n    \t}\n\n    \tget saveRange() {\n    \t\treturn this.$$.ctx[17];\n    \t}\n\n    \tget restoreRange() {\n    \t\treturn this.$$.ctx[18];\n    \t}\n\n    \tget refs() {\n    \t\treturn this.$$.ctx[19];\n    \t}\n    }\n\n    return Editor;\n\n})));\n","<script>\n  import * as Factory from \"@rdfjs/data-model\";\n  import Editor from \"cl-editor/dist\";\n  import { onMount } from \"svelte\";\n\n  let editArea;\n  let editor;\n\n  export let value;\n\n  let content;\n\n  $: {\n    content = value.value;\n    if (editor) {\n      if (editor.getHtml() !== content) {\n        editor.setHtml(content)\n      }\n    }\n  }\n  onMount(() => {\n    editor = new Editor({\n      target: editArea,\n      props: {\n        actions: ['b', 'i', 'u', 'strike', 'removeFormat'],\n        height: 'auto',\n        html: content\n      }\n    });\n    editor.$on(\"change\", (e) => {\n      value = Factory.literal(\n        editor.getHtml(),\n        \"http://www.w3.org/1999/02/22-rdf-syntax-ns#HTML\"\n      );\n    });\n  });\n</script>\n\n<div bind:this={editArea} />\n","<script>\n  import * as Factory from \"@rdfjs/data-model\";\n  export let value;\n  let content;\n  $: content = value.value;\n  function userChange(e) {\n    value = Factory.blankNode(content);\n  }\n</script>\n\n<div>\n  <input type=\"text\" size=\"5\" bind:value={content} on:input={userChange} />\n</div>\n","/**\n * Simple, lightweight, usable local autocomplete library for modern browsers\n * Because there weren’t enough autocomplete scripts in the world? Because I’m completely insane and have NIH syndrome? Probably both. :P\n * @author Lea Verou http://leaverou.github.io/awesomplete\n * MIT license\n */\n\n(function () {\n\nvar _ = function (input, o) {\n\tvar me = this;\n\n    // Keep track of number of instances for unique IDs\n    _.count = (_.count || 0) + 1;\n    this.count = _.count;\n\n\t// Setup\n\n\tthis.isOpened = false;\n\n\tthis.input = $(input);\n\tthis.input.setAttribute(\"autocomplete\", \"off\");\n\tthis.input.setAttribute(\"aria-expanded\", \"false\");\n\tthis.input.setAttribute(\"aria-owns\", \"awesomplete_list_\" + this.count);\n\tthis.input.setAttribute(\"role\", \"combobox\");\n\n\t// store constructor options in case we need to distinguish\n\t// between default and customized behavior later on\n\tthis.options = o = o || {};\n\n\tconfigure(this, {\n\t\tminChars: 2,\n\t\tmaxItems: 10,\n\t\tautoFirst: false,\n\t\tdata: _.DATA,\n\t\tfilter: _.FILTER_CONTAINS,\n\t\tsort: o.sort === false ? false : _.SORT_BYLENGTH,\n\t\tcontainer: _.CONTAINER,\n\t\titem: _.ITEM,\n\t\treplace: _.REPLACE,\n\t\ttabSelect: false\n\t}, o);\n\n\tthis.index = -1;\n\n\t// Create necessary elements\n\n\tthis.container = this.container(input);\n\n\tthis.ul = $.create(\"ul\", {\n\t\thidden: \"hidden\",\n        role: \"listbox\",\n        id: \"awesomplete_list_\" + this.count,\n\t\tinside: this.container\n\t});\n\n\tthis.status = $.create(\"span\", {\n\t\tclassName: \"visually-hidden\",\n\t\trole: \"status\",\n\t\t\"aria-live\": \"assertive\",\n        \"aria-atomic\": true,\n        inside: this.container,\n        textContent: this.minChars != 0 ? (\"Type \" + this.minChars + \" or more characters for results.\") : \"Begin typing for results.\"\n\t});\n\n\t// Bind events\n\n\tthis._events = {\n\t\tinput: {\n\t\t\t\"input\": this.evaluate.bind(this),\n\t\t\t\"blur\": this.close.bind(this, { reason: \"blur\" }),\n\t\t\t\"keydown\": function(evt) {\n\t\t\t\tvar c = evt.keyCode;\n\n\t\t\t\t// If the dropdown `ul` is in view, then act on keydown for the following keys:\n\t\t\t\t// Enter / Esc / Up / Down\n\t\t\t\tif(me.opened) {\n\t\t\t\t\tif (c === 13 && me.selected) { // Enter\n\t\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t\tme.select(undefined, undefined, evt);\n\t\t\t\t\t}\n\t\t\t\t\telse if (c === 9 && me.selected && me.tabSelect) {\n\t\t\t\t\t\tme.select(undefined, undefined, evt);\n\t\t\t\t\t}\n\t\t\t\t\telse if (c === 27) { // Esc\n\t\t\t\t\t\tme.close({ reason: \"esc\" });\n\t\t\t\t\t}\n\t\t\t\t\telse if (c === 38 || c === 40) { // Down/Up arrow\n\t\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t\tme[c === 38? \"previous\" : \"next\"]();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tform: {\n\t\t\t\"submit\": this.close.bind(this, { reason: \"submit\" })\n\t\t},\n\t\tul: {\n\t\t\t// Prevent the default mousedowm, which ensures the input is not blurred.\n\t\t\t// The actual selection will happen on click. This also ensures dragging the\n\t\t\t// cursor away from the list item will cancel the selection\n\t\t\t\"mousedown\": function(evt) {\n\t\t\t\tevt.preventDefault();\n\t\t\t},\n\t\t\t// The click event is fired even if the corresponding mousedown event has called preventDefault\n\t\t\t\"click\": function(evt) {\n\t\t\t\tvar li = evt.target;\n\n\t\t\t\tif (li !== this) {\n\n\t\t\t\t\twhile (li && !/li/i.test(li.nodeName)) {\n\t\t\t\t\t\tli = li.parentNode;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (li && evt.button === 0) {  // Only select on left click\n\t\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t\tme.select(li, evt.target, evt);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\t$.bind(this.input, this._events.input);\n\t$.bind(this.input.form, this._events.form);\n\t$.bind(this.ul, this._events.ul);\n\n\tif (this.input.hasAttribute(\"list\")) {\n\t\tthis.list = \"#\" + this.input.getAttribute(\"list\");\n\t\tthis.input.removeAttribute(\"list\");\n\t}\n\telse {\n\t\tthis.list = this.input.getAttribute(\"data-list\") || o.list || [];\n\t}\n\n\t_.all.push(this);\n};\n\n_.prototype = {\n\tset list(list) {\n\t\tif (Array.isArray(list)) {\n\t\t\tthis._list = list;\n\t\t}\n\t\telse if (typeof list === \"string\" && list.indexOf(\",\") > -1) {\n\t\t\t\tthis._list = list.split(/\\s*,\\s*/);\n\t\t}\n\t\telse { // Element or CSS selector\n\t\t\tlist = $(list);\n\n\t\t\tif (list && list.children) {\n\t\t\t\tvar items = [];\n\t\t\t\tslice.apply(list.children).forEach(function (el) {\n\t\t\t\t\tif (!el.disabled) {\n\t\t\t\t\t\tvar text = el.textContent.trim();\n\t\t\t\t\t\tvar value = el.value || text;\n\t\t\t\t\t\tvar label = el.label || text;\n\t\t\t\t\t\tif (value !== \"\") {\n\t\t\t\t\t\t\titems.push({ label: label, value: value });\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthis._list = items;\n\t\t\t}\n\t\t}\n\n\t\tif (document.activeElement === this.input) {\n\t\t\tthis.evaluate();\n\t\t}\n\t},\n\n\tget selected() {\n\t\treturn this.index > -1;\n\t},\n\n\tget opened() {\n\t\treturn this.isOpened;\n\t},\n\n\tclose: function (o) {\n\t\tif (!this.opened) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.input.setAttribute(\"aria-expanded\", \"false\");\n\t\tthis.ul.setAttribute(\"hidden\", \"\");\n\t\tthis.isOpened = false;\n\t\tthis.index = -1;\n\n\t\tthis.status.setAttribute(\"hidden\", \"\");\n\n\t\t$.fire(this.input, \"awesomplete-close\", o || {});\n\t},\n\n\topen: function () {\n\t\tthis.input.setAttribute(\"aria-expanded\", \"true\");\n\t\tthis.ul.removeAttribute(\"hidden\");\n\t\tthis.isOpened = true;\n\n\t\tthis.status.removeAttribute(\"hidden\");\n\n\t\tif (this.autoFirst && this.index === -1) {\n\t\t\tthis.goto(0);\n\t\t}\n\n\t\t$.fire(this.input, \"awesomplete-open\");\n\t},\n\n\tdestroy: function() {\n\t\t//remove events from the input and its form\n\t\t$.unbind(this.input, this._events.input);\n\t\t$.unbind(this.input.form, this._events.form);\n\n\t\t// cleanup container if it was created by Awesomplete but leave it alone otherwise\n\t\tif (!this.options.container) {\n\t\t\t//move the input out of the awesomplete container and remove the container and its children\n\t\t\tvar parentNode = this.container.parentNode;\n\n\t\t\tparentNode.insertBefore(this.input, this.container);\n\t\t\tparentNode.removeChild(this.container);\n\t\t}\n\n\t\t//remove autocomplete and aria-autocomplete attributes\n\t\tthis.input.removeAttribute(\"autocomplete\");\n\t\tthis.input.removeAttribute(\"aria-autocomplete\");\n\n\t\t//remove this awesomeplete instance from the global array of instances\n\t\tvar indexOfAwesomplete = _.all.indexOf(this);\n\n\t\tif (indexOfAwesomplete !== -1) {\n\t\t\t_.all.splice(indexOfAwesomplete, 1);\n\t\t}\n\t},\n\n\tnext: function () {\n\t\tvar count = this.ul.children.length;\n\t\tthis.goto(this.index < count - 1 ? this.index + 1 : (count ? 0 : -1) );\n\t},\n\n\tprevious: function () {\n\t\tvar count = this.ul.children.length;\n\t\tvar pos = this.index - 1;\n\n\t\tthis.goto(this.selected && pos !== -1 ? pos : count - 1);\n\t},\n\n\t// Should not be used, highlights specific item without any checks!\n\tgoto: function (i) {\n\t\tvar lis = this.ul.children;\n\n\t\tif (this.selected) {\n\t\t\tlis[this.index].setAttribute(\"aria-selected\", \"false\");\n\t\t}\n\n\t\tthis.index = i;\n\n\t\tif (i > -1 && lis.length > 0) {\n\t\t\tlis[i].setAttribute(\"aria-selected\", \"true\");\n\n\t\t\tthis.status.textContent = lis[i].textContent + \", list item \" + (i + 1) + \" of \" + lis.length;\n\n            this.input.setAttribute(\"aria-activedescendant\", this.ul.id + \"_item_\" + this.index);\n\n\t\t\t// scroll to highlighted element in case parent's height is fixed\n\t\t\tthis.ul.scrollTop = lis[i].offsetTop - this.ul.clientHeight + lis[i].clientHeight;\n\n\t\t\t$.fire(this.input, \"awesomplete-highlight\", {\n\t\t\t\ttext: this.suggestions[this.index]\n\t\t\t});\n\t\t}\n\t},\n\n\tselect: function (selected, origin, originalEvent) {\n\t\tif (selected) {\n\t\t\tthis.index = $.siblingIndex(selected);\n\t\t} else {\n\t\t\tselected = this.ul.children[this.index];\n\t\t}\n\n\t\tif (selected) {\n\t\t\tvar suggestion = this.suggestions[this.index];\n\n\t\t\tvar allowed = $.fire(this.input, \"awesomplete-select\", {\n\t\t\t\ttext: suggestion,\n\t\t\t\torigin: origin || selected,\n\t\t\t\toriginalEvent: originalEvent\n\t\t\t});\n\n\t\t\tif (allowed) {\n\t\t\t\tthis.replace(suggestion);\n\t\t\t\tthis.close({ reason: \"select\" });\n\t\t\t\t$.fire(this.input, \"awesomplete-selectcomplete\", {\n\t\t\t\t\ttext: suggestion,\n\t\t\t\t\toriginalEvent: originalEvent\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t},\n\n\tevaluate: function() {\n\t\tvar me = this;\n\t\tvar value = this.input.value;\n\n\t\tif (value.length >= this.minChars && this._list && this._list.length > 0) {\n\t\t\tthis.index = -1;\n\t\t\t// Populate list with options that match\n\t\t\tthis.ul.innerHTML = \"\";\n\n\t\t\tthis.suggestions = this._list\n\t\t\t\t.map(function(item) {\n\t\t\t\t\treturn new Suggestion(me.data(item, value));\n\t\t\t\t})\n\t\t\t\t.filter(function(item) {\n\t\t\t\t\treturn me.filter(item, value);\n\t\t\t\t});\n\n\t\t\tif (this.sort !== false) {\n\t\t\t\tthis.suggestions = this.suggestions.sort(this.sort);\n\t\t\t}\n\n\t\t\tthis.suggestions = this.suggestions.slice(0, this.maxItems);\n\n\t\t\tthis.suggestions.forEach(function(text, index) {\n\t\t\t\t\tme.ul.appendChild(me.item(text, value, index));\n\t\t\t\t});\n\n\t\t\tif (this.ul.children.length === 0) {\n\n                this.status.textContent = \"No results found\";\n\n\t\t\t\tthis.close({ reason: \"nomatches\" });\n\n\t\t\t} else {\n\t\t\t\tthis.open();\n\n                this.status.textContent = this.ul.children.length + \" results found\";\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tthis.close({ reason: \"nomatches\" });\n\n                this.status.textContent = \"No results found\";\n\t\t}\n\t}\n};\n\n// Static methods/properties\n\n_.all = [];\n\n_.FILTER_CONTAINS = function (text, input) {\n\treturn RegExp($.regExpEscape(input.trim()), \"i\").test(text);\n};\n\n_.FILTER_STARTSWITH = function (text, input) {\n\treturn RegExp(\"^\" + $.regExpEscape(input.trim()), \"i\").test(text);\n};\n\n_.SORT_BYLENGTH = function (a, b) {\n\tif (a.length !== b.length) {\n\t\treturn a.length - b.length;\n\t}\n\n\treturn a < b? -1 : 1;\n};\n\n_.CONTAINER = function (input) {\n\treturn $.create(\"div\", {\n\t\tclassName: \"awesomplete\",\n\t\taround: input\n\t});\n}\n\n_.ITEM = function (text, input, item_id) {\n\tvar html = input.trim() === \"\" ? text : text.replace(RegExp($.regExpEscape(input.trim()), \"gi\"), \"<mark>$&</mark>\");\n\treturn $.create(\"li\", {\n\t\tinnerHTML: html,\n\t\t\"role\": \"option\",\n\t\t\"aria-selected\": \"false\",\n\t\t\"id\": \"awesomplete_list_\" + this.count + \"_item_\" + item_id\n\t});\n};\n\n_.REPLACE = function (text) {\n\tthis.input.value = text.value;\n};\n\n_.DATA = function (item/*, input*/) { return item; };\n\n// Private functions\n\nfunction Suggestion(data) {\n\tvar o = Array.isArray(data)\n\t  ? { label: data[0], value: data[1] }\n\t  : typeof data === \"object\" && \"label\" in data && \"value\" in data ? data : { label: data, value: data };\n\n\tthis.label = o.label || o.value;\n\tthis.value = o.value;\n}\nObject.defineProperty(Suggestion.prototype = Object.create(String.prototype), \"length\", {\n\tget: function() { return this.label.length; }\n});\nSuggestion.prototype.toString = Suggestion.prototype.valueOf = function () {\n\treturn \"\" + this.label;\n};\n\nfunction configure(instance, properties, o) {\n\tfor (var i in properties) {\n\t\tvar initial = properties[i],\n\t\t    attrValue = instance.input.getAttribute(\"data-\" + i.toLowerCase());\n\n\t\tif (typeof initial === \"number\") {\n\t\t\tinstance[i] = parseInt(attrValue);\n\t\t}\n\t\telse if (initial === false) { // Boolean options must be false by default anyway\n\t\t\tinstance[i] = attrValue !== null;\n\t\t}\n\t\telse if (initial instanceof Function) {\n\t\t\tinstance[i] = null;\n\t\t}\n\t\telse {\n\t\t\tinstance[i] = attrValue;\n\t\t}\n\n\t\tif (!instance[i] && instance[i] !== 0) {\n\t\t\tinstance[i] = (i in o)? o[i] : initial;\n\t\t}\n\t}\n}\n\n// Helpers\n\nvar slice = Array.prototype.slice;\n\nfunction $(expr, con) {\n\treturn typeof expr === \"string\"? (con || document).querySelector(expr) : expr || null;\n}\n\nfunction $$(expr, con) {\n\treturn slice.call((con || document).querySelectorAll(expr));\n}\n\n$.create = function(tag, o) {\n\tvar element = document.createElement(tag);\n\n\tfor (var i in o) {\n\t\tvar val = o[i];\n\n\t\tif (i === \"inside\") {\n\t\t\t$(val).appendChild(element);\n\t\t}\n\t\telse if (i === \"around\") {\n\t\t\tvar ref = $(val);\n\t\t\tref.parentNode.insertBefore(element, ref);\n\t\t\telement.appendChild(ref);\n\n\t\t\tif (ref.getAttribute(\"autofocus\") != null) {\n\t\t\t\tref.focus();\n\t\t\t}\n\t\t}\n\t\telse if (i in element) {\n\t\t\telement[i] = val;\n\t\t}\n\t\telse {\n\t\t\telement.setAttribute(i, val);\n\t\t}\n\t}\n\n\treturn element;\n};\n\n$.bind = function(element, o) {\n\tif (element) {\n\t\tfor (var event in o) {\n\t\t\tvar callback = o[event];\n\n\t\t\tevent.split(/\\s+/).forEach(function (event) {\n\t\t\t\telement.addEventListener(event, callback);\n\t\t\t});\n\t\t}\n\t}\n};\n\n$.unbind = function(element, o) {\n\tif (element) {\n\t\tfor (var event in o) {\n\t\t\tvar callback = o[event];\n\n\t\t\tevent.split(/\\s+/).forEach(function(event) {\n\t\t\t\telement.removeEventListener(event, callback);\n\t\t\t});\n\t\t}\n\t}\n};\n\n$.fire = function(target, type, properties) {\n\tvar evt = document.createEvent(\"HTMLEvents\");\n\n\tevt.initEvent(type, true, true );\n\n\tfor (var j in properties) {\n\t\tevt[j] = properties[j];\n\t}\n\n\treturn target.dispatchEvent(evt);\n};\n\n$.regExpEscape = function (s) {\n\treturn s.replace(/[-\\\\^$*+?.()|[\\]{}]/g, \"\\\\$&\");\n};\n\n$.siblingIndex = function (el) {\n\t/* eslint-disable no-cond-assign */\n\tfor (var i = 0; el = el.previousElementSibling; i++);\n\treturn i;\n};\n\n// Initialization\n\nfunction init() {\n\t$$(\"input.awesomplete\").forEach(function (input) {\n\t\tnew _(input);\n\t});\n}\n\n// Make sure to export Awesomplete on self when in a browser\nif (typeof self !== \"undefined\") {\n\tself.Awesomplete = _;\n}\n\n// Are we in a browser? Check for Document constructor\nif (typeof Document !== \"undefined\") {\n\t// DOM already loaded?\n\tif (document.readyState !== \"loading\") {\n\t\tinit();\n\t}\n\telse {\n\t\t// Wait for it\n\t\tdocument.addEventListener(\"DOMContentLoaded\", init);\n\t}\n}\n\n_.$ = $;\n_.$$ = $$;\n\n// Expose Awesomplete as a CJS module\nif (typeof module === \"object\" && module.exports) {\n\tmodule.exports = _;\n}\n\nreturn _;\n\n}());\n","var RDF  = 'http://www.w3.org/1999/02/22-rdf-syntax-ns#',\n    XSD  = 'http://www.w3.org/2001/XMLSchema#',\n    SWAP = 'http://www.w3.org/2000/10/swap/';\n\nexport default {\n  xsd: {\n    decimal: XSD + 'decimal',\n    boolean: XSD + 'boolean',\n    double:  XSD + 'double',\n    integer: XSD + 'integer',\n    string:  XSD + 'string',\n  },\n  rdf: {\n    type:       RDF + 'type',\n    nil:        RDF + 'nil',\n    first:      RDF + 'first',\n    rest:       RDF + 'rest',\n    langString: RDF + 'langString',\n  },\n  owl: {\n    sameAs: 'http://www.w3.org/2002/07/owl#sameAs',\n  },\n  r: {\n    forSome: SWAP + 'reify#forSome',\n    forAll:  SWAP + 'reify#forAll',\n  },\n  log: {\n    implies: SWAP + 'log#implies',\n  },\n};\n","// N3.js implementations of the RDF/JS core data types\n// See https://github.com/rdfjs/representation-task-force/blob/master/interface-spec.md\n\nimport namespaces from './IRIs';\nconst { rdf, xsd } = namespaces;\n\nvar DataFactory, DEFAULTGRAPH;\n\nvar _blankNodeCounter = 0;\n\n// ## Term constructor\nclass Term {\n  constructor(id) {\n    this.id = id;\n  }\n\n  // ### The value of this term\n  get value() {\n    return this.id;\n  }\n\n  // ### Returns whether this object represents the same term as the other\n  equals(other) {\n    // If both terms were created by this library,\n    // equality can be computed through ids\n    if (other instanceof Term)\n      return this.id === other.id;\n    // Otherwise, compare term type and value\n    return !!other && this.termType === other.termType &&\n                      this.value    === other.value;\n  }\n\n  // ### Returns a plain object representation of this term\n  toJSON() {\n    return {\n      termType: this.termType,\n      value:    this.value,\n    };\n  }\n}\n\n\n// ## NamedNode constructor\nclass NamedNode extends Term {\n  // ### The term type of this term\n  get termType() {\n    return 'NamedNode';\n  }\n}\n\n// ## Literal constructor\nclass Literal extends Term {\n  // ### The term type of this term\n  get termType() {\n    return 'Literal';\n  }\n\n  // ### The text value of this literal\n  get value() {\n    return this.id.substring(1, this.id.lastIndexOf('\"'));\n  }\n\n  // ### The language of this literal\n  get language() {\n    // Find the last quotation mark (e.g., '\"abc\"@en-us')\n    var id = this.id, atPos = id.lastIndexOf('\"') + 1;\n    // If \"@\" it follows, return the remaining substring; empty otherwise\n    return atPos < id.length && id[atPos++] === '@' ? id.substr(atPos).toLowerCase() : '';\n  }\n\n  // ### The datatype IRI of this literal\n  get datatype() {\n    return new NamedNode(this.datatypeString);\n  }\n\n  // ### The datatype string of this literal\n  get datatypeString() {\n    // Find the last quotation mark (e.g., '\"abc\"^^http://ex.org/types#t')\n    var id = this.id, dtPos = id.lastIndexOf('\"') + 1, ch;\n    // If \"^\" it follows, return the remaining substring\n    return dtPos < id.length && (ch = id[dtPos]) === '^' ? id.substr(dtPos + 2) :\n           // If \"@\" follows, return rdf:langString; xsd:string otherwise\n           (ch !== '@' ? xsd.string : rdf.langString);\n  }\n\n  // ### Returns whether this object represents the same term as the other\n  equals(other) {\n    // If both literals were created by this library,\n    // equality can be computed through ids\n    if (other instanceof Literal)\n      return this.id === other.id;\n    // Otherwise, compare term type, value, language, and datatype\n    return !!other && !!other.datatype &&\n                      this.termType === other.termType &&\n                      this.value    === other.value    &&\n                      this.language === other.language &&\n                      this.datatype.value === other.datatype.value;\n  }\n\n  toJSON() {\n    return {\n      termType: this.termType,\n      value:    this.value,\n      language: this.language,\n      datatype: { termType: 'NamedNode', value: this.datatypeString },\n    };\n  }\n}\n\n// ## BlankNode constructor\nclass BlankNode extends Term {\n  constructor(name) {\n    super('_:' + name);\n  }\n\n  // ### The term type of this term\n  get termType() {\n    return 'BlankNode';\n  }\n\n  // ### The name of this blank node\n  get value() {\n    return this.id.substr(2);\n  }\n}\n\nclass Variable extends Term {\n  constructor(name) {\n    super('?' + name);\n  }\n\n  // ### The term type of this term\n  get termType() {\n    return 'Variable';\n  }\n\n  // ### The name of this variable\n  get value() {\n    return this.id.substr(1);\n  }\n}\n\n// ## DefaultGraph constructor\nclass DefaultGraph extends Term {\n  constructor() {\n    super('');\n    return DEFAULTGRAPH || this;\n  }\n\n  // ### The term type of this term\n  get termType() {\n    return 'DefaultGraph';\n  }\n\n  // ### Returns whether this object represents the same term as the other\n  equals(other) {\n    // If both terms were created by this library,\n    // equality can be computed through strict equality;\n    // otherwise, compare term types.\n    return (this === other) || (!!other && (this.termType === other.termType));\n  }\n}\n\n// ## DefaultGraph singleton\nDEFAULTGRAPH = new DefaultGraph();\n\n\n// ### Constructs a term from the given internal string ID\nfunction fromId(id, factory) {\n  factory = factory || DataFactory;\n\n  // Falsy value or empty string indicate the default graph\n  if (!id)\n    return factory.defaultGraph();\n\n  // Identify the term type based on the first character\n  switch (id[0]) {\n  case '_': return factory.blankNode(id.substr(2));\n  case '?': return factory.variable(id.substr(1));\n  case '\"':\n    // Shortcut for internal literals\n    if (factory === DataFactory)\n      return new Literal(id);\n    // Literal without datatype or language\n    if (id[id.length - 1] === '\"')\n      return factory.literal(id.substr(1, id.length - 2));\n    // Literal with datatype or language\n    var endPos = id.lastIndexOf('\"', id.length - 1);\n    return factory.literal(id.substr(1, endPos - 1),\n            id[endPos + 1] === '@' ? id.substr(endPos + 2)\n                                   : factory.namedNode(id.substr(endPos + 3)));\n  default:  return factory.namedNode(id);\n  }\n}\n\n// ### Constructs an internal string ID from the given term or ID string\nfunction toId(term) {\n  if (typeof term === 'string')\n    return term;\n  if (term instanceof Term)\n    return term.id;\n  if (!term)\n    return DEFAULTGRAPH.id;\n\n  // Term instantiated with another library\n  switch (term.termType) {\n  case 'NamedNode':    return term.value;\n  case 'BlankNode':    return '_:' + term.value;\n  case 'Variable':     return '?' + term.value;\n  case 'DefaultGraph': return '';\n  case 'Literal':      return '\"' + term.value + '\"' +\n    (term.language ? '@' + term.language :\n      (term.datatype && term.datatype.value !== xsd.string ? '^^' + term.datatype.value : ''));\n  default: throw new Error('Unexpected termType: ' + term.termType);\n  }\n}\n\n\n// ## Quad constructor\nclass Quad {\n  constructor(subject, predicate, object, graph) {\n    this.subject   = subject;\n    this.predicate = predicate;\n    this.object    = object;\n    this.graph     = graph || DEFAULTGRAPH;\n  }\n\n  // ### Returns a plain object representation of this quad\n  toJSON() {\n    return {\n      subject:   this.subject.toJSON(),\n      predicate: this.predicate.toJSON(),\n      object:    this.object.toJSON(),\n      graph:     this.graph.toJSON(),\n    };\n  }\n\n  // ### Returns whether this object represents the same quad as the other\n  equals(other) {\n    return !!other && this.subject.equals(other.subject)     &&\n                      this.predicate.equals(other.predicate) &&\n                      this.object.equals(other.object)       &&\n                      this.graph.equals(other.graph);\n  }\n}\n\n\n// ## DataFactory singleton\nDataFactory = {\n  // ### Public factory functions\n  namedNode,\n  blankNode,\n  variable,\n  literal,\n  defaultGraph,\n  quad,\n  triple: quad,\n\n  // ### Internal datatype constructors\n  internal: {\n    Term,\n    NamedNode,\n    BlankNode,\n    Variable,\n    Literal,\n    DefaultGraph,\n    Quad,\n    Triple: Quad,\n    fromId,\n    toId,\n  },\n};\nexport default DataFactory;\n\n// ### Creates an IRI\nfunction namedNode(iri) {\n  return new NamedNode(iri);\n}\n\n// ### Creates a blank node\nfunction blankNode(name) {\n  return new BlankNode(name || `n3-${_blankNodeCounter++}`);\n}\n\n// ### Creates a literal\nfunction literal(value, languageOrDataType) {\n  // Create a language-tagged string\n  if (typeof languageOrDataType === 'string')\n    return new Literal('\"' + value + '\"@' + languageOrDataType.toLowerCase());\n\n  // Automatically determine datatype for booleans and numbers\n  let datatype = languageOrDataType ? languageOrDataType.value : '';\n  if (datatype === '') {\n    // Convert a boolean\n    if (typeof value === 'boolean')\n      datatype = xsd.boolean;\n    // Convert an integer or double\n    else if (typeof value === 'number') {\n      if (Number.isFinite(value))\n        datatype = Number.isInteger(value) ? xsd.integer : xsd.double;\n      else {\n        datatype = xsd.double;\n        if (!Number.isNaN(value))\n          value = value > 0 ? 'INF' : '-INF';\n      }\n    }\n  }\n\n  // Create a datatyped literal\n  return (datatype === '' || datatype === xsd.string) ?\n    new Literal('\"' + value + '\"') :\n    new Literal('\"' + value + '\"^^' + datatype);\n}\n\n// ### Creates a variable\nfunction variable(name) {\n  return new Variable(name);\n}\n\n// ### Returns the default graph\nfunction defaultGraph() {\n  return DEFAULTGRAPH;\n}\n\n// ### Creates a quad\nfunction quad(subject, predicate, object, graph) {\n  return new Quad(subject, predicate, object, graph);\n}\n","// **N3Lexer** tokenizes N3 documents.\nimport namespaces from './IRIs';\nconst { xsd } = namespaces;\n\nconst { fromCharCode } = String;\n\n// Regular expression and replacement string to escape N3 strings.\n// Note how we catch invalid unicode sequences separately (they will trigger an error).\nvar escapeSequence = /\\\\u([a-fA-F0-9]{4})|\\\\U([a-fA-F0-9]{8})|\\\\[uU]|\\\\(.)/g;\nvar escapeReplacements = {\n  '\\\\': '\\\\', \"'\": \"'\", '\"': '\"',\n  'n': '\\n', 'r': '\\r', 't': '\\t', 'f': '\\f', 'b': '\\b',\n  '_': '_', '~': '~', '.': '.', '-': '-', '!': '!', '$': '$', '&': '&',\n  '(': '(', ')': ')', '*': '*', '+': '+', ',': ',', ';': ';', '=': '=',\n  '/': '/', '?': '?', '#': '#', '@': '@', '%': '%',\n};\nvar illegalIriChars = /[\\x00-\\x20<>\\\\\"\\{\\}\\|\\^\\`]/;\n\nvar lineModeRegExps = {\n  _iri: true,\n  _unescapedIri: true,\n  _simpleQuotedString: true,\n  _langcode: true,\n  _blank: true,\n  _newline: true,\n  _comment: true,\n  _whitespace: true,\n  _endOfFile: true,\n};\nvar invalidRegExp = /$0^/;\n\n// ## Constructor\nexport default class N3Lexer {\n  constructor(options) {\n    // ## Regular expressions\n    // It's slightly faster to have these as properties than as in-scope variables\n    this._iri = /^<((?:[^ <>{}\\\\]|\\\\[uU])+)>[ \\t]*/; // IRI with escape sequences; needs sanity check after unescaping\n    this._unescapedIri = /^<([^\\x00-\\x20<>\\\\\"\\{\\}\\|\\^\\`]*)>[ \\t]*/; // IRI without escape sequences; no unescaping\n    this._simpleQuotedString = /^\"([^\"\\\\\\r\\n]*)\"(?=[^\"])/; // string without escape sequences\n    this._simpleApostropheString = /^'([^'\\\\\\r\\n]*)'(?=[^'])/;\n    this._langcode = /^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\\-])/i;\n    this._prefix = /^((?:[A-Za-z\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02ff\\u0370-\\u037d\\u037f-\\u1fff\\u200c\\u200d\\u2070-\\u218f\\u2c00-\\u2fef\\u3001-\\ud7ff\\uf900-\\ufdcf\\ufdf0-\\ufffd]|[\\ud800-\\udb7f][\\udc00-\\udfff])(?:\\.?[\\-0-9A-Z_a-z\\xb7\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u037d\\u037f-\\u1fff\\u200c\\u200d\\u203f\\u2040\\u2070-\\u218f\\u2c00-\\u2fef\\u3001-\\ud7ff\\uf900-\\ufdcf\\ufdf0-\\ufffd]|[\\ud800-\\udb7f][\\udc00-\\udfff])*)?:(?=[#\\s<])/;\n    this._prefixed = /^((?:[A-Za-z\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02ff\\u0370-\\u037d\\u037f-\\u1fff\\u200c\\u200d\\u2070-\\u218f\\u2c00-\\u2fef\\u3001-\\ud7ff\\uf900-\\ufdcf\\ufdf0-\\ufffd]|[\\ud800-\\udb7f][\\udc00-\\udfff])(?:\\.?[\\-0-9A-Z_a-z\\xb7\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u037d\\u037f-\\u1fff\\u200c\\u200d\\u203f\\u2040\\u2070-\\u218f\\u2c00-\\u2fef\\u3001-\\ud7ff\\uf900-\\ufdcf\\ufdf0-\\ufffd]|[\\ud800-\\udb7f][\\udc00-\\udfff])*)?:((?:(?:[0-:A-Z_a-z\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02ff\\u0370-\\u037d\\u037f-\\u1fff\\u200c\\u200d\\u2070-\\u218f\\u2c00-\\u2fef\\u3001-\\ud7ff\\uf900-\\ufdcf\\ufdf0-\\ufffd]|[\\ud800-\\udb7f][\\udc00-\\udfff]|%[0-9a-fA-F]{2}|\\\\[!#-\\/;=?\\-@_~])(?:(?:[\\.\\-0-:A-Z_a-z\\xb7\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u037d\\u037f-\\u1fff\\u200c\\u200d\\u203f\\u2040\\u2070-\\u218f\\u2c00-\\u2fef\\u3001-\\ud7ff\\uf900-\\ufdcf\\ufdf0-\\ufffd]|[\\ud800-\\udb7f][\\udc00-\\udfff]|%[0-9a-fA-F]{2}|\\\\[!#-\\/;=?\\-@_~])*(?:[\\-0-:A-Z_a-z\\xb7\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u037d\\u037f-\\u1fff\\u200c\\u200d\\u203f\\u2040\\u2070-\\u218f\\u2c00-\\u2fef\\u3001-\\ud7ff\\uf900-\\ufdcf\\ufdf0-\\ufffd]|[\\ud800-\\udb7f][\\udc00-\\udfff]|%[0-9a-fA-F]{2}|\\\\[!#-\\/;=?\\-@_~]))?)?)(?:[ \\t]+|(?=\\.?[,;!\\^\\s#()\\[\\]\\{\\}\"'<]))/;\n    this._variable = /^\\?(?:(?:[A-Z_a-z\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02ff\\u0370-\\u037d\\u037f-\\u1fff\\u200c\\u200d\\u2070-\\u218f\\u2c00-\\u2fef\\u3001-\\ud7ff\\uf900-\\ufdcf\\ufdf0-\\ufffd]|[\\ud800-\\udb7f][\\udc00-\\udfff])(?:[\\-0-:A-Z_a-z\\xb7\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u037d\\u037f-\\u1fff\\u200c\\u200d\\u203f\\u2040\\u2070-\\u218f\\u2c00-\\u2fef\\u3001-\\ud7ff\\uf900-\\ufdcf\\ufdf0-\\ufffd]|[\\ud800-\\udb7f][\\udc00-\\udfff])*)(?=[.,;!\\^\\s#()\\[\\]\\{\\}\"'<])/;\n    this._blank = /^_:((?:[0-9A-Z_a-z\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02ff\\u0370-\\u037d\\u037f-\\u1fff\\u200c\\u200d\\u2070-\\u218f\\u2c00-\\u2fef\\u3001-\\ud7ff\\uf900-\\ufdcf\\ufdf0-\\ufffd]|[\\ud800-\\udb7f][\\udc00-\\udfff])(?:\\.?[\\-0-9A-Z_a-z\\xb7\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u037d\\u037f-\\u1fff\\u200c\\u200d\\u203f\\u2040\\u2070-\\u218f\\u2c00-\\u2fef\\u3001-\\ud7ff\\uf900-\\ufdcf\\ufdf0-\\ufffd]|[\\ud800-\\udb7f][\\udc00-\\udfff])*)(?:[ \\t]+|(?=\\.?[,;:\\s#()\\[\\]\\{\\}\"'<]))/;\n    this._number = /^[\\-+]?(?:(\\d+\\.\\d*|\\.?\\d+)[eE][\\-+]?|\\d*(\\.)?)\\d+(?=\\.?[,;:\\s#()\\[\\]\\{\\}\"'<])/;\n    this._boolean = /^(?:true|false)(?=[.,;\\s#()\\[\\]\\{\\}\"'<])/;\n    this._keyword = /^@[a-z]+(?=[\\s#<:])/i;\n    this._sparqlKeyword = /^(?:PREFIX|BASE|GRAPH)(?=[\\s#<])/i;\n    this._shortPredicates = /^a(?=[\\s()\\[\\]\\{\\}\"'<])/;\n    this._newline = /^[ \\t]*(?:#[^\\n\\r]*)?(?:\\r\\n|\\n|\\r)[ \\t]*/;\n    this._comment = /#([^\\n\\r]*)/;\n    this._whitespace = /^[ \\t]+/;\n    this._endOfFile = /^(?:#[^\\n\\r]*)?$/;\n    options = options || {};\n\n    // In line mode (N-Triples or N-Quads), only simple features may be parsed\n    if (this._lineMode = !!options.lineMode) {\n      this._n3Mode = false;\n      // Don't tokenize special literals\n      for (var key in this) {\n        if (!(key in lineModeRegExps) && this[key] instanceof RegExp)\n          this[key] = invalidRegExp;\n      }\n    }\n    // When not in line mode, enable N3 functionality by default\n    else {\n      this._n3Mode = options.n3 !== false;\n    }\n    // Don't output comment tokens by default\n    this._comments = !!options.comments;\n    // Cache the last tested closing position of long literals\n    this._literalClosingPos = 0;\n  }\n\n  // ## Private methods\n\n  // ### `_tokenizeToEnd` tokenizes as for as possible, emitting tokens through the callback\n  _tokenizeToEnd(callback, inputFinished) {\n    // Continue parsing as far as possible; the loop will return eventually\n    var input = this._input, outputComments = this._comments;\n    while (true) {\n      // Count and skip whitespace lines\n      var whiteSpaceMatch, comment;\n      while (whiteSpaceMatch = this._newline.exec(input)) {\n        // Try to find a comment\n        if (outputComments && (comment = this._comment.exec(whiteSpaceMatch[0])))\n          callback(null, { line: this._line, type: 'comment', value: comment[1], prefix: '' });\n        // Advance the input\n        input = input.substr(whiteSpaceMatch[0].length, input.length);\n        this._line++;\n      }\n      // Skip whitespace on current line\n      if (!whiteSpaceMatch && (whiteSpaceMatch = this._whitespace.exec(input)))\n        input = input.substr(whiteSpaceMatch[0].length, input.length);\n\n      // Stop for now if we're at the end\n      if (this._endOfFile.test(input)) {\n        // If the input is finished, emit EOF\n        if (inputFinished) {\n          // Try to find a final comment\n          if (outputComments && (comment = this._comment.exec(input)))\n            callback(null, { line: this._line, type: 'comment', value: comment[1], prefix: '' });\n          callback(input = null, { line: this._line, type: 'eof', value: '', prefix: '' });\n        }\n        return this._input = input;\n      }\n\n      // Look for specific token types based on the first character\n      var line = this._line, type = '', value = '', prefix = '',\n          firstChar = input[0], match = null, matchLength = 0, inconclusive = false;\n      switch (firstChar) {\n      case '^':\n        // We need at least 3 tokens lookahead to distinguish ^^<IRI> and ^^pre:fixed\n        if (input.length < 3)\n          break;\n        // Try to match a type\n        else if (input[1] === '^') {\n          this._previousMarker = '^^';\n          // Move to type IRI or prefixed name\n          input = input.substr(2);\n          if (input[0] !== '<') {\n            inconclusive = true;\n            break;\n          }\n        }\n        // If no type, it must be a path expression\n        else {\n          if (this._n3Mode) {\n            matchLength = 1;\n            type = '^';\n          }\n          break;\n        }\n        // Fall through in case the type is an IRI\n      case '<':\n        // Try to find a full IRI without escape sequences\n        if (match = this._unescapedIri.exec(input))\n          type = 'IRI', value = match[1];\n        // Try to find a full IRI with escape sequences\n        else if (match = this._iri.exec(input)) {\n          value = this._unescape(match[1]);\n          if (value === null || illegalIriChars.test(value))\n            return reportSyntaxError(this);\n          type = 'IRI';\n        }\n        // Try to find a backwards implication arrow\n        else if (this._n3Mode && input.length > 1 && input[1] === '=')\n          type = 'inverse', matchLength = 2, value = '>';\n        break;\n\n      case '_':\n        // Try to find a blank node. Since it can contain (but not end with) a dot,\n        // we always need a non-dot character before deciding it is a blank node.\n        // Therefore, try inserting a space if we're at the end of the input.\n        if ((match = this._blank.exec(input)) ||\n            inputFinished && (match = this._blank.exec(input + ' ')))\n          type = 'blank', prefix = '_', value = match[1];\n        break;\n\n      case '\"':\n        // Try to find a literal without escape sequences\n        if (match = this._simpleQuotedString.exec(input))\n          value = match[1];\n        // Try to find a literal wrapped in three pairs of quotes\n        else {\n          ({ value, matchLength } = this._parseLiteral(input));\n          if (value === null)\n            return reportSyntaxError(this);\n        }\n        if (match !== null || matchLength !== 0) {\n          type = 'literal';\n          this._literalClosingPos = 0;\n        }\n        break;\n\n      case \"'\":\n        if (!this._lineMode) {\n          // Try to find a literal without escape sequences\n          if (match = this._simpleApostropheString.exec(input))\n            value = match[1];\n          // Try to find a literal wrapped in three pairs of quotes\n          else {\n            ({ value, matchLength } = this._parseLiteral(input));\n            if (value === null)\n              return reportSyntaxError(this);\n          }\n          if (match !== null || matchLength !== 0) {\n            type = 'literal';\n            this._literalClosingPos = 0;\n          }\n        }\n        break;\n\n      case '?':\n        // Try to find a variable\n        if (this._n3Mode && (match = this._variable.exec(input)))\n          type = 'var', value = match[0];\n        break;\n\n      case '@':\n        // Try to find a language code\n        if (this._previousMarker === 'literal' && (match = this._langcode.exec(input)))\n          type = 'langcode', value = match[1];\n        // Try to find a keyword\n        else if (match = this._keyword.exec(input))\n          type = match[0];\n        break;\n\n      case '.':\n        // Try to find a dot as punctuation\n        if (input.length === 1 ? inputFinished : (input[1] < '0' || input[1] > '9')) {\n          type = '.';\n          matchLength = 1;\n          break;\n        }\n        // Fall through to numerical case (could be a decimal dot)\n\n      case '0':\n      case '1':\n      case '2':\n      case '3':\n      case '4':\n      case '5':\n      case '6':\n      case '7':\n      case '8':\n      case '9':\n      case '+':\n      case '-':\n        // Try to find a number. Since it can contain (but not end with) a dot,\n        // we always need a non-dot character before deciding it is a number.\n        // Therefore, try inserting a space if we're at the end of the input.\n        if (match = this._number.exec(input) ||\n            inputFinished && (match = this._number.exec(input + ' '))) {\n          type = 'literal', value = match[0];\n          prefix = (typeof match[1] === 'string' ? xsd.double :\n                    (typeof match[2] === 'string' ? xsd.decimal : xsd.integer));\n        }\n        break;\n\n      case 'B':\n      case 'b':\n      case 'p':\n      case 'P':\n      case 'G':\n      case 'g':\n        // Try to find a SPARQL-style keyword\n        if (match = this._sparqlKeyword.exec(input))\n          type = match[0].toUpperCase();\n        else\n          inconclusive = true;\n        break;\n\n      case 'f':\n      case 't':\n        // Try to match a boolean\n        if (match = this._boolean.exec(input))\n          type = 'literal', value = match[0], prefix = xsd.boolean;\n        else\n          inconclusive = true;\n        break;\n\n      case 'a':\n        // Try to find an abbreviated predicate\n        if (match = this._shortPredicates.exec(input))\n          type = 'abbreviation', value = 'a';\n        else\n          inconclusive = true;\n        break;\n\n      case '=':\n        // Try to find an implication arrow or equals sign\n        if (this._n3Mode && input.length > 1) {\n          type = 'abbreviation';\n          if (input[1] !== '>')\n            matchLength = 1, value = '=';\n          else\n            matchLength = 2, value = '>';\n        }\n        break;\n\n      case '!':\n        if (!this._n3Mode)\n          break;\n      case ',':\n      case ';':\n      case '[':\n      case ']':\n      case '(':\n      case ')':\n      case '{':\n      case '}':\n        if (!this._lineMode) {\n          matchLength = 1;\n          type = firstChar;\n        }\n        break;\n\n      default:\n        inconclusive = true;\n      }\n\n      // Some first characters do not allow an immediate decision, so inspect more\n      if (inconclusive) {\n        // Try to find a prefix\n        if ((this._previousMarker === '@prefix' || this._previousMarker === 'PREFIX') &&\n            (match = this._prefix.exec(input)))\n          type = 'prefix', value = match[1] || '';\n        // Try to find a prefixed name. Since it can contain (but not end with) a dot,\n        // we always need a non-dot character before deciding it is a prefixed name.\n        // Therefore, try inserting a space if we're at the end of the input.\n        else if ((match = this._prefixed.exec(input)) ||\n                 inputFinished && (match = this._prefixed.exec(input + ' ')))\n          type = 'prefixed', prefix = match[1] || '', value = this._unescape(match[2]);\n      }\n\n      // A type token is special: it can only be emitted after an IRI or prefixed name is read\n      if (this._previousMarker === '^^') {\n        switch (type) {\n        case 'prefixed': type = 'type';    break;\n        case 'IRI':      type = 'typeIRI'; break;\n        default:         type = '';\n        }\n      }\n\n      // What if nothing of the above was found?\n      if (!type) {\n        // We could be in streaming mode, and then we just wait for more input to arrive.\n        // Otherwise, a syntax error has occurred in the input.\n        // One exception: error on an unaccounted linebreak (= not inside a triple-quoted literal).\n        if (inputFinished || (!/^'''|^\"\"\"/.test(input) && /\\n|\\r/.test(input)))\n          return reportSyntaxError(this);\n        else\n          return this._input = input;\n      }\n\n      // Emit the parsed token\n      var token = { line: line, type: type, value: value, prefix: prefix };\n      callback(null, token);\n      this.previousToken = token;\n      this._previousMarker = type;\n      // Advance to next part to tokenize\n      input = input.substr(matchLength || match[0].length, input.length);\n    }\n\n    // Signals the syntax error through the callback\n    function reportSyntaxError(self) { callback(self._syntaxError(/^\\S*/.exec(input)[0])); }\n  }\n\n  // ### `_unescape` replaces N3 escape codes by their corresponding characters\n  _unescape(item) {\n    try {\n      return item.replace(escapeSequence, function (sequence, unicode4, unicode8, escapedChar) {\n        var charCode;\n        if (unicode4) {\n          charCode = parseInt(unicode4, 16);\n          if (isNaN(charCode)) throw new Error(); // can never happen (regex), but helps performance\n          return fromCharCode(charCode);\n        }\n        else if (unicode8) {\n          charCode = parseInt(unicode8, 16);\n          if (isNaN(charCode)) throw new Error(); // can never happen (regex), but helps performance\n          if (charCode <= 0xFFFF) return fromCharCode(charCode);\n          return fromCharCode(0xD800 + ((charCode -= 0x10000) / 0x400), 0xDC00 + (charCode & 0x3FF));\n        }\n        else {\n          var replacement = escapeReplacements[escapedChar];\n          if (!replacement)\n            throw new Error();\n          return replacement;\n        }\n      });\n    }\n    catch (error) { return null; }\n  }\n\n  // ### `_parseLiteral` parses a literal into an unescaped value\n  _parseLiteral(input) {\n    // Ensure we have enough lookahead to identify triple-quoted strings\n    if (input.length >= 3) {\n      // Identify the opening quote(s)\n      const opening = input.match(/^(?:\"\"\"|\"|'''|'|)/)[0];\n      const openingLength = opening.length;\n\n      // Find the next candidate closing quotes\n      let closingPos = Math.max(this._literalClosingPos, openingLength);\n      while ((closingPos = input.indexOf(opening, closingPos)) > 0) {\n        // Count backslashes right before the closing quotes\n        let backslashCount = 0;\n        while (input[closingPos - backslashCount - 1] === '\\\\')\n          backslashCount++;\n\n        // An even number of backslashes (in particular 0)\n        // means these are actual, non-escaped closing quotes\n        if (backslashCount % 2 === 0) {\n          // Extract and unescape the value\n          const raw = input.substring(openingLength, closingPos);\n          const lines = raw.split(/\\r\\n|\\r|\\n/).length - 1;\n          const matchLength = closingPos + openingLength;\n          // Only triple-quoted strings can be multi-line\n          if (openingLength === 1 && lines !== 0 ||\n              openingLength === 3 && this._lineMode)\n            break;\n          this._line += lines;\n          return { value: this._unescape(raw), matchLength };\n        }\n        closingPos++;\n      }\n      this._literalClosingPos = input.length - openingLength + 1;\n    }\n    return { value: '', matchLength: 0 };\n  }\n\n  // ### `_syntaxError` creates a syntax error for the given issue\n  _syntaxError(issue) {\n    this._input = null;\n    var err = new Error('Unexpected \"' + issue + '\" on line ' + this._line + '.');\n    err.context = {\n      token: undefined,\n      line: this._line,\n      previousToken: this.previousToken,\n    };\n    return err;\n  }\n\n  // ## Public methods\n\n  // ### `tokenize` starts the transformation of an N3 document into an array of tokens.\n  // The input can be a string or a stream.\n  tokenize(input, callback) {\n    var self = this;\n    this._line = 1;\n\n    // If the input is a string, continuously emit tokens through the callback until the end\n    if (typeof input === 'string') {\n      this._input = input;\n      // If a callback was passed, asynchronously call it\n      if (typeof callback === 'function')\n        setImmediate(function () { self._tokenizeToEnd(callback, true); });\n      // If no callback was passed, tokenize synchronously and return\n      else {\n        var tokens = [], error;\n        this._tokenizeToEnd(function (e, t) { e ? (error = e) : tokens.push(t); }, true);\n        if (error) throw error;\n        return tokens;\n      }\n    }\n    // Otherwise, the input must be a stream\n    else {\n      this._input = '';\n      this._pendingBuffer = null;\n      if (typeof input.setEncoding === 'function')\n        input.setEncoding('utf8');\n      // Adds the data chunk to the buffer and parses as far as possible\n      input.on('data', function (data) {\n        if (self._input !== null && data.length !== 0) {\n          // Prepend any previous pending writes\n          if (self._pendingBuffer) {\n            data = Buffer.concat([self._pendingBuffer, data]);\n            self._pendingBuffer = null;\n          }\n          // Hold if the buffer ends in an incomplete unicode sequence\n          if (data[data.length - 1] & 0x80) {\n            self._pendingBuffer = data;\n          }\n          // Otherwise, tokenize as far as possible\n          else {\n            self._input += data;\n            self._tokenizeToEnd(callback, false);\n          }\n        }\n      });\n      // Parses until the end\n      input.on('end', function () {\n        if (self._input !== null)\n          self._tokenizeToEnd(callback, true);\n      });\n      input.on('error', callback);\n    }\n  }\n}\n","// **N3Parser** parses N3 documents.\nimport N3Lexer from './N3Lexer';\nimport N3DataFactory from './N3DataFactory';\nimport namespaces from './IRIs';\n\nlet blankNodePrefix = 0;\n\n// ## Constructor\nexport default class N3Parser {\n  constructor(options) {\n    this._contextStack = [];\n    this._graph = null;\n\n    // Set the document IRI\n    options = options || {};\n    this._setBase(options.baseIRI);\n    options.factory && initDataFactory(this, options.factory);\n\n    // Set supported features depending on the format\n    var format = (typeof options.format === 'string') ?\n                 options.format.match(/\\w*$/)[0].toLowerCase() : '',\n        isTurtle = format === 'turtle', isTriG = format === 'trig',\n        isNTriples = /triple/.test(format), isNQuads = /quad/.test(format),\n        isN3 = this._n3Mode = /n3/.test(format),\n        isLineMode = isNTriples || isNQuads;\n    if (!(this._supportsNamedGraphs = !(isTurtle || isN3)))\n      this._readPredicateOrNamedGraph = this._readPredicate;\n    this._supportsQuads = !(isTurtle || isTriG || isNTriples || isN3);\n    // Disable relative IRIs in N-Triples or N-Quads mode\n    if (isLineMode)\n      this._resolveRelativeIRI = function (iri) { return null; };\n    this._blankNodePrefix = typeof options.blankNodePrefix !== 'string' ? '' :\n                              options.blankNodePrefix.replace(/^(?!_:)/, '_:');\n    this._lexer = options.lexer || new N3Lexer({ lineMode: isLineMode, n3: isN3 });\n    // Disable explicit quantifiers by default\n    this._explicitQuantifiers = !!options.explicitQuantifiers;\n  }\n\n  // ## Static class methods\n\n  // ### `_resetBlankNodePrefix` restarts blank node prefix identification\n  static _resetBlankNodePrefix() {\n    blankNodePrefix = 0;\n  }\n\n  // ## Private methods\n\n  // ### `_setBase` sets the base IRI to resolve relative IRIs\n  _setBase(baseIRI) {\n    if (!baseIRI) {\n      this._base = '';\n      this._basePath = '';\n    }\n    else {\n      // Remove fragment if present\n      var fragmentPos = baseIRI.indexOf('#');\n      if (fragmentPos >= 0)\n        baseIRI = baseIRI.substr(0, fragmentPos);\n      // Set base IRI and its components\n      this._base = baseIRI;\n      this._basePath   = baseIRI.indexOf('/') < 0 ? baseIRI :\n                         baseIRI.replace(/[^\\/?]*(?:\\?.*)?$/, '');\n      baseIRI = baseIRI.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\\/\\/[^\\/]*)?/i);\n      this._baseRoot   = baseIRI[0];\n      this._baseScheme = baseIRI[1];\n    }\n  }\n\n  // ### `_saveContext` stores the current parsing context\n  // when entering a new scope (list, blank node, formula)\n  _saveContext(type, graph, subject, predicate, object) {\n    var n3Mode = this._n3Mode;\n    this._contextStack.push({\n      subject: subject, predicate: predicate, object: object,\n      graph: graph, type: type,\n      inverse: n3Mode ? this._inversePredicate : false,\n      blankPrefix: n3Mode ? this._prefixes._ : '',\n      quantified: n3Mode ? this._quantified : null,\n    });\n    // The settings below only apply to N3 streams\n    if (n3Mode) {\n      // Every new scope resets the predicate direction\n      this._inversePredicate = false;\n      // In N3, blank nodes are scoped to a formula\n      // (using a dot as separator, as a blank node label cannot start with it)\n      this._prefixes._ = (this._graph ? this._graph.id.substr(2) + '.' : '.');\n      // Quantifiers are scoped to a formula\n      this._quantified = Object.create(this._quantified);\n    }\n  }\n\n  // ### `_restoreContext` restores the parent context\n  // when leaving a scope (list, blank node, formula)\n  _restoreContext() {\n    var context = this._contextStack.pop(), n3Mode = this._n3Mode;\n    this._subject   = context.subject;\n    this._predicate = context.predicate;\n    this._object    = context.object;\n    this._graph     = context.graph;\n    // The settings below only apply to N3 streams\n    if (n3Mode) {\n      this._inversePredicate = context.inverse;\n      this._prefixes._ = context.blankPrefix;\n      this._quantified = context.quantified;\n    }\n  }\n\n  // ### `_readInTopContext` reads a token when in the top context\n  _readInTopContext(token) {\n    switch (token.type) {\n    // If an EOF token arrives in the top context, signal that we're done\n    case 'eof':\n      if (this._graph !== null)\n        return this._error('Unclosed graph', token);\n      delete this._prefixes._;\n      return this._callback(null, null, this._prefixes);\n    // It could be a prefix declaration\n    case 'PREFIX':\n      this._sparqlStyle = true;\n    case '@prefix':\n      return this._readPrefix;\n    // It could be a base declaration\n    case 'BASE':\n      this._sparqlStyle = true;\n    case '@base':\n      return this._readBaseIRI;\n    // It could be a graph\n    case '{':\n      if (this._supportsNamedGraphs) {\n        this._graph = '';\n        this._subject = null;\n        return this._readSubject;\n      }\n    case 'GRAPH':\n      if (this._supportsNamedGraphs)\n        return this._readNamedGraphLabel;\n    // Otherwise, the next token must be a subject\n    default:\n      return this._readSubject(token);\n    }\n  }\n\n  // ### `_readEntity` reads an IRI, prefixed name, blank node, or variable\n  _readEntity(token, quantifier) {\n    var value;\n    switch (token.type) {\n    // Read a relative or absolute IRI\n    case 'IRI':\n    case 'typeIRI':\n      var iri = this._resolveIRI(token.value);\n      if (iri === null)\n        return this._error('Invalid IRI', token);\n      value = this._namedNode(iri);\n      break;\n    // Read a prefixed name\n    case 'type':\n    case 'prefixed':\n      var prefix = this._prefixes[token.prefix];\n      if (prefix === undefined)\n        return this._error('Undefined prefix \"' + token.prefix + ':\"', token);\n      value = this._namedNode(prefix + token.value);\n      break;\n    // Read a blank node\n    case 'blank':\n      value = this._blankNode(this._prefixes[token.prefix] + token.value);\n      break;\n    // Read a variable\n    case 'var':\n      value = this._variable(token.value.substr(1));\n      break;\n    // Everything else is not an entity\n    default:\n      return this._error('Expected entity but got ' + token.type, token);\n    }\n    // In N3 mode, replace the entity if it is quantified\n    if (!quantifier && this._n3Mode && (value.id in this._quantified))\n      value = this._quantified[value.id];\n    return value;\n  }\n\n  // ### `_readSubject` reads a quad's subject\n  _readSubject(token) {\n    this._predicate = null;\n    switch (token.type) {\n    case '[':\n      // Start a new quad with a new blank node as subject\n      this._saveContext('blank', this._graph,\n                        this._subject = this._blankNode(), null, null);\n      return this._readBlankNodeHead;\n    case '(':\n      // Start a new list\n      this._saveContext('list', this._graph, this.RDF_NIL, null, null);\n      this._subject = null;\n      return this._readListItem;\n    case '{':\n      // Start a new formula\n      if (!this._n3Mode)\n        return this._error('Unexpected graph', token);\n      this._saveContext('formula', this._graph,\n                        this._graph = this._blankNode(), null, null);\n      return this._readSubject;\n    case '}':\n       // No subject; the graph in which we are reading is closed instead\n      return this._readPunctuation(token);\n    case '@forSome':\n      if (!this._n3Mode)\n        return this._error('Unexpected \"@forSome\"', token);\n      this._subject = null;\n      this._predicate = this.N3_FORSOME;\n      this._quantifier = this._blankNode;\n      return this._readQuantifierList;\n    case '@forAll':\n      if (!this._n3Mode)\n        return this._error('Unexpected \"@forAll\"', token);\n      this._subject = null;\n      this._predicate = this.N3_FORALL;\n      this._quantifier = this._variable;\n      return this._readQuantifierList;\n    case 'literal':\n      if (!this._n3Mode)\n        return this._error('Unexpected literal', token);\n\n      if (token.prefix.length === 0) {\n        this._literalValue = token.value;\n        return this._completeSubjectLiteral;\n      }\n      else\n        this._subject = this._literal(token.value, this._namedNode(token.prefix));\n\n      break;\n    default:\n      // Read the subject entity\n      if ((this._subject = this._readEntity(token)) === undefined)\n        return;\n      // In N3 mode, the subject might be a path\n      if (this._n3Mode)\n        return this._getPathReader(this._readPredicateOrNamedGraph);\n    }\n\n    // The next token must be a predicate,\n    // or, if the subject was actually a graph IRI, a named graph\n    return this._readPredicateOrNamedGraph;\n  }\n\n  // ### `_readPredicate` reads a quad's predicate\n  _readPredicate(token) {\n    var type = token.type;\n    switch (type) {\n    case 'inverse':\n      this._inversePredicate = true;\n    case 'abbreviation':\n      this._predicate = this.ABBREVIATIONS[token.value];\n      break;\n    case '.':\n    case ']':\n    case '}':\n      // Expected predicate didn't come, must have been trailing semicolon\n      if (this._predicate === null)\n        return this._error('Unexpected ' + type, token);\n      this._subject = null;\n      return type === ']' ? this._readBlankNodeTail(token) : this._readPunctuation(token);\n    case ';':\n      // Additional semicolons can be safely ignored\n      return this._predicate !== null ? this._readPredicate :\n             this._error('Expected predicate but got ;', token);\n    case 'blank':\n      if (!this._n3Mode)\n        return this._error('Disallowed blank node as predicate', token);\n    default:\n      if ((this._predicate = this._readEntity(token)) === undefined)\n        return;\n    }\n    // The next token must be an object\n    return this._readObject;\n  }\n\n  // ### `_readObject` reads a quad's object\n  _readObject(token) {\n    switch (token.type) {\n    case 'literal':\n      // Regular literal, can still get a datatype or language\n      if (token.prefix.length === 0) {\n        this._literalValue = token.value;\n        return this._readDataTypeOrLang;\n      }\n      // Pre-datatyped string literal (prefix stores the datatype)\n      else\n        this._object = this._literal(token.value, this._namedNode(token.prefix));\n      break;\n    case '[':\n      // Start a new quad with a new blank node as subject\n      this._saveContext('blank', this._graph, this._subject, this._predicate,\n                        this._subject = this._blankNode());\n      return this._readBlankNodeHead;\n    case '(':\n      // Start a new list\n      this._saveContext('list', this._graph, this._subject, this._predicate, this.RDF_NIL);\n      this._subject = null;\n      return this._readListItem;\n    case '{':\n      // Start a new formula\n      if (!this._n3Mode)\n        return this._error('Unexpected graph', token);\n      this._saveContext('formula', this._graph, this._subject, this._predicate,\n                        this._graph = this._blankNode());\n      return this._readSubject;\n    default:\n      // Read the object entity\n      if ((this._object = this._readEntity(token)) === undefined)\n        return;\n      // In N3 mode, the object might be a path\n      if (this._n3Mode)\n        return this._getPathReader(this._getContextEndReader());\n    }\n    return this._getContextEndReader();\n  }\n\n  // ### `_readPredicateOrNamedGraph` reads a quad's predicate, or a named graph\n  _readPredicateOrNamedGraph(token) {\n    return token.type === '{' ? this._readGraph(token) : this._readPredicate(token);\n  }\n\n  // ### `_readGraph` reads a graph\n  _readGraph(token) {\n    if (token.type !== '{')\n      return this._error('Expected graph but got ' + token.type, token);\n    // The \"subject\" we read is actually the GRAPH's label\n    this._graph = this._subject, this._subject = null;\n    return this._readSubject;\n  }\n\n  // ### `_readBlankNodeHead` reads the head of a blank node\n  _readBlankNodeHead(token) {\n    if (token.type === ']') {\n      this._subject = null;\n      return this._readBlankNodeTail(token);\n    }\n    else {\n      this._predicate = null;\n      return this._readPredicate(token);\n    }\n  }\n\n  // ### `_readBlankNodeTail` reads the end of a blank node\n  _readBlankNodeTail(token) {\n    if (token.type !== ']')\n      return this._readBlankNodePunctuation(token);\n\n    // Store blank node quad\n    if (this._subject !== null)\n      this._emit(this._subject, this._predicate, this._object, this._graph);\n\n    // Restore the parent context containing this blank node\n    var empty = this._predicate === null;\n    this._restoreContext();\n    // If the blank node was the subject, continue reading the predicate\n    if (this._object === null)\n      // If the blank node was empty, it could be a named graph label\n      return empty ? this._readPredicateOrNamedGraph : this._readPredicateAfterBlank;\n    // If the blank node was the object, restore previous context and read punctuation\n    else\n      return this._getContextEndReader();\n  }\n\n  // ### `_readPredicateAfterBlank` reads a predicate after an anonymous blank node\n  _readPredicateAfterBlank(token) {\n    switch (token.type) {\n    case '.':\n    case '}':\n      // No predicate is coming if the triple is terminated here\n      this._subject = null;\n      return this._readPunctuation(token);\n    default:\n      return this._readPredicate(token);\n    }\n  }\n\n  // ### `_readListItem` reads items from a list\n  _readListItem(token) {\n    var item = null,                      // The item of the list\n        list = null,                      // The list itself\n        previousList = this._subject,     // The previous list that contains this list\n        stack = this._contextStack,       // The stack of parent contexts\n        parent = stack[stack.length - 1], // The parent containing the current list\n        next = this._readListItem;        // The next function to execute\n\n    switch (token.type) {\n    case '[':\n      // Stack the current list quad and start a new quad with a blank node as subject\n      this._saveContext('blank', this._graph,\n                        list = this._blankNode(), this.RDF_FIRST,\n                        this._subject = item = this._blankNode());\n      next = this._readBlankNodeHead;\n      break;\n    case '(':\n      // Stack the current list quad and start a new list\n      this._saveContext('list', this._graph,\n                        list = this._blankNode(), this.RDF_FIRST, this.RDF_NIL);\n      this._subject = null;\n      break;\n    case ')':\n      // Closing the list; restore the parent context\n      this._restoreContext();\n      // If this list is contained within a parent list, return the membership quad here.\n      // This will be `<parent list element> rdf:first <this list>.`.\n      if (stack.length !== 0 && stack[stack.length - 1].type === 'list')\n        this._emit(this._subject, this._predicate, this._object, this._graph);\n      // Was this list the parent's subject?\n      if (this._predicate === null) {\n        // The next token is the predicate\n        next = this._readPredicate;\n        // No list tail if this was an empty list\n        if (this._subject === this.RDF_NIL)\n          return next;\n      }\n      // The list was in the parent context's object\n      else {\n        next = this._getContextEndReader();\n        // No list tail if this was an empty list\n        if (this._object === this.RDF_NIL)\n          return next;\n      }\n      // Close the list by making the head nil\n      list = this.RDF_NIL;\n      break;\n    case 'literal':\n      // Regular literal, can still get a datatype or language\n      if (token.prefix.length === 0) {\n        this._literalValue = token.value;\n        next = this._readListItemDataTypeOrLang;\n      }\n      // Pre-datatyped string literal (prefix stores the datatype)\n      else {\n        item = this._literal(token.value, this._namedNode(token.prefix));\n        next = this._getContextEndReader();\n      }\n      break;\n    case '{':\n      // Start a new formula\n      if (!this._n3Mode)\n        return this._error('Unexpected graph', token);\n      this._saveContext('formula', this._graph, this._subject, this._predicate,\n                        this._graph = this._blankNode());\n      return this._readSubject;\n    default:\n      if ((item = this._readEntity(token)) === undefined)\n        return;\n    }\n\n     // Create a new blank node if no item head was assigned yet\n    if (list === null)\n      this._subject = list = this._blankNode();\n\n    // Is this the first element of the list?\n    if (previousList === null) {\n      // This list is either the subject or the object of its parent\n      if (parent.predicate === null)\n        parent.subject = list;\n      else\n        parent.object = list;\n    }\n    else {\n      // Continue the previous list with the current list\n      this._emit(previousList, this.RDF_REST, list, this._graph);\n    }\n    // If an item was read, add it to the list\n    if (item !== null) {\n      // In N3 mode, the item might be a path\n      if (this._n3Mode && (token.type === 'IRI' || token.type === 'prefixed')) {\n        // Create a new context to add the item's path\n        this._saveContext('item', this._graph, list, this.RDF_FIRST, item);\n        this._subject = item, this._predicate = null;\n        // _readPath will restore the context and output the item\n        return this._getPathReader(this._readListItem);\n      }\n      // Output the item\n      this._emit(list, this.RDF_FIRST, item, this._graph);\n    }\n    return next;\n  }\n\n  // ### `_readDataTypeOrLang` reads an _optional_ datatype or language\n  _readDataTypeOrLang(token) {\n    return this._completeObjectLiteral(token, false);\n  }\n\n\n  // ### `_readListItemDataTypeOrLang` reads an _optional_ datatype or language in a list\n  _readListItemDataTypeOrLang(token) {\n    return this._completeObjectLiteral(token, true);\n  }\n\n  // ### `_completeLiteral` completes a literal with an optional datatype or language\n  _completeLiteral(token) {\n    // Create a simple string literal by default\n    let literal = this._literal(this._literalValue);\n\n    switch (token.type) {\n    // Create a datatyped literal\n    case 'type':\n    case 'typeIRI':\n      var datatype = this._readEntity(token);\n      if (datatype === undefined) return; // No datatype means an error occurred\n      literal = this._literal(this._literalValue, datatype);\n      token = null;\n      break;\n    // Create a language-tagged string\n    case 'langcode':\n      literal = this._literal(this._literalValue, token.value);\n      token = null;\n      break;\n    }\n\n    return { token, literal };\n  }\n\n  // Completes a literal in subject position\n  _completeSubjectLiteral(token) {\n    this._subject = this._completeLiteral(token).literal;\n    return this._readPredicateOrNamedGraph;\n  }\n\n  // Completes a literal in object position\n  _completeObjectLiteral(token, listItem) {\n    const completed = this._completeLiteral(token);\n    if (!completed)\n      return;\n    this._object = completed.literal;\n\n    // If this literal was part of a list, write the item\n    // (we could also check the context stack, but passing in a flag is faster)\n    if (listItem)\n      this._emit(this._subject, this.RDF_FIRST, this._object, this._graph);\n    // If the token was consumed, continue with the rest of the input\n    if (completed.token === null)\n      return this._getContextEndReader();\n    // Otherwise, consume the token now\n    else {\n      this._readCallback = this._getContextEndReader();\n      return this._readCallback(completed.token);\n    }\n  }\n\n  // ### `_readFormulaTail` reads the end of a formula\n  _readFormulaTail(token) {\n    if (token.type !== '}')\n      return this._readPunctuation(token);\n\n    // Store the last quad of the formula\n    if (this._subject !== null)\n      this._emit(this._subject, this._predicate, this._object, this._graph);\n\n    // Restore the parent context containing this formula\n    this._restoreContext();\n    // If the formula was the subject, continue reading the predicate.\n    // If the formula was the object, read punctuation.\n    return this._object === null ? this._readPredicate : this._getContextEndReader();\n  }\n\n  // ### `_readPunctuation` reads punctuation between quads or quad parts\n  _readPunctuation(token) {\n    var next, subject = this._subject, graph = this._graph,\n        inversePredicate = this._inversePredicate;\n    switch (token.type) {\n    // A closing brace ends a graph\n    case '}':\n      if (this._graph === null)\n        return this._error('Unexpected graph closing', token);\n      if (this._n3Mode)\n        return this._readFormulaTail(token);\n      this._graph = null;\n    // A dot just ends the statement, without sharing anything with the next\n    case '.':\n      this._subject = null;\n      next = this._contextStack.length ? this._readSubject : this._readInTopContext;\n      if (inversePredicate) this._inversePredicate = false;\n      break;\n    // Semicolon means the subject is shared; predicate and object are different\n    case ';':\n      next = this._readPredicate;\n      break;\n    // Comma means both the subject and predicate are shared; the object is different\n    case ',':\n      next = this._readObject;\n      break;\n    default:\n      // An entity means this is a quad (only allowed if not already inside a graph)\n      if (this._supportsQuads && this._graph === null && (graph = this._readEntity(token)) !== undefined) {\n        next = this._readQuadPunctuation;\n        break;\n      }\n      return this._error('Expected punctuation to follow \"' + this._object.id + '\"', token);\n    }\n    // A quad has been completed now, so return it\n    if (subject !== null) {\n      var predicate = this._predicate, object = this._object;\n      if (!inversePredicate)\n        this._emit(subject, predicate, object,  graph);\n      else\n        this._emit(object,  predicate, subject, graph);\n    }\n    return next;\n  }\n\n    // ### `_readBlankNodePunctuation` reads punctuation in a blank node\n  _readBlankNodePunctuation(token) {\n    var next;\n    switch (token.type) {\n    // Semicolon means the subject is shared; predicate and object are different\n    case ';':\n      next = this._readPredicate;\n      break;\n    // Comma means both the subject and predicate are shared; the object is different\n    case ',':\n      next = this._readObject;\n      break;\n    default:\n      return this._error('Expected punctuation to follow \"' + this._object.id + '\"', token);\n    }\n    // A quad has been completed now, so return it\n    this._emit(this._subject, this._predicate, this._object, this._graph);\n    return next;\n  }\n\n  // ### `_readQuadPunctuation` reads punctuation after a quad\n  _readQuadPunctuation(token) {\n    if (token.type !== '.')\n      return this._error('Expected dot to follow quad', token);\n    return this._readInTopContext;\n  }\n\n  // ### `_readPrefix` reads the prefix of a prefix declaration\n  _readPrefix(token) {\n    if (token.type !== 'prefix')\n      return this._error('Expected prefix to follow @prefix', token);\n    this._prefix = token.value;\n    return this._readPrefixIRI;\n  }\n\n  // ### `_readPrefixIRI` reads the IRI of a prefix declaration\n  _readPrefixIRI(token) {\n    if (token.type !== 'IRI')\n      return this._error('Expected IRI to follow prefix \"' + this._prefix + ':\"', token);\n    var prefixNode = this._readEntity(token);\n    this._prefixes[this._prefix] = prefixNode.value;\n    this._prefixCallback(this._prefix, prefixNode);\n    return this._readDeclarationPunctuation;\n  }\n\n  // ### `_readBaseIRI` reads the IRI of a base declaration\n  _readBaseIRI(token) {\n    var iri = token.type === 'IRI' && this._resolveIRI(token.value);\n    if (!iri)\n      return this._error('Expected valid IRI to follow base declaration', token);\n    this._setBase(iri);\n    return this._readDeclarationPunctuation;\n  }\n\n  // ### `_readNamedGraphLabel` reads the label of a named graph\n  _readNamedGraphLabel(token) {\n    switch (token.type) {\n    case 'IRI':\n    case 'blank':\n    case 'prefixed':\n      return this._readSubject(token), this._readGraph;\n    case '[':\n      return this._readNamedGraphBlankLabel;\n    default:\n      return this._error('Invalid graph label', token);\n    }\n  }\n\n  // ### `_readNamedGraphLabel` reads a blank node label of a named graph\n  _readNamedGraphBlankLabel(token) {\n    if (token.type !== ']')\n      return this._error('Invalid graph label', token);\n    this._subject = this._blankNode();\n    return this._readGraph;\n  }\n\n  // ### `_readDeclarationPunctuation` reads the punctuation of a declaration\n  _readDeclarationPunctuation(token) {\n    // SPARQL-style declarations don't have punctuation\n    if (this._sparqlStyle) {\n      this._sparqlStyle = false;\n      return this._readInTopContext(token);\n    }\n\n    if (token.type !== '.')\n      return this._error('Expected declaration to end with a dot', token);\n    return this._readInTopContext;\n  }\n\n  // Reads a list of quantified symbols from a @forSome or @forAll statement\n  _readQuantifierList(token) {\n    var entity;\n    switch (token.type) {\n    case 'IRI':\n    case 'prefixed':\n      if ((entity = this._readEntity(token, true)) !== undefined)\n        break;\n    default:\n      return this._error('Unexpected ' + token.type, token);\n    }\n    // Without explicit quantifiers, map entities to a quantified entity\n    if (!this._explicitQuantifiers)\n      this._quantified[entity.id] = this._quantifier(this._blankNode().value);\n    // With explicit quantifiers, output the reified quantifier\n    else {\n      // If this is the first item, start a new quantifier list\n      if (this._subject === null)\n        this._emit(this._graph || this.DEFAULTGRAPH, this._predicate,\n                   this._subject = this._blankNode(), this.QUANTIFIERS_GRAPH);\n      // Otherwise, continue the previous list\n      else\n        this._emit(this._subject, this.RDF_REST,\n                   this._subject = this._blankNode(), this.QUANTIFIERS_GRAPH);\n      // Output the list item\n      this._emit(this._subject, this.RDF_FIRST, entity, this.QUANTIFIERS_GRAPH);\n    }\n    return this._readQuantifierPunctuation;\n  }\n\n  // Reads punctuation from a @forSome or @forAll statement\n  _readQuantifierPunctuation(token) {\n    // Read more quantifiers\n    if (token.type === ',')\n      return this._readQuantifierList;\n    // End of the quantifier list\n    else {\n      // With explicit quantifiers, close the quantifier list\n      if (this._explicitQuantifiers) {\n        this._emit(this._subject, this.RDF_REST, this.RDF_NIL, this.QUANTIFIERS_GRAPH);\n        this._subject = null;\n      }\n      // Read a dot\n      this._readCallback = this._getContextEndReader();\n      return this._readCallback(token);\n    }\n  }\n\n  // ### `_getPathReader` reads a potential path and then resumes with the given function\n  _getPathReader(afterPath) {\n    this._afterPath = afterPath;\n    return this._readPath;\n  }\n\n  // ### `_readPath` reads a potential path\n  _readPath(token) {\n    switch (token.type) {\n    // Forward path\n    case '!': return this._readForwardPath;\n    // Backward path\n    case '^': return this._readBackwardPath;\n    // Not a path; resume reading where we left off\n    default:\n      var stack = this._contextStack, parent = stack.length && stack[stack.length - 1];\n      // If we were reading a list item, we still need to output it\n      if (parent && parent.type === 'item') {\n        // The list item is the remaining subejct after reading the path\n        var item = this._subject;\n        // Switch back to the context of the list\n        this._restoreContext();\n        // Output the list item\n        this._emit(this._subject, this.RDF_FIRST, item, this._graph);\n      }\n      return this._afterPath(token);\n    }\n  }\n\n  // ### `_readForwardPath` reads a '!' path\n  _readForwardPath(token) {\n    var subject, predicate, object = this._blankNode();\n    // The next token is the predicate\n    if ((predicate = this._readEntity(token)) === undefined)\n      return;\n    // If we were reading a subject, replace the subject by the path's object\n    if (this._predicate === null)\n      subject = this._subject, this._subject = object;\n    // If we were reading an object, replace the subject by the path's object\n    else\n      subject = this._object,  this._object  = object;\n    // Emit the path's current quad and read its next section\n    this._emit(subject, predicate, object, this._graph);\n    return this._readPath;\n  }\n\n  // ### `_readBackwardPath` reads a '^' path\n  _readBackwardPath(token) {\n    var subject = this._blankNode(), predicate, object;\n    // The next token is the predicate\n    if ((predicate = this._readEntity(token)) === undefined)\n      return;\n    // If we were reading a subject, replace the subject by the path's subject\n    if (this._predicate === null)\n      object = this._subject, this._subject = subject;\n    // If we were reading an object, replace the subject by the path's subject\n    else\n      object = this._object,  this._object  = subject;\n    // Emit the path's current quad and read its next section\n    this._emit(subject, predicate, object, this._graph);\n    return this._readPath;\n  }\n\n  // ### `_getContextEndReader` gets the next reader function at the end of a context\n  _getContextEndReader() {\n    var contextStack = this._contextStack;\n    if (!contextStack.length)\n      return this._readPunctuation;\n\n    switch (contextStack[contextStack.length - 1].type) {\n    case 'blank':\n      return this._readBlankNodeTail;\n    case 'list':\n      return this._readListItem;\n    case 'formula':\n      return this._readFormulaTail;\n    }\n  }\n\n  // ### `_emit` sends a quad through the callback\n  _emit(subject, predicate, object, graph) {\n    this._callback(null, this._quad(subject, predicate, object, graph || this.DEFAULTGRAPH));\n  }\n\n  // ### `_error` emits an error message through the callback\n  _error(message, token) {\n    var err = new Error(message + ' on line ' + token.line + '.');\n    err.context = {\n      token: token,\n      line: token.line,\n      previousToken: this._lexer.previousToken,\n    };\n    this._callback(err);\n    this._callback = noop;\n  }\n\n  // ### `_resolveIRI` resolves an IRI against the base path\n  _resolveIRI(iri) {\n    return /^[a-z][a-z0-9+.-]*:/i.test(iri) ? iri : this._resolveRelativeIRI(iri);\n  }\n\n  // ### `_resolveRelativeIRI` resolves an IRI against the base path,\n  // assuming that a base path has been set and that the IRI is indeed relative\n  _resolveRelativeIRI(iri) {\n    // An empty relative IRI indicates the base IRI\n    if (!iri.length)\n      return this._base;\n    // Decide resolving strategy based in the first character\n    switch (iri[0]) {\n    // Resolve relative fragment IRIs against the base IRI\n    case '#': return this._base + iri;\n    // Resolve relative query string IRIs by replacing the query string\n    case '?': return this._base.replace(/(?:\\?.*)?$/, iri);\n    // Resolve root-relative IRIs at the root of the base IRI\n    case '/':\n      // Resolve scheme-relative IRIs to the scheme\n      return (iri[1] === '/' ? this._baseScheme : this._baseRoot) + this._removeDotSegments(iri);\n    // Resolve all other IRIs at the base IRI's path\n    default:\n      // Relative IRIs cannot contain a colon in the first path segment\n      return (/^[^/:]*:/.test(iri)) ? null : this._removeDotSegments(this._basePath + iri);\n    }\n  }\n\n  // ### `_removeDotSegments` resolves './' and '../' path segments in an IRI as per RFC3986\n  _removeDotSegments(iri) {\n    // Don't modify the IRI if it does not contain any dot segments\n    if (!/(^|\\/)\\.\\.?($|[/#?])/.test(iri))\n      return iri;\n\n    // Start with an imaginary slash before the IRI in order to resolve trailing './' and '../'\n    var result = '', length = iri.length, i = -1, pathStart = -1, segmentStart = 0, next = '/';\n\n    while (i < length) {\n      switch (next) {\n      // The path starts with the first slash after the authority\n      case ':':\n        if (pathStart < 0) {\n          // Skip two slashes before the authority\n          if (iri[++i] === '/' && iri[++i] === '/')\n            // Skip to slash after the authority\n            while ((pathStart = i + 1) < length && iri[pathStart] !== '/')\n              i = pathStart;\n        }\n        break;\n      // Don't modify a query string or fragment\n      case '?':\n      case '#':\n        i = length;\n        break;\n      // Handle '/.' or '/..' path segments\n      case '/':\n        if (iri[i + 1] === '.') {\n          next = iri[++i + 1];\n          switch (next) {\n          // Remove a '/.' segment\n          case '/':\n            result += iri.substring(segmentStart, i - 1);\n            segmentStart = i + 1;\n            break;\n          // Remove a trailing '/.' segment\n          case undefined:\n          case '?':\n          case '#':\n            return result + iri.substring(segmentStart, i) + iri.substr(i + 1);\n          // Remove a '/..' segment\n          case '.':\n            next = iri[++i + 1];\n            if (next === undefined || next === '/' || next === '?' || next === '#') {\n              result += iri.substring(segmentStart, i - 2);\n              // Try to remove the parent path from result\n              if ((segmentStart = result.lastIndexOf('/')) >= pathStart)\n                result = result.substr(0, segmentStart);\n              // Remove a trailing '/..' segment\n              if (next !== '/')\n                return result + '/' + iri.substr(i + 1);\n              segmentStart = i + 1;\n            }\n          }\n        }\n      }\n      next = iri[++i];\n    }\n    return result + iri.substring(segmentStart);\n  }\n\n  // ## Public methods\n\n  // ### `parse` parses the N3 input and emits each parsed quad through the callback\n  parse(input, quadCallback, prefixCallback) {\n    var self = this;\n    // The read callback is the next function to be executed when a token arrives.\n    // We start reading in the top context.\n    this._readCallback = this._readInTopContext;\n    this._sparqlStyle = false;\n    this._prefixes = Object.create(null);\n    this._prefixes._ = this._blankNodePrefix ? this._blankNodePrefix.substr(2)\n                                             : 'b' + blankNodePrefix++ + '_';\n    this._prefixCallback = prefixCallback || noop;\n    this._inversePredicate = false;\n    this._quantified = Object.create(null);\n\n    // Parse synchronously if no quad callback is given\n    if (!quadCallback) {\n      var quads = [], error;\n      this._callback = function (e, t) { e ? (error = e) : t && quads.push(t); };\n      this._lexer.tokenize(input).every(function (token) {\n        return self._readCallback = self._readCallback(token);\n      });\n      if (error) throw error;\n      return quads;\n    }\n\n    // Parse asynchronously otherwise, executing the read callback when a token arrives\n    this._callback = quadCallback;\n    this._lexer.tokenize(input, function (error, token) {\n      if (error !== null)\n        self._callback(error), self._callback = noop;\n      else if (self._readCallback)\n        self._readCallback = self._readCallback(token);\n    });\n  }\n}\n\n// The empty function\nfunction noop() {}\n\n// Initializes the parser with the given data factory\nfunction initDataFactory(parser, factory) {\n  // Set factory methods\n  var namedNode = factory.namedNode;\n  parser._namedNode   = namedNode;\n  parser._blankNode   = factory.blankNode;\n  parser._literal     = factory.literal;\n  parser._variable    = factory.variable;\n  parser._quad        = factory.quad;\n  parser.DEFAULTGRAPH = factory.defaultGraph();\n\n  // Set common named nodes\n  parser.RDF_FIRST  = namedNode(namespaces.rdf.first);\n  parser.RDF_REST   = namedNode(namespaces.rdf.rest);\n  parser.RDF_NIL    = namedNode(namespaces.rdf.nil);\n  parser.N3_FORALL  = namedNode(namespaces.r.forAll);\n  parser.N3_FORSOME = namedNode(namespaces.r.forSome);\n  parser.ABBREVIATIONS = {\n    'a': namedNode(namespaces.rdf.type),\n    '=': namedNode(namespaces.owl.sameAs),\n    '>': namedNode(namespaces.log.implies),\n  };\n  parser.QUANTIFIERS_GRAPH = namedNode('urn:n3:quantifiers');\n}\ninitDataFactory(N3Parser.prototype, N3DataFactory);\n","// **N3Writer** writes N3 documents.\nimport namespaces from './IRIs';\nimport N3DataFactory from './N3DataFactory';\n\nconst DEFAULTGRAPH = N3DataFactory.defaultGraph();\n\nconst { rdf, xsd } = namespaces;\n\n// Characters in literals that require escaping\nvar escape    = /[\"\\\\\\t\\n\\r\\b\\f\\u0000-\\u0019\\ud800-\\udbff]/,\n    escapeAll = /[\"\\\\\\t\\n\\r\\b\\f\\u0000-\\u0019]|[\\ud800-\\udbff][\\udc00-\\udfff]/g,\n    escapedCharacters = {\n      '\\\\': '\\\\\\\\', '\"': '\\\\\"', '\\t': '\\\\t',\n      '\\n': '\\\\n', '\\r': '\\\\r', '\\b': '\\\\b', '\\f': '\\\\f',\n    };\n\n// ## Placeholder class to represent already pretty-printed terms\nclass SerializedTerm extends N3DataFactory.internal.Term {\n  // Pretty-printed nodes are not equal to any other node\n  // (e.g., [] does not equal [])\n  equals() {\n    return false;\n  }\n}\n\n// ## Constructor\nexport default class N3Writer {\n  constructor(outputStream, options) {\n    // ### `_prefixRegex` matches a prefixed name or IRI that begins with one of the added prefixes\n    this._prefixRegex = /$0^/;\n\n    // Shift arguments if the first argument is not a stream\n    if (outputStream && typeof outputStream.write !== 'function')\n      options = outputStream, outputStream = null;\n    options = options || {};\n    this._lists = options.lists;\n\n    // If no output stream given, send the output as string through the end callback\n    if (!outputStream) {\n      var output = '';\n      this._outputStream = {\n        write(chunk, encoding, done) { output += chunk; done && done(); },\n        end:   function (done) { done && done(null, output); },\n      };\n      this._endStream = true;\n    }\n    else {\n      this._outputStream = outputStream;\n      this._endStream = options.end === undefined ? true : !!options.end;\n    }\n\n    // Initialize writer, depending on the format\n    this._subject = null;\n    if (!(/triple|quad/i).test(options.format)) {\n      this._graph = DEFAULTGRAPH;\n      this._prefixIRIs = Object.create(null);\n      options.prefixes && this.addPrefixes(options.prefixes);\n    }\n    else {\n      this._writeQuad = this._writeQuadLine;\n    }\n  }\n\n  // ## Private methods\n\n  // ### Whether the current graph is the default graph\n  get _inDefaultGraph() {\n    return DEFAULTGRAPH.equals(this._graph);\n  }\n\n  // ### `_write` writes the argument to the output stream\n  _write(string, callback) {\n    this._outputStream.write(string, 'utf8', callback);\n  }\n\n  // ### `_writeQuad` writes the quad to the output stream\n  _writeQuad(subject, predicate, object, graph, done) {\n    try {\n      // Write the graph's label if it has changed\n      if (!graph.equals(this._graph)) {\n        // Close the previous graph and start the new one\n        this._write((this._subject === null ? '' : (this._inDefaultGraph ? '.\\n' : '\\n}\\n')) +\n                    (DEFAULTGRAPH.equals(graph) ? '' : this._encodeIriOrBlank(graph) + ' {\\n'));\n        this._graph = graph;\n        this._subject = null;\n      }\n      // Don't repeat the subject if it's the same\n      if (subject.equals(this._subject)) {\n        // Don't repeat the predicate if it's the same\n        if (predicate.equals(this._predicate))\n          this._write(', ' + this._encodeObject(object), done);\n        // Same subject, different predicate\n        else\n          this._write(';\\n    ' +\n                      this._encodePredicate(this._predicate = predicate) + ' ' +\n                      this._encodeObject(object), done);\n      }\n      // Different subject; write the whole quad\n      else\n        this._write((this._subject === null ? '' : '.\\n') +\n                    this._encodeIriOrBlank(this._subject = subject) + ' ' +\n                    this._encodePredicate(this._predicate = predicate) + ' ' +\n                    this._encodeObject(object), done);\n    }\n    catch (error) { done && done(error); }\n  }\n\n  // ### `_writeQuadLine` writes the quad to the output stream as a single line\n  _writeQuadLine(subject, predicate, object, graph, done) {\n    // Write the quad without prefixes\n    delete this._prefixMatch;\n    this._write(this.quadToString(subject, predicate, object, graph), done);\n  }\n\n  // ### `quadToString` serializes a quad as a string\n  quadToString(subject, predicate, object, graph) {\n    return  this._encodeIriOrBlank(subject)   + ' ' +\n            this._encodeIriOrBlank(predicate) + ' ' +\n            this._encodeObject(object) +\n            (graph && graph.value ? ' ' + this._encodeIriOrBlank(graph) + ' .\\n' : ' .\\n');\n  }\n\n  // ### `quadsToString` serializes an array of quads as a string\n  quadsToString(quads) {\n    return quads.map(function (t) {\n      return this.quadToString(t.subject, t.predicate, t.object, t.graph);\n    }, this).join('');\n  }\n\n  // ### `_encodeIriOrBlank` represents an IRI or blank node\n  _encodeIriOrBlank(entity) {\n    // A blank node or list is represented as-is\n    if (entity.termType !== 'NamedNode') {\n      // If it is a list head, pretty-print it\n      if (this._lists && (entity.value in this._lists))\n        entity = this.list(this._lists[entity.value]);\n      return 'id' in entity ? entity.id : '_:' + entity.value;\n    }\n    // Escape special characters\n    var iri = entity.value;\n    if (escape.test(iri))\n      iri = iri.replace(escapeAll, characterReplacer);\n    // Try to represent the IRI as prefixed name\n    var prefixMatch = this._prefixRegex.exec(iri);\n    return !prefixMatch ? '<' + iri + '>' :\n           (!prefixMatch[1] ? iri : this._prefixIRIs[prefixMatch[1]] + prefixMatch[2]);\n  }\n\n  // ### `_encodeLiteral` represents a literal\n  _encodeLiteral(literal) {\n    // Escape special characters\n    var value = literal.value;\n    if (escape.test(value))\n      value = value.replace(escapeAll, characterReplacer);\n    // Write the literal, possibly with type or language\n    if (literal.language)\n      return '\"' + value + '\"@' + literal.language;\n    else if (literal.datatype.value !== xsd.string)\n      return '\"' + value + '\"^^' + this._encodeIriOrBlank(literal.datatype);\n    else\n      return '\"' + value + '\"';\n  }\n\n  // ### `_encodePredicate` represents a predicate\n  _encodePredicate(predicate) {\n    return predicate.value === rdf.type ? 'a' : this._encodeIriOrBlank(predicate);\n  }\n\n  // ### `_encodeObject` represents an object\n  _encodeObject(object) {\n    return object.termType === 'Literal' ? this._encodeLiteral(object) : this._encodeIriOrBlank(object);\n  }\n\n  // ### `_blockedWrite` replaces `_write` after the writer has been closed\n  _blockedWrite() {\n    throw new Error('Cannot write because the writer has been closed.');\n  }\n\n  // ### `addQuad` adds the quad to the output stream\n  addQuad(subject, predicate, object, graph, done) {\n    // The quad was given as an object, so shift parameters\n    if (object === undefined)\n      this._writeQuad(subject.subject, subject.predicate, subject.object, subject.graph, predicate);\n    // The optional `graph` parameter was not provided\n    else if (typeof graph === 'function')\n      this._writeQuad(subject, predicate, object, DEFAULTGRAPH, graph);\n    // The `graph` parameter was provided\n    else\n      this._writeQuad(subject, predicate, object, graph || DEFAULTGRAPH, done);\n  }\n\n  // ### `addQuads` adds the quads to the output stream\n  addQuads(quads) {\n    for (var i = 0; i < quads.length; i++)\n      this.addQuad(quads[i]);\n  }\n\n  // ### `addPrefix` adds the prefix to the output stream\n  addPrefix(prefix, iri, done) {\n    var prefixes = {};\n    prefixes[prefix] = iri;\n    this.addPrefixes(prefixes, done);\n  }\n\n  // ### `addPrefixes` adds the prefixes to the output stream\n  addPrefixes(prefixes, done) {\n    var prefixIRIs = this._prefixIRIs, hasPrefixes = false;\n    for (var prefix in prefixes) {\n      var iri = prefixes[prefix];\n      if (typeof iri !== 'string')\n        iri = iri.value;\n      hasPrefixes = true;\n      // Finish a possible pending quad\n      if (this._subject !== null) {\n        this._write(this._inDefaultGraph ? '.\\n' : '\\n}\\n');\n        this._subject = null, this._graph = '';\n      }\n      // Store and write the prefix\n      prefixIRIs[iri] = (prefix += ':');\n      this._write('@prefix ' + prefix + ' <' + iri + '>.\\n');\n    }\n    // Recreate the prefix matcher\n    if (hasPrefixes) {\n      var IRIlist = '', prefixList = '';\n      for (var prefixIRI in prefixIRIs) {\n        IRIlist += IRIlist ? '|' + prefixIRI : prefixIRI;\n        prefixList += (prefixList ? '|' : '') + prefixIRIs[prefixIRI];\n      }\n      IRIlist = IRIlist.replace(/[\\]\\/\\(\\)\\*\\+\\?\\.\\\\\\$]/g, '\\\\$&');\n      this._prefixRegex = new RegExp('^(?:' + prefixList + ')[^\\/]*$|' +\n                                     '^(' + IRIlist + ')([a-zA-Z][\\\\-_a-zA-Z0-9]*)$');\n    }\n    // End a prefix block with a newline\n    this._write(hasPrefixes ? '\\n' : '', done);\n  }\n\n  // ### `blank` creates a blank node with the given content\n  blank(predicate, object) {\n    var children = predicate, child, length;\n    // Empty blank node\n    if (predicate === undefined)\n      children = [];\n    // Blank node passed as blank(Term(\"predicate\"), Term(\"object\"))\n    else if (predicate.termType)\n      children = [{ predicate: predicate, object: object }];\n    // Blank node passed as blank({ predicate: predicate, object: object })\n    else if (!('length' in predicate))\n      children = [predicate];\n\n    switch (length = children.length) {\n    // Generate an empty blank node\n    case 0:\n      return new SerializedTerm('[]');\n    // Generate a non-nested one-triple blank node\n    case 1:\n      child = children[0];\n      if (!(child.object instanceof SerializedTerm))\n        return new SerializedTerm('[ ' + this._encodePredicate(child.predicate) + ' ' +\n                                  this._encodeObject(child.object) + ' ]');\n    // Generate a multi-triple or nested blank node\n    default:\n      var contents = '[';\n      // Write all triples in order\n      for (var i = 0; i < length; i++) {\n        child = children[i];\n        // Write only the object is the predicate is the same as the previous\n        if (child.predicate.equals(predicate))\n          contents += ', ' + this._encodeObject(child.object);\n        // Otherwise, write the predicate and the object\n        else {\n          contents += (i ? ';\\n  ' : '\\n  ') +\n                      this._encodePredicate(child.predicate) + ' ' +\n                      this._encodeObject(child.object);\n          predicate = child.predicate;\n        }\n      }\n      return new SerializedTerm(contents + '\\n]');\n    }\n  }\n\n  // ### `list` creates a list node with the given content\n  list(elements) {\n    var length = elements && elements.length || 0, contents = new Array(length);\n    for (var i = 0; i < length; i++)\n      contents[i] = this._encodeObject(elements[i]);\n    return new SerializedTerm('(' + contents.join(' ') + ')');\n  }\n\n  // ### `end` signals the end of the output stream\n  end(done) {\n    // Finish a possible pending quad\n    if (this._subject !== null) {\n      this._write(this._inDefaultGraph ? '.\\n' : '\\n}\\n');\n      this._subject = null;\n    }\n    // Disallow further writing\n    this._write = this._blockedWrite;\n\n    // Try to end the underlying stream, ensuring done is called exactly one time\n    var singleDone = done && function (error, result) { singleDone = null, done(error, result); };\n    if (this._endStream) {\n      try { return this._outputStream.end(singleDone); }\n      catch (error) { /* error closing stream */ }\n    }\n    singleDone && singleDone();\n  }\n}\n\n// Replaces a character by its escaped version\nfunction characterReplacer(character) {\n  // Replace a single character by its escaped version\n  var result = escapedCharacters[character];\n  if (result === undefined) {\n    // Replace a single character with its 4-bit unicode escape sequence\n    if (character.length === 1) {\n      result = character.charCodeAt(0).toString(16);\n      result = '\\\\u0000'.substr(0, 6 - result.length) + result;\n    }\n    // Replace a surrogate pair with its 8-bit unicode escape sequence\n    else {\n      result = ((character.charCodeAt(0) - 0xD800) * 0x400 +\n                 character.charCodeAt(1) + 0x2400).toString(16);\n      result = '\\\\U00000000'.substr(0, 10 - result.length) + result;\n    }\n  }\n  return result;\n}\n","'use strict';\n\nvar domain;\n\n// This constructor is used to store event handlers. Instantiating this is\n// faster than explicitly calling `Object.create(null)` to get a \"clean\" empty\n// object (tested with v8 v4.9).\nfunction EventHandlers() {}\nEventHandlers.prototype = Object.create(null);\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nexport default EventEmitter;\nexport {EventEmitter};\n\n// nodejs oddity\n// require('events') === require('events').EventEmitter\nEventEmitter.EventEmitter = EventEmitter\n\nEventEmitter.usingDomains = false;\n\nEventEmitter.prototype.domain = undefined;\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\nEventEmitter.init = function() {\n  this.domain = null;\n  if (EventEmitter.usingDomains) {\n    // if there is an active domain, then attach to it.\n    if (domain.active && !(this instanceof domain.Domain)) {\n      this.domain = domain.active;\n    }\n  }\n\n  if (!this._events || this._events === Object.getPrototypeOf(this)._events) {\n    this._events = new EventHandlers();\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || isNaN(n))\n    throw new TypeError('\"n\" argument must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nfunction $getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return $getMaxListeners(this);\n};\n\n// These standalone emit* functions are used to optimize calling of event\n// handlers for fast cases because emit() itself often has a variable number of\n// arguments and can be deoptimized because of that. These functions always have\n// the same number of arguments and thus do not get deoptimized, so the code\n// inside them can execute faster.\nfunction emitNone(handler, isFn, self) {\n  if (isFn)\n    handler.call(self);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self);\n  }\n}\nfunction emitOne(handler, isFn, self, arg1) {\n  if (isFn)\n    handler.call(self, arg1);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self, arg1);\n  }\n}\nfunction emitTwo(handler, isFn, self, arg1, arg2) {\n  if (isFn)\n    handler.call(self, arg1, arg2);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self, arg1, arg2);\n  }\n}\nfunction emitThree(handler, isFn, self, arg1, arg2, arg3) {\n  if (isFn)\n    handler.call(self, arg1, arg2, arg3);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self, arg1, arg2, arg3);\n  }\n}\n\nfunction emitMany(handler, isFn, self, args) {\n  if (isFn)\n    handler.apply(self, args);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].apply(self, args);\n  }\n}\n\nEventEmitter.prototype.emit = function emit(type) {\n  var er, handler, len, args, i, events, domain;\n  var needDomainExit = false;\n  var doError = (type === 'error');\n\n  events = this._events;\n  if (events)\n    doError = (doError && events.error == null);\n  else if (!doError)\n    return false;\n\n  domain = this.domain;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    er = arguments[1];\n    if (domain) {\n      if (!er)\n        er = new Error('Uncaught, unspecified \"error\" event');\n      er.domainEmitter = this;\n      er.domain = domain;\n      er.domainThrown = false;\n      domain.emit('error', er);\n    } else if (er instanceof Error) {\n      throw er; // Unhandled 'error' event\n    } else {\n      // At least give some kind of context to the user\n      var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n      err.context = er;\n      throw err;\n    }\n    return false;\n  }\n\n  handler = events[type];\n\n  if (!handler)\n    return false;\n\n  var isFn = typeof handler === 'function';\n  len = arguments.length;\n  switch (len) {\n    // fast cases\n    case 1:\n      emitNone(handler, isFn, this);\n      break;\n    case 2:\n      emitOne(handler, isFn, this, arguments[1]);\n      break;\n    case 3:\n      emitTwo(handler, isFn, this, arguments[1], arguments[2]);\n      break;\n    case 4:\n      emitThree(handler, isFn, this, arguments[1], arguments[2], arguments[3]);\n      break;\n    // slower\n    default:\n      args = new Array(len - 1);\n      for (i = 1; i < len; i++)\n        args[i - 1] = arguments[i];\n      emitMany(handler, isFn, this, args);\n  }\n\n  if (needDomainExit)\n    domain.exit();\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  if (typeof listener !== 'function')\n    throw new TypeError('\"listener\" argument must be a function');\n\n  events = target._events;\n  if (!events) {\n    events = target._events = new EventHandlers();\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (!existing) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] = prepend ? [listener, existing] :\n                                          [existing, listener];\n    } else {\n      // If we've already got an array, just append.\n      if (prepend) {\n        existing.unshift(listener);\n      } else {\n        existing.push(listener);\n      }\n    }\n\n    // Check for listener leak\n    if (!existing.warned) {\n      m = $getMaxListeners(target);\n      if (m && m > 0 && existing.length > m) {\n        existing.warned = true;\n        var w = new Error('Possible EventEmitter memory leak detected. ' +\n                            existing.length + ' ' + type + ' listeners added. ' +\n                            'Use emitter.setMaxListeners() to increase limit');\n        w.name = 'MaxListenersExceededWarning';\n        w.emitter = target;\n        w.type = type;\n        w.count = existing.length;\n        emitWarning(w);\n      }\n    }\n  }\n\n  return target;\n}\nfunction emitWarning(e) {\n  typeof console.warn === 'function' ? console.warn(e) : console.log(e);\n}\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction _onceWrap(target, type, listener) {\n  var fired = false;\n  function g() {\n    target.removeListener(type, g);\n    if (!fired) {\n      fired = true;\n      listener.apply(target, arguments);\n    }\n  }\n  g.listener = listener;\n  return g;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  if (typeof listener !== 'function')\n    throw new TypeError('\"listener\" argument must be a function');\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      if (typeof listener !== 'function')\n        throw new TypeError('\"listener\" argument must be a function');\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      if (typeof listener !== 'function')\n        throw new TypeError('\"listener\" argument must be a function');\n\n      events = this._events;\n      if (!events)\n        return this;\n\n      list = events[type];\n      if (!list)\n        return this;\n\n      if (list === listener || (list.listener && list.listener === listener)) {\n        if (--this._eventsCount === 0)\n          this._events = new EventHandlers();\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length; i-- > 0;) {\n          if (list[i] === listener ||\n              (list[i].listener && list[i].listener === listener)) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (list.length === 1) {\n          list[0] = undefined;\n          if (--this._eventsCount === 0) {\n            this._events = new EventHandlers();\n            return this;\n          } else {\n            delete events[type];\n          }\n        } else {\n          spliceOne(list, position);\n        }\n\n        if (events.removeListener)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events;\n\n      events = this._events;\n      if (!events)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (!events.removeListener) {\n        if (arguments.length === 0) {\n          this._events = new EventHandlers();\n          this._eventsCount = 0;\n        } else if (events[type]) {\n          if (--this._eventsCount === 0)\n            this._events = new EventHandlers();\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        for (var i = 0, key; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = new EventHandlers();\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners) {\n        // LIFO order\n        do {\n          this.removeListener(type, listeners[listeners.length - 1]);\n        } while (listeners[0]);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  var evlistener;\n  var ret;\n  var events = this._events;\n\n  if (!events)\n    ret = [];\n  else {\n    evlistener = events[type];\n    if (!evlistener)\n      ret = [];\n    else if (typeof evlistener === 'function')\n      ret = [evlistener.listener || evlistener];\n    else\n      ret = unwrapListeners(evlistener);\n  }\n\n  return ret;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? Reflect.ownKeys(this._events) : [];\n};\n\n// About 1.5x faster than the two-arg version of Array#splice().\nfunction spliceOne(list, index) {\n  for (var i = index, k = i + 1, n = list.length; k < n; i += 1, k += 1)\n    list[i] = list[k];\n  list.pop();\n}\n\nfunction arrayClone(arr, i) {\n  var copy = new Array(i);\n  while (i--)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n","// shim for using process in browser\n// based off https://github.com/defunctzombie/node-process/blob/master/browser.js\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\nvar cachedSetTimeout = defaultSetTimout;\nvar cachedClearTimeout = defaultClearTimeout;\nif (typeof global.setTimeout === 'function') {\n    cachedSetTimeout = setTimeout;\n}\nif (typeof global.clearTimeout === 'function') {\n    cachedClearTimeout = clearTimeout;\n}\n\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\nexport function nextTick(fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n}\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nexport var title = 'browser';\nexport var platform = 'browser';\nexport var browser = true;\nexport var env = {};\nexport var argv = [];\nexport var version = ''; // empty string to avoid regexp issues\nexport var versions = {};\nexport var release = {};\nexport var config = {};\n\nfunction noop() {}\n\nexport var on = noop;\nexport var addListener = noop;\nexport var once = noop;\nexport var off = noop;\nexport var removeListener = noop;\nexport var removeAllListeners = noop;\nexport var emit = noop;\n\nexport function binding(name) {\n    throw new Error('process.binding is not supported');\n}\n\nexport function cwd () { return '/' }\nexport function chdir (dir) {\n    throw new Error('process.chdir is not supported');\n};\nexport function umask() { return 0; }\n\n// from https://github.com/kumavis/browser-process-hrtime/blob/master/index.js\nvar performance = global.performance || {}\nvar performanceNow =\n  performance.now        ||\n  performance.mozNow     ||\n  performance.msNow      ||\n  performance.oNow       ||\n  performance.webkitNow  ||\n  function(){ return (new Date()).getTime() }\n\n// generate timestamp or delta\n// see http://nodejs.org/api/process.html#process_process_hrtime\nexport function hrtime(previousTimestamp){\n  var clocktime = performanceNow.call(performance)*1e-3\n  var seconds = Math.floor(clocktime)\n  var nanoseconds = Math.floor((clocktime%1)*1e9)\n  if (previousTimestamp) {\n    seconds = seconds - previousTimestamp[0]\n    nanoseconds = nanoseconds - previousTimestamp[1]\n    if (nanoseconds<0) {\n      seconds--\n      nanoseconds += 1e9\n    }\n  }\n  return [seconds,nanoseconds]\n}\n\nvar startTime = new Date();\nexport function uptime() {\n  var currentTime = new Date();\n  var dif = currentTime - startTime;\n  return dif / 1000;\n}\n\nexport default {\n  nextTick: nextTick,\n  title: title,\n  browser: browser,\n  env: env,\n  argv: argv,\n  version: version,\n  versions: versions,\n  on: on,\n  addListener: addListener,\n  once: once,\n  off: off,\n  removeListener: removeListener,\n  removeAllListeners: removeAllListeners,\n  emit: emit,\n  binding: binding,\n  cwd: cwd,\n  chdir: chdir,\n  umask: umask,\n  hrtime: hrtime,\n  platform: platform,\n  release: release,\n  config: config,\n  uptime: uptime\n};\n","\nvar inherits;\nif (typeof Object.create === 'function'){\n  inherits = function inherits(ctor, superCtor) {\n    // implementation from standard node.js 'util' module\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  inherits = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\nexport default inherits;\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\nimport process from 'process';\nvar formatRegExp = /%[sdj%]/g;\nexport function format(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexport function deprecate(fn, msg) {\n  // Allow for deprecating things in the process of starting up.\n  if (isUndefined(global.process)) {\n    return function() {\n      return deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  if (process.noDeprecation === true) {\n    return fn;\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnviron;\nexport function debuglog(set) {\n  if (isUndefined(debugEnviron))\n    debugEnviron = process.env.NODE_DEBUG || '';\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n      var pid = 0;\n      debugs[set] = function() {\n        var msg = format.apply(null, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nexport function inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    _extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').substr(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.substr(1, name.length - 2);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nexport function isArray(ar) {\n  return Array.isArray(ar);\n}\n\nexport function isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\n\nexport function isNull(arg) {\n  return arg === null;\n}\n\nexport function isNullOrUndefined(arg) {\n  return arg == null;\n}\n\nexport function isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nexport function isString(arg) {\n  return typeof arg === 'string';\n}\n\nexport function isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\n\nexport function isUndefined(arg) {\n  return arg === void 0;\n}\n\nexport function isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\n\nexport function isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nexport function isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\n\nexport function isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\n\nexport function isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nexport function isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\n\nexport function isBuffer(maybeBuf) {\n  return Buffer.isBuffer(maybeBuf);\n}\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexport function log() {\n  console.log('%s - %s', timestamp(), format.apply(null, arguments));\n}\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nimport inherits from './inherits';\nexport {inherits}\n\nexport function _extend(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nexport default {\n  inherits: inherits,\n  _extend: _extend,\n  log: log,\n  isBuffer: isBuffer,\n  isPrimitive: isPrimitive,\n  isFunction: isFunction,\n  isError: isError,\n  isDate: isDate,\n  isObject: isObject,\n  isRegExp: isRegExp,\n  isUndefined: isUndefined,\n  isSymbol: isSymbol,\n  isString: isString,\n  isNumber: isNumber,\n  isNullOrUndefined: isNullOrUndefined,\n  isNull: isNull,\n  isBoolean: isBoolean,\n  isArray: isArray,\n  inspect: inspect,\n  deprecate: deprecate,\n  format: format,\n  debuglog: debuglog\n}\n","\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\nvar inited = false;\nfunction init () {\n  inited = true;\n  var code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\n  for (var i = 0, len = code.length; i < len; ++i) {\n    lookup[i] = code[i]\n    revLookup[code.charCodeAt(i)] = i\n  }\n\n  revLookup['-'.charCodeAt(0)] = 62\n  revLookup['_'.charCodeAt(0)] = 63\n}\n\nexport function toByteArray (b64) {\n  if (!inited) {\n    init();\n  }\n  var i, j, l, tmp, placeHolders, arr\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // the number of equal signs (place holders)\n  // if there are two placeholders, than the two characters before it\n  // represent one byte\n  // if there is only one, then the three characters before it represent 2 bytes\n  // this is just a cheap hack to not do indexOf twice\n  placeHolders = b64[len - 2] === '=' ? 2 : b64[len - 1] === '=' ? 1 : 0\n\n  // base64 is 4/3 + up to two characters of the original data\n  arr = new Arr(len * 3 / 4 - placeHolders)\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  l = placeHolders > 0 ? len - 4 : len\n\n  var L = 0\n\n  for (i = 0, j = 0; i < l; i += 4, j += 3) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 18) | (revLookup[b64.charCodeAt(i + 1)] << 12) | (revLookup[b64.charCodeAt(i + 2)] << 6) | revLookup[b64.charCodeAt(i + 3)]\n    arr[L++] = (tmp >> 16) & 0xFF\n    arr[L++] = (tmp >> 8) & 0xFF\n    arr[L++] = tmp & 0xFF\n  }\n\n  if (placeHolders === 2) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 2) | (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[L++] = tmp & 0xFF\n  } else if (placeHolders === 1) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 10) | (revLookup[b64.charCodeAt(i + 1)] << 4) | (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[L++] = (tmp >> 8) & 0xFF\n    arr[L++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] + lookup[num >> 12 & 0x3F] + lookup[num >> 6 & 0x3F] + lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp = (uint8[i] << 16) + (uint8[i + 1] << 8) + (uint8[i + 2])\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nexport function fromByteArray (uint8) {\n  if (!inited) {\n    init();\n  }\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var output = ''\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    output += lookup[tmp >> 2]\n    output += lookup[(tmp << 4) & 0x3F]\n    output += '=='\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + (uint8[len - 1])\n    output += lookup[tmp >> 10]\n    output += lookup[(tmp >> 4) & 0x3F]\n    output += lookup[(tmp << 2) & 0x3F]\n    output += '='\n  }\n\n  parts.push(output)\n\n  return parts.join('')\n}\n","\nexport function read (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = nBytes * 8 - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexport function write (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = nBytes * 8 - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = (value * c - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","var toString = {}.toString;\n\nexport default Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n\nimport * as base64 from './base64'\nimport * as ieee754 from './ieee754'\nimport isArray from './isArray'\n\nexport var INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : true\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nvar _kMaxLength = kMaxLength()\nexport {_kMaxLength as kMaxLength};\nfunction typedArraySupport () {\n  return true;\n  // rollup issues\n  // try {\n  //   var arr = new Uint8Array(1)\n  //   arr.__proto__ = {\n  //     __proto__: Uint8Array.prototype,\n  //     foo: function () { return 42 }\n  //   }\n  //   return arr.foo() === 42 && // typed array instances can be augmented\n  //       typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n  //       arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  // } catch (e) {\n  //   return false\n  // }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nexport function Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    // Object.defineProperty(Buffer, Symbol.species, {\n    //   value: null,\n    //   configurable: true\n    // })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (internalIsBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nexport function SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\nBuffer.isBuffer = isBuffer;\nfunction internalIsBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!internalIsBuffer(a) || !internalIsBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!internalIsBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (internalIsBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!internalIsBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!internalIsBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (internalIsBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!internalIsBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = internalIsBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n\n\n// the following is from is-buffer, also by Feross Aboukhadijeh and with same lisence\n// The _isBuffer check is for Safari 5-7 support, because it's missing\n// Object.prototype.constructor. Remove this eventually\nexport function isBuffer(obj) {\n  return obj != null && (!!obj._isBuffer || isFastBuffer(obj) || isSlowBuffer(obj))\n}\n\nfunction isFastBuffer (obj) {\n  return !!obj.constructor && typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj)\n}\n\n// For Node v0.10 support. Remove this eventually.\nfunction isSlowBuffer (obj) {\n  return typeof obj.readFloatLE === 'function' && typeof obj.slice === 'function' && isFastBuffer(obj.slice(0, 0))\n}\n","import {Buffer} from 'buffer';\n\nexport default BufferList;\n\nfunction BufferList() {\n  this.head = null;\n  this.tail = null;\n  this.length = 0;\n}\n\nBufferList.prototype.push = function (v) {\n  var entry = { data: v, next: null };\n  if (this.length > 0) this.tail.next = entry;else this.head = entry;\n  this.tail = entry;\n  ++this.length;\n};\n\nBufferList.prototype.unshift = function (v) {\n  var entry = { data: v, next: this.head };\n  if (this.length === 0) this.tail = entry;\n  this.head = entry;\n  ++this.length;\n};\n\nBufferList.prototype.shift = function () {\n  if (this.length === 0) return;\n  var ret = this.head.data;\n  if (this.length === 1) this.head = this.tail = null;else this.head = this.head.next;\n  --this.length;\n  return ret;\n};\n\nBufferList.prototype.clear = function () {\n  this.head = this.tail = null;\n  this.length = 0;\n};\n\nBufferList.prototype.join = function (s) {\n  if (this.length === 0) return '';\n  var p = this.head;\n  var ret = '' + p.data;\n  while (p = p.next) {\n    ret += s + p.data;\n  }return ret;\n};\n\nBufferList.prototype.concat = function (n) {\n  if (this.length === 0) return Buffer.alloc(0);\n  if (this.length === 1) return this.head.data;\n  var ret = Buffer.allocUnsafe(n >>> 0);\n  var p = this.head;\n  var i = 0;\n  while (p) {\n    p.data.copy(ret, i);\n    i += p.data.length;\n    p = p.next;\n  }\n  return ret;\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nimport {Buffer} from 'buffer';\nvar isBufferEncoding = Buffer.isEncoding\n  || function(encoding) {\n       switch (encoding && encoding.toLowerCase()) {\n         case 'hex': case 'utf8': case 'utf-8': case 'ascii': case 'binary': case 'base64': case 'ucs2': case 'ucs-2': case 'utf16le': case 'utf-16le': case 'raw': return true;\n         default: return false;\n       }\n     }\n\n\nfunction assertEncoding(encoding) {\n  if (encoding && !isBufferEncoding(encoding)) {\n    throw new Error('Unknown encoding: ' + encoding);\n  }\n}\n\n// StringDecoder provides an interface for efficiently splitting a series of\n// buffers into a series of JS strings without breaking apart multi-byte\n// characters. CESU-8 is handled as part of the UTF-8 encoding.\n//\n// @TODO Handling all encodings inside a single object makes it very difficult\n// to reason about this code, so it should be split up in the future.\n// @TODO There should be a utf8-strict encoding that rejects invalid UTF-8 code\n// points as used by CESU-8.\nexport function StringDecoder(encoding) {\n  this.encoding = (encoding || 'utf8').toLowerCase().replace(/[-_]/, '');\n  assertEncoding(encoding);\n  switch (this.encoding) {\n    case 'utf8':\n      // CESU-8 represents each of Surrogate Pair by 3-bytes\n      this.surrogateSize = 3;\n      break;\n    case 'ucs2':\n    case 'utf16le':\n      // UTF-16 represents each of Surrogate Pair by 2-bytes\n      this.surrogateSize = 2;\n      this.detectIncompleteChar = utf16DetectIncompleteChar;\n      break;\n    case 'base64':\n      // Base-64 stores 3 bytes in 4 chars, and pads the remainder.\n      this.surrogateSize = 3;\n      this.detectIncompleteChar = base64DetectIncompleteChar;\n      break;\n    default:\n      this.write = passThroughWrite;\n      return;\n  }\n\n  // Enough space to store all bytes of a single character. UTF-8 needs 4\n  // bytes, but CESU-8 may require up to 6 (3 bytes per surrogate).\n  this.charBuffer = new Buffer(6);\n  // Number of bytes received for the current incomplete multi-byte character.\n  this.charReceived = 0;\n  // Number of bytes expected for the current incomplete multi-byte character.\n  this.charLength = 0;\n};\n\n\n// write decodes the given buffer and returns it as JS string that is\n// guaranteed to not contain any partial multi-byte characters. Any partial\n// character found at the end of the buffer is buffered up, and will be\n// returned when calling write again with the remaining bytes.\n//\n// Note: Converting a Buffer containing an orphan surrogate to a String\n// currently works, but converting a String to a Buffer (via `new Buffer`, or\n// Buffer#write) will replace incomplete surrogates with the unicode\n// replacement character. See https://codereview.chromium.org/121173009/ .\nStringDecoder.prototype.write = function(buffer) {\n  var charStr = '';\n  // if our last write ended with an incomplete multibyte character\n  while (this.charLength) {\n    // determine how many remaining bytes this buffer has to offer for this char\n    var available = (buffer.length >= this.charLength - this.charReceived) ?\n        this.charLength - this.charReceived :\n        buffer.length;\n\n    // add the new bytes to the char buffer\n    buffer.copy(this.charBuffer, this.charReceived, 0, available);\n    this.charReceived += available;\n\n    if (this.charReceived < this.charLength) {\n      // still not enough chars in this buffer? wait for more ...\n      return '';\n    }\n\n    // remove bytes belonging to the current character from the buffer\n    buffer = buffer.slice(available, buffer.length);\n\n    // get the character that was split\n    charStr = this.charBuffer.slice(0, this.charLength).toString(this.encoding);\n\n    // CESU-8: lead surrogate (D800-DBFF) is also the incomplete character\n    var charCode = charStr.charCodeAt(charStr.length - 1);\n    if (charCode >= 0xD800 && charCode <= 0xDBFF) {\n      this.charLength += this.surrogateSize;\n      charStr = '';\n      continue;\n    }\n    this.charReceived = this.charLength = 0;\n\n    // if there are no more bytes in this buffer, just emit our char\n    if (buffer.length === 0) {\n      return charStr;\n    }\n    break;\n  }\n\n  // determine and set charLength / charReceived\n  this.detectIncompleteChar(buffer);\n\n  var end = buffer.length;\n  if (this.charLength) {\n    // buffer the incomplete character bytes we got\n    buffer.copy(this.charBuffer, 0, buffer.length - this.charReceived, end);\n    end -= this.charReceived;\n  }\n\n  charStr += buffer.toString(this.encoding, 0, end);\n\n  var end = charStr.length - 1;\n  var charCode = charStr.charCodeAt(end);\n  // CESU-8: lead surrogate (D800-DBFF) is also the incomplete character\n  if (charCode >= 0xD800 && charCode <= 0xDBFF) {\n    var size = this.surrogateSize;\n    this.charLength += size;\n    this.charReceived += size;\n    this.charBuffer.copy(this.charBuffer, size, 0, size);\n    buffer.copy(this.charBuffer, 0, 0, size);\n    return charStr.substring(0, end);\n  }\n\n  // or just emit the charStr\n  return charStr;\n};\n\n// detectIncompleteChar determines if there is an incomplete UTF-8 character at\n// the end of the given buffer. If so, it sets this.charLength to the byte\n// length that character, and sets this.charReceived to the number of bytes\n// that are available for this character.\nStringDecoder.prototype.detectIncompleteChar = function(buffer) {\n  // determine how many bytes we have to check at the end of this buffer\n  var i = (buffer.length >= 3) ? 3 : buffer.length;\n\n  // Figure out if one of the last i bytes of our buffer announces an\n  // incomplete char.\n  for (; i > 0; i--) {\n    var c = buffer[buffer.length - i];\n\n    // See http://en.wikipedia.org/wiki/UTF-8#Description\n\n    // 110XXXXX\n    if (i == 1 && c >> 5 == 0x06) {\n      this.charLength = 2;\n      break;\n    }\n\n    // 1110XXXX\n    if (i <= 2 && c >> 4 == 0x0E) {\n      this.charLength = 3;\n      break;\n    }\n\n    // 11110XXX\n    if (i <= 3 && c >> 3 == 0x1E) {\n      this.charLength = 4;\n      break;\n    }\n  }\n  this.charReceived = i;\n};\n\nStringDecoder.prototype.end = function(buffer) {\n  var res = '';\n  if (buffer && buffer.length)\n    res = this.write(buffer);\n\n  if (this.charReceived) {\n    var cr = this.charReceived;\n    var buf = this.charBuffer;\n    var enc = this.encoding;\n    res += buf.slice(0, cr).toString(enc);\n  }\n\n  return res;\n};\n\nfunction passThroughWrite(buffer) {\n  return buffer.toString(this.encoding);\n}\n\nfunction utf16DetectIncompleteChar(buffer) {\n  this.charReceived = buffer.length % 2;\n  this.charLength = this.charReceived ? 2 : 0;\n}\n\nfunction base64DetectIncompleteChar(buffer) {\n  this.charReceived = buffer.length % 3;\n  this.charLength = this.charReceived ? 3 : 0;\n}\n","'use strict';\n\n\nReadable.ReadableState = ReadableState;\nimport EventEmitter from 'events';\nimport {inherits, debuglog} from 'util';\nimport BufferList from './buffer-list';\nimport {StringDecoder} from 'string_decoder';\nimport {Duplex} from './duplex';\nimport {nextTick} from 'process';\n\nvar debug = debuglog('stream');\ninherits(Readable, EventEmitter);\n\nfunction prependListener(emitter, event, fn) {\n  // Sadly this is not cacheable as some libraries bundle their own\n  // event emitter implementation with them.\n  if (typeof emitter.prependListener === 'function') {\n    return emitter.prependListener(event, fn);\n  } else {\n    // This is a hack to make sure that our error handler is attached before any\n    // userland ones.  NEVER DO THIS. This is here only because this code needs\n    // to continue to work with older versions of Node.js that do not include\n    // the prependListener() method. The goal is to eventually remove this hack.\n    if (!emitter._events || !emitter._events[event])\n      emitter.on(event, fn);\n    else if (Array.isArray(emitter._events[event]))\n      emitter._events[event].unshift(fn);\n    else\n      emitter._events[event] = [fn, emitter._events[event]];\n  }\n}\nfunction listenerCount (emitter, type) {\n  return emitter.listeners(type).length;\n}\nfunction ReadableState(options, stream) {\n\n  options = options || {};\n\n  // object stream flag. Used to make read(n) ignore n and to\n  // make all the buffer merging and length checks go away\n  this.objectMode = !!options.objectMode;\n\n  if (stream instanceof Duplex) this.objectMode = this.objectMode || !!options.readableObjectMode;\n\n  // the point at which it stops calling _read() to fill the buffer\n  // Note: 0 is a valid value, means \"don't call _read preemptively ever\"\n  var hwm = options.highWaterMark;\n  var defaultHwm = this.objectMode ? 16 : 16 * 1024;\n  this.highWaterMark = hwm || hwm === 0 ? hwm : defaultHwm;\n\n  // cast to ints.\n  this.highWaterMark = ~ ~this.highWaterMark;\n\n  // A linked list is used to store data chunks instead of an array because the\n  // linked list can remove elements from the beginning faster than\n  // array.shift()\n  this.buffer = new BufferList();\n  this.length = 0;\n  this.pipes = null;\n  this.pipesCount = 0;\n  this.flowing = null;\n  this.ended = false;\n  this.endEmitted = false;\n  this.reading = false;\n\n  // a flag to be able to tell if the onwrite cb is called immediately,\n  // or on a later tick.  We set this to true at first, because any\n  // actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first write call.\n  this.sync = true;\n\n  // whenever we return null, then we set a flag to say\n  // that we're awaiting a 'readable' event emission.\n  this.needReadable = false;\n  this.emittedReadable = false;\n  this.readableListening = false;\n  this.resumeScheduled = false;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // when piping, we only care about 'readable' events that happen\n  // after read()ing all the bytes and not getting any pushback.\n  this.ranOut = false;\n\n  // the number of writers that are awaiting a drain event in .pipe()s\n  this.awaitDrain = 0;\n\n  // if true, a maybeReadMore has been scheduled\n  this.readingMore = false;\n\n  this.decoder = null;\n  this.encoding = null;\n  if (options.encoding) {\n    this.decoder = new StringDecoder(options.encoding);\n    this.encoding = options.encoding;\n  }\n}\nexport default Readable;\nexport function Readable(options) {\n\n  if (!(this instanceof Readable)) return new Readable(options);\n\n  this._readableState = new ReadableState(options, this);\n\n  // legacy\n  this.readable = true;\n\n  if (options && typeof options.read === 'function') this._read = options.read;\n\n  EventEmitter.call(this);\n}\n\n// Manually shove something into the read() buffer.\n// This returns true if the highWaterMark has not been hit yet,\n// similar to how Writable.write() returns true if you should\n// write() some more.\nReadable.prototype.push = function (chunk, encoding) {\n  var state = this._readableState;\n\n  if (!state.objectMode && typeof chunk === 'string') {\n    encoding = encoding || state.defaultEncoding;\n    if (encoding !== state.encoding) {\n      chunk = Buffer.from(chunk, encoding);\n      encoding = '';\n    }\n  }\n\n  return readableAddChunk(this, state, chunk, encoding, false);\n};\n\n// Unshift should *always* be something directly out of read()\nReadable.prototype.unshift = function (chunk) {\n  var state = this._readableState;\n  return readableAddChunk(this, state, chunk, '', true);\n};\n\nReadable.prototype.isPaused = function () {\n  return this._readableState.flowing === false;\n};\n\nfunction readableAddChunk(stream, state, chunk, encoding, addToFront) {\n  var er = chunkInvalid(state, chunk);\n  if (er) {\n    stream.emit('error', er);\n  } else if (chunk === null) {\n    state.reading = false;\n    onEofChunk(stream, state);\n  } else if (state.objectMode || chunk && chunk.length > 0) {\n    if (state.ended && !addToFront) {\n      var e = new Error('stream.push() after EOF');\n      stream.emit('error', e);\n    } else if (state.endEmitted && addToFront) {\n      var _e = new Error('stream.unshift() after end event');\n      stream.emit('error', _e);\n    } else {\n      var skipAdd;\n      if (state.decoder && !addToFront && !encoding) {\n        chunk = state.decoder.write(chunk);\n        skipAdd = !state.objectMode && chunk.length === 0;\n      }\n\n      if (!addToFront) state.reading = false;\n\n      // Don't add to the buffer if we've decoded to an empty string chunk and\n      // we're not in object mode\n      if (!skipAdd) {\n        // if we want the data now, just emit it.\n        if (state.flowing && state.length === 0 && !state.sync) {\n          stream.emit('data', chunk);\n          stream.read(0);\n        } else {\n          // update the buffer info.\n          state.length += state.objectMode ? 1 : chunk.length;\n          if (addToFront) state.buffer.unshift(chunk);else state.buffer.push(chunk);\n\n          if (state.needReadable) emitReadable(stream);\n        }\n      }\n\n      maybeReadMore(stream, state);\n    }\n  } else if (!addToFront) {\n    state.reading = false;\n  }\n\n  return needMoreData(state);\n}\n\n// if it's past the high water mark, we can push in some more.\n// Also, if we have no data yet, we can stand some\n// more bytes.  This is to work around cases where hwm=0,\n// such as the repl.  Also, if the push() triggered a\n// readable event, and the user called read(largeNumber) such that\n// needReadable was set, then we ought to push more, so that another\n// 'readable' event will be triggered.\nfunction needMoreData(state) {\n  return !state.ended && (state.needReadable || state.length < state.highWaterMark || state.length === 0);\n}\n\n// backwards compatibility.\nReadable.prototype.setEncoding = function (enc) {\n  this._readableState.decoder = new StringDecoder(enc);\n  this._readableState.encoding = enc;\n  return this;\n};\n\n// Don't raise the hwm > 8MB\nvar MAX_HWM = 0x800000;\nfunction computeNewHighWaterMark(n) {\n  if (n >= MAX_HWM) {\n    n = MAX_HWM;\n  } else {\n    // Get the next highest power of 2 to prevent increasing hwm excessively in\n    // tiny amounts\n    n--;\n    n |= n >>> 1;\n    n |= n >>> 2;\n    n |= n >>> 4;\n    n |= n >>> 8;\n    n |= n >>> 16;\n    n++;\n  }\n  return n;\n}\n\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction howMuchToRead(n, state) {\n  if (n <= 0 || state.length === 0 && state.ended) return 0;\n  if (state.objectMode) return 1;\n  if (n !== n) {\n    // Only flow one buffer at a time\n    if (state.flowing && state.length) return state.buffer.head.data.length;else return state.length;\n  }\n  // If we're asking for more than the current hwm, then raise the hwm.\n  if (n > state.highWaterMark) state.highWaterMark = computeNewHighWaterMark(n);\n  if (n <= state.length) return n;\n  // Don't have enough\n  if (!state.ended) {\n    state.needReadable = true;\n    return 0;\n  }\n  return state.length;\n}\n\n// you can override either this method, or the async _read(n) below.\nReadable.prototype.read = function (n) {\n  debug('read', n);\n  n = parseInt(n, 10);\n  var state = this._readableState;\n  var nOrig = n;\n\n  if (n !== 0) state.emittedReadable = false;\n\n  // if we're doing read(0) to trigger a readable event, but we\n  // already have a bunch of data in the buffer, then just trigger\n  // the 'readable' event and move on.\n  if (n === 0 && state.needReadable && (state.length >= state.highWaterMark || state.ended)) {\n    debug('read: emitReadable', state.length, state.ended);\n    if (state.length === 0 && state.ended) endReadable(this);else emitReadable(this);\n    return null;\n  }\n\n  n = howMuchToRead(n, state);\n\n  // if we've ended, and we're now clear, then finish it up.\n  if (n === 0 && state.ended) {\n    if (state.length === 0) endReadable(this);\n    return null;\n  }\n\n  // All the actual chunk generation logic needs to be\n  // *below* the call to _read.  The reason is that in certain\n  // synthetic stream cases, such as passthrough streams, _read\n  // may be a completely synchronous operation which may change\n  // the state of the read buffer, providing enough data when\n  // before there was *not* enough.\n  //\n  // So, the steps are:\n  // 1. Figure out what the state of things will be after we do\n  // a read from the buffer.\n  //\n  // 2. If that resulting state will trigger a _read, then call _read.\n  // Note that this may be asynchronous, or synchronous.  Yes, it is\n  // deeply ugly to write APIs this way, but that still doesn't mean\n  // that the Readable class should behave improperly, as streams are\n  // designed to be sync/async agnostic.\n  // Take note if the _read call is sync or async (ie, if the read call\n  // has returned yet), so that we know whether or not it's safe to emit\n  // 'readable' etc.\n  //\n  // 3. Actually pull the requested chunks out of the buffer and return.\n\n  // if we need a readable event, then we need to do some reading.\n  var doRead = state.needReadable;\n  debug('need readable', doRead);\n\n  // if we currently have less than the highWaterMark, then also read some\n  if (state.length === 0 || state.length - n < state.highWaterMark) {\n    doRead = true;\n    debug('length less than watermark', doRead);\n  }\n\n  // however, if we've ended, then there's no point, and if we're already\n  // reading, then it's unnecessary.\n  if (state.ended || state.reading) {\n    doRead = false;\n    debug('reading or ended', doRead);\n  } else if (doRead) {\n    debug('do read');\n    state.reading = true;\n    state.sync = true;\n    // if the length is currently zero, then we *need* a readable event.\n    if (state.length === 0) state.needReadable = true;\n    // call internal read method\n    this._read(state.highWaterMark);\n    state.sync = false;\n    // If _read pushed data synchronously, then `reading` will be false,\n    // and we need to re-evaluate how much data we can return to the user.\n    if (!state.reading) n = howMuchToRead(nOrig, state);\n  }\n\n  var ret;\n  if (n > 0) ret = fromList(n, state);else ret = null;\n\n  if (ret === null) {\n    state.needReadable = true;\n    n = 0;\n  } else {\n    state.length -= n;\n  }\n\n  if (state.length === 0) {\n    // If we have nothing in the buffer, then we want to know\n    // as soon as we *do* get something into the buffer.\n    if (!state.ended) state.needReadable = true;\n\n    // If we tried to read() past the EOF, then emit end on the next tick.\n    if (nOrig !== n && state.ended) endReadable(this);\n  }\n\n  if (ret !== null) this.emit('data', ret);\n\n  return ret;\n};\n\nfunction chunkInvalid(state, chunk) {\n  var er = null;\n  if (!Buffer.isBuffer(chunk) && typeof chunk !== 'string' && chunk !== null && chunk !== undefined && !state.objectMode) {\n    er = new TypeError('Invalid non-string/buffer chunk');\n  }\n  return er;\n}\n\nfunction onEofChunk(stream, state) {\n  if (state.ended) return;\n  if (state.decoder) {\n    var chunk = state.decoder.end();\n    if (chunk && chunk.length) {\n      state.buffer.push(chunk);\n      state.length += state.objectMode ? 1 : chunk.length;\n    }\n  }\n  state.ended = true;\n\n  // emit 'readable' now to make sure it gets picked up.\n  emitReadable(stream);\n}\n\n// Don't emit readable right away in sync mode, because this can trigger\n// another read() call => stack overflow.  This way, it might trigger\n// a nextTick recursion warning, but that's not so bad.\nfunction emitReadable(stream) {\n  var state = stream._readableState;\n  state.needReadable = false;\n  if (!state.emittedReadable) {\n    debug('emitReadable', state.flowing);\n    state.emittedReadable = true;\n    if (state.sync) nextTick(emitReadable_, stream);else emitReadable_(stream);\n  }\n}\n\nfunction emitReadable_(stream) {\n  debug('emit readable');\n  stream.emit('readable');\n  flow(stream);\n}\n\n// at this point, the user has presumably seen the 'readable' event,\n// and called read() to consume some data.  that may have triggered\n// in turn another _read(n) call, in which case reading = true if\n// it's in progress.\n// However, if we're not ended, or reading, and the length < hwm,\n// then go ahead and try to read some more preemptively.\nfunction maybeReadMore(stream, state) {\n  if (!state.readingMore) {\n    state.readingMore = true;\n    nextTick(maybeReadMore_, stream, state);\n  }\n}\n\nfunction maybeReadMore_(stream, state) {\n  var len = state.length;\n  while (!state.reading && !state.flowing && !state.ended && state.length < state.highWaterMark) {\n    debug('maybeReadMore read 0');\n    stream.read(0);\n    if (len === state.length)\n      // didn't get any data, stop spinning.\n      break;else len = state.length;\n  }\n  state.readingMore = false;\n}\n\n// abstract method.  to be overridden in specific implementation classes.\n// call cb(er, data) where data is <= n in length.\n// for virtual (non-string, non-buffer) streams, \"length\" is somewhat\n// arbitrary, and perhaps not very meaningful.\nReadable.prototype._read = function (n) {\n  this.emit('error', new Error('not implemented'));\n};\n\nReadable.prototype.pipe = function (dest, pipeOpts) {\n  var src = this;\n  var state = this._readableState;\n\n  switch (state.pipesCount) {\n    case 0:\n      state.pipes = dest;\n      break;\n    case 1:\n      state.pipes = [state.pipes, dest];\n      break;\n    default:\n      state.pipes.push(dest);\n      break;\n  }\n  state.pipesCount += 1;\n  debug('pipe count=%d opts=%j', state.pipesCount, pipeOpts);\n\n  var doEnd = (!pipeOpts || pipeOpts.end !== false);\n\n  var endFn = doEnd ? onend : cleanup;\n  if (state.endEmitted) nextTick(endFn);else src.once('end', endFn);\n\n  dest.on('unpipe', onunpipe);\n  function onunpipe(readable) {\n    debug('onunpipe');\n    if (readable === src) {\n      cleanup();\n    }\n  }\n\n  function onend() {\n    debug('onend');\n    dest.end();\n  }\n\n  // when the dest drains, it reduces the awaitDrain counter\n  // on the source.  This would be more elegant with a .once()\n  // handler in flow(), but adding and removing repeatedly is\n  // too slow.\n  var ondrain = pipeOnDrain(src);\n  dest.on('drain', ondrain);\n\n  var cleanedUp = false;\n  function cleanup() {\n    debug('cleanup');\n    // cleanup event handlers once the pipe is broken\n    dest.removeListener('close', onclose);\n    dest.removeListener('finish', onfinish);\n    dest.removeListener('drain', ondrain);\n    dest.removeListener('error', onerror);\n    dest.removeListener('unpipe', onunpipe);\n    src.removeListener('end', onend);\n    src.removeListener('end', cleanup);\n    src.removeListener('data', ondata);\n\n    cleanedUp = true;\n\n    // if the reader is waiting for a drain event from this\n    // specific writer, then it would cause it to never start\n    // flowing again.\n    // So, if this is awaiting a drain, then we just call it now.\n    // If we don't know, then assume that we are waiting for one.\n    if (state.awaitDrain && (!dest._writableState || dest._writableState.needDrain)) ondrain();\n  }\n\n  // If the user pushes more data while we're writing to dest then we'll end up\n  // in ondata again. However, we only want to increase awaitDrain once because\n  // dest will only emit one 'drain' event for the multiple writes.\n  // => Introduce a guard on increasing awaitDrain.\n  var increasedAwaitDrain = false;\n  src.on('data', ondata);\n  function ondata(chunk) {\n    debug('ondata');\n    increasedAwaitDrain = false;\n    var ret = dest.write(chunk);\n    if (false === ret && !increasedAwaitDrain) {\n      // If the user unpiped during `dest.write()`, it is possible\n      // to get stuck in a permanently paused state if that write\n      // also returned false.\n      // => Check whether `dest` is still a piping destination.\n      if ((state.pipesCount === 1 && state.pipes === dest || state.pipesCount > 1 && indexOf(state.pipes, dest) !== -1) && !cleanedUp) {\n        debug('false write response, pause', src._readableState.awaitDrain);\n        src._readableState.awaitDrain++;\n        increasedAwaitDrain = true;\n      }\n      src.pause();\n    }\n  }\n\n  // if the dest has an error, then stop piping into it.\n  // however, don't suppress the throwing behavior for this.\n  function onerror(er) {\n    debug('onerror', er);\n    unpipe();\n    dest.removeListener('error', onerror);\n    if (listenerCount(dest, 'error') === 0) dest.emit('error', er);\n  }\n\n  // Make sure our error handler is attached before userland ones.\n  prependListener(dest, 'error', onerror);\n\n  // Both close and finish should trigger unpipe, but only once.\n  function onclose() {\n    dest.removeListener('finish', onfinish);\n    unpipe();\n  }\n  dest.once('close', onclose);\n  function onfinish() {\n    debug('onfinish');\n    dest.removeListener('close', onclose);\n    unpipe();\n  }\n  dest.once('finish', onfinish);\n\n  function unpipe() {\n    debug('unpipe');\n    src.unpipe(dest);\n  }\n\n  // tell the dest that it's being piped to\n  dest.emit('pipe', src);\n\n  // start the flow if it hasn't been started already.\n  if (!state.flowing) {\n    debug('pipe resume');\n    src.resume();\n  }\n\n  return dest;\n};\n\nfunction pipeOnDrain(src) {\n  return function () {\n    var state = src._readableState;\n    debug('pipeOnDrain', state.awaitDrain);\n    if (state.awaitDrain) state.awaitDrain--;\n    if (state.awaitDrain === 0 && src.listeners('data').length) {\n      state.flowing = true;\n      flow(src);\n    }\n  };\n}\n\nReadable.prototype.unpipe = function (dest) {\n  var state = this._readableState;\n\n  // if we're not piping anywhere, then do nothing.\n  if (state.pipesCount === 0) return this;\n\n  // just one destination.  most common case.\n  if (state.pipesCount === 1) {\n    // passed in one, but it's not the right one.\n    if (dest && dest !== state.pipes) return this;\n\n    if (!dest) dest = state.pipes;\n\n    // got a match.\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n    if (dest) dest.emit('unpipe', this);\n    return this;\n  }\n\n  // slow case. multiple pipe destinations.\n\n  if (!dest) {\n    // remove all.\n    var dests = state.pipes;\n    var len = state.pipesCount;\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n\n    for (var _i = 0; _i < len; _i++) {\n      dests[_i].emit('unpipe', this);\n    }return this;\n  }\n\n  // try to find the right one.\n  var i = indexOf(state.pipes, dest);\n  if (i === -1) return this;\n\n  state.pipes.splice(i, 1);\n  state.pipesCount -= 1;\n  if (state.pipesCount === 1) state.pipes = state.pipes[0];\n\n  dest.emit('unpipe', this);\n\n  return this;\n};\n\n// set up data events if they are asked for\n// Ensure readable listeners eventually get something\nReadable.prototype.on = function (ev, fn) {\n  var res = EventEmitter.prototype.on.call(this, ev, fn);\n\n  if (ev === 'data') {\n    // Start flowing on next tick if stream isn't explicitly paused\n    if (this._readableState.flowing !== false) this.resume();\n  } else if (ev === 'readable') {\n    var state = this._readableState;\n    if (!state.endEmitted && !state.readableListening) {\n      state.readableListening = state.needReadable = true;\n      state.emittedReadable = false;\n      if (!state.reading) {\n        nextTick(nReadingNextTick, this);\n      } else if (state.length) {\n        emitReadable(this, state);\n      }\n    }\n  }\n\n  return res;\n};\nReadable.prototype.addListener = Readable.prototype.on;\n\nfunction nReadingNextTick(self) {\n  debug('readable nexttick read 0');\n  self.read(0);\n}\n\n// pause() and resume() are remnants of the legacy readable stream API\n// If the user uses them, then switch into old mode.\nReadable.prototype.resume = function () {\n  var state = this._readableState;\n  if (!state.flowing) {\n    debug('resume');\n    state.flowing = true;\n    resume(this, state);\n  }\n  return this;\n};\n\nfunction resume(stream, state) {\n  if (!state.resumeScheduled) {\n    state.resumeScheduled = true;\n    nextTick(resume_, stream, state);\n  }\n}\n\nfunction resume_(stream, state) {\n  if (!state.reading) {\n    debug('resume read 0');\n    stream.read(0);\n  }\n\n  state.resumeScheduled = false;\n  state.awaitDrain = 0;\n  stream.emit('resume');\n  flow(stream);\n  if (state.flowing && !state.reading) stream.read(0);\n}\n\nReadable.prototype.pause = function () {\n  debug('call pause flowing=%j', this._readableState.flowing);\n  if (false !== this._readableState.flowing) {\n    debug('pause');\n    this._readableState.flowing = false;\n    this.emit('pause');\n  }\n  return this;\n};\n\nfunction flow(stream) {\n  var state = stream._readableState;\n  debug('flow', state.flowing);\n  while (state.flowing && stream.read() !== null) {}\n}\n\n// wrap an old-style stream as the async data source.\n// This is *not* part of the readable stream interface.\n// It is an ugly unfortunate mess of history.\nReadable.prototype.wrap = function (stream) {\n  var state = this._readableState;\n  var paused = false;\n\n  var self = this;\n  stream.on('end', function () {\n    debug('wrapped end');\n    if (state.decoder && !state.ended) {\n      var chunk = state.decoder.end();\n      if (chunk && chunk.length) self.push(chunk);\n    }\n\n    self.push(null);\n  });\n\n  stream.on('data', function (chunk) {\n    debug('wrapped data');\n    if (state.decoder) chunk = state.decoder.write(chunk);\n\n    // don't skip over falsy values in objectMode\n    if (state.objectMode && (chunk === null || chunk === undefined)) return;else if (!state.objectMode && (!chunk || !chunk.length)) return;\n\n    var ret = self.push(chunk);\n    if (!ret) {\n      paused = true;\n      stream.pause();\n    }\n  });\n\n  // proxy all the other methods.\n  // important when wrapping filters and duplexes.\n  for (var i in stream) {\n    if (this[i] === undefined && typeof stream[i] === 'function') {\n      this[i] = function (method) {\n        return function () {\n          return stream[method].apply(stream, arguments);\n        };\n      }(i);\n    }\n  }\n\n  // proxy certain important events.\n  var events = ['error', 'close', 'destroy', 'pause', 'resume'];\n  forEach(events, function (ev) {\n    stream.on(ev, self.emit.bind(self, ev));\n  });\n\n  // when we try to consume some more bytes, simply unpause the\n  // underlying stream.\n  self._read = function (n) {\n    debug('wrapped _read', n);\n    if (paused) {\n      paused = false;\n      stream.resume();\n    }\n  };\n\n  return self;\n};\n\n// exposed for testing purposes only.\nReadable._fromList = fromList;\n\n// Pluck off n bytes from an array of buffers.\n// Length is the combined lengths of all the buffers in the list.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction fromList(n, state) {\n  // nothing buffered\n  if (state.length === 0) return null;\n\n  var ret;\n  if (state.objectMode) ret = state.buffer.shift();else if (!n || n >= state.length) {\n    // read it all, truncate the list\n    if (state.decoder) ret = state.buffer.join('');else if (state.buffer.length === 1) ret = state.buffer.head.data;else ret = state.buffer.concat(state.length);\n    state.buffer.clear();\n  } else {\n    // read part of list\n    ret = fromListPartial(n, state.buffer, state.decoder);\n  }\n\n  return ret;\n}\n\n// Extracts only enough buffered data to satisfy the amount requested.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction fromListPartial(n, list, hasStrings) {\n  var ret;\n  if (n < list.head.data.length) {\n    // slice is the same for buffers and strings\n    ret = list.head.data.slice(0, n);\n    list.head.data = list.head.data.slice(n);\n  } else if (n === list.head.data.length) {\n    // first chunk is a perfect match\n    ret = list.shift();\n  } else {\n    // result spans more than one buffer\n    ret = hasStrings ? copyFromBufferString(n, list) : copyFromBuffer(n, list);\n  }\n  return ret;\n}\n\n// Copies a specified amount of characters from the list of buffered data\n// chunks.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction copyFromBufferString(n, list) {\n  var p = list.head;\n  var c = 1;\n  var ret = p.data;\n  n -= ret.length;\n  while (p = p.next) {\n    var str = p.data;\n    var nb = n > str.length ? str.length : n;\n    if (nb === str.length) ret += str;else ret += str.slice(0, n);\n    n -= nb;\n    if (n === 0) {\n      if (nb === str.length) {\n        ++c;\n        if (p.next) list.head = p.next;else list.head = list.tail = null;\n      } else {\n        list.head = p;\n        p.data = str.slice(nb);\n      }\n      break;\n    }\n    ++c;\n  }\n  list.length -= c;\n  return ret;\n}\n\n// Copies a specified amount of bytes from the list of buffered data chunks.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction copyFromBuffer(n, list) {\n  var ret = Buffer.allocUnsafe(n);\n  var p = list.head;\n  var c = 1;\n  p.data.copy(ret);\n  n -= p.data.length;\n  while (p = p.next) {\n    var buf = p.data;\n    var nb = n > buf.length ? buf.length : n;\n    buf.copy(ret, ret.length - n, 0, nb);\n    n -= nb;\n    if (n === 0) {\n      if (nb === buf.length) {\n        ++c;\n        if (p.next) list.head = p.next;else list.head = list.tail = null;\n      } else {\n        list.head = p;\n        p.data = buf.slice(nb);\n      }\n      break;\n    }\n    ++c;\n  }\n  list.length -= c;\n  return ret;\n}\n\nfunction endReadable(stream) {\n  var state = stream._readableState;\n\n  // If we get here before consuming all the bytes, then that is a\n  // bug in node.  Should never happen.\n  if (state.length > 0) throw new Error('\"endReadable()\" called on non-empty stream');\n\n  if (!state.endEmitted) {\n    state.ended = true;\n    nextTick(endReadableNT, state, stream);\n  }\n}\n\nfunction endReadableNT(state, stream) {\n  // Check that we didn't get one last unshift.\n  if (!state.endEmitted && state.length === 0) {\n    state.endEmitted = true;\n    stream.readable = false;\n    stream.emit('end');\n  }\n}\n\nfunction forEach(xs, f) {\n  for (var i = 0, l = xs.length; i < l; i++) {\n    f(xs[i], i);\n  }\n}\n\nfunction indexOf(xs, x) {\n  for (var i = 0, l = xs.length; i < l; i++) {\n    if (xs[i] === x) return i;\n  }\n  return -1;\n}\n","// A bit simpler than readable streams.\n// Implement an async ._write(chunk, encoding, cb), and it'll handle all\n// the drain event emission and buffering.\n\n\nimport {inherits, deprecate} from 'util';\nimport {Buffer} from 'buffer';\nWritable.WritableState = WritableState;\nimport {EventEmitter} from 'events';\nimport {Duplex} from './duplex';\nimport {nextTick} from 'process';\ninherits(Writable, EventEmitter);\n\nfunction nop() {}\n\nfunction WriteReq(chunk, encoding, cb) {\n  this.chunk = chunk;\n  this.encoding = encoding;\n  this.callback = cb;\n  this.next = null;\n}\n\nfunction WritableState(options, stream) {\n  Object.defineProperty(this, 'buffer', {\n    get: deprecate(function () {\n      return this.getBuffer();\n    }, '_writableState.buffer is deprecated. Use _writableState.getBuffer ' + 'instead.')\n  });\n  options = options || {};\n\n  // object stream flag to indicate whether or not this stream\n  // contains buffers or objects.\n  this.objectMode = !!options.objectMode;\n\n  if (stream instanceof Duplex) this.objectMode = this.objectMode || !!options.writableObjectMode;\n\n  // the point at which write() starts returning false\n  // Note: 0 is a valid value, means that we always return false if\n  // the entire buffer is not flushed immediately on write()\n  var hwm = options.highWaterMark;\n  var defaultHwm = this.objectMode ? 16 : 16 * 1024;\n  this.highWaterMark = hwm || hwm === 0 ? hwm : defaultHwm;\n\n  // cast to ints.\n  this.highWaterMark = ~ ~this.highWaterMark;\n\n  this.needDrain = false;\n  // at the start of calling end()\n  this.ending = false;\n  // when end() has been called, and returned\n  this.ended = false;\n  // when 'finish' is emitted\n  this.finished = false;\n\n  // should we decode strings into buffers before passing to _write?\n  // this is here so that some node-core streams can optimize string\n  // handling at a lower level.\n  var noDecode = options.decodeStrings === false;\n  this.decodeStrings = !noDecode;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // not an actual buffer we keep track of, but a measurement\n  // of how much we're waiting to get pushed to some underlying\n  // socket or file.\n  this.length = 0;\n\n  // a flag to see when we're in the middle of a write.\n  this.writing = false;\n\n  // when true all writes will be buffered until .uncork() call\n  this.corked = 0;\n\n  // a flag to be able to tell if the onwrite cb is called immediately,\n  // or on a later tick.  We set this to true at first, because any\n  // actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first write call.\n  this.sync = true;\n\n  // a flag to know if we're processing previously buffered items, which\n  // may call the _write() callback in the same tick, so that we don't\n  // end up in an overlapped onwrite situation.\n  this.bufferProcessing = false;\n\n  // the callback that's passed to _write(chunk,cb)\n  this.onwrite = function (er) {\n    onwrite(stream, er);\n  };\n\n  // the callback that the user supplies to write(chunk,encoding,cb)\n  this.writecb = null;\n\n  // the amount that is being written when _write is called.\n  this.writelen = 0;\n\n  this.bufferedRequest = null;\n  this.lastBufferedRequest = null;\n\n  // number of pending user-supplied write callbacks\n  // this must be 0 before 'finish' can be emitted\n  this.pendingcb = 0;\n\n  // emit prefinish if the only thing we're waiting for is _write cbs\n  // This is relevant for synchronous Transform streams\n  this.prefinished = false;\n\n  // True if the error was already emitted and should not be thrown again\n  this.errorEmitted = false;\n\n  // count buffered requests\n  this.bufferedRequestCount = 0;\n\n  // allocate the first CorkedRequest, there is always\n  // one allocated and free to use, and we maintain at most two\n  this.corkedRequestsFree = new CorkedRequest(this);\n}\n\nWritableState.prototype.getBuffer = function writableStateGetBuffer() {\n  var current = this.bufferedRequest;\n  var out = [];\n  while (current) {\n    out.push(current);\n    current = current.next;\n  }\n  return out;\n};\n\nexport default Writable;\nexport function Writable(options) {\n\n  // Writable ctor is applied to Duplexes, though they're not\n  // instanceof Writable, they're instanceof Readable.\n  if (!(this instanceof Writable) && !(this instanceof Duplex)) return new Writable(options);\n\n  this._writableState = new WritableState(options, this);\n\n  // legacy.\n  this.writable = true;\n\n  if (options) {\n    if (typeof options.write === 'function') this._write = options.write;\n\n    if (typeof options.writev === 'function') this._writev = options.writev;\n  }\n\n  EventEmitter.call(this);\n}\n\n// Otherwise people can pipe Writable streams, which is just wrong.\nWritable.prototype.pipe = function () {\n  this.emit('error', new Error('Cannot pipe, not readable'));\n};\n\nfunction writeAfterEnd(stream, cb) {\n  var er = new Error('write after end');\n  // TODO: defer error events consistently everywhere, not just the cb\n  stream.emit('error', er);\n  nextTick(cb, er);\n}\n\n// If we get something that is not a buffer, string, null, or undefined,\n// and we're not in objectMode, then that's an error.\n// Otherwise stream chunks are all considered to be of length=1, and the\n// watermarks determine how many objects to keep in the buffer, rather than\n// how many bytes or characters.\nfunction validChunk(stream, state, chunk, cb) {\n  var valid = true;\n  var er = false;\n  // Always throw error if a null is written\n  // if we are not in object mode then throw\n  // if it is not a buffer, string, or undefined.\n  if (chunk === null) {\n    er = new TypeError('May not write null values to stream');\n  } else if (!Buffer.isBuffer(chunk) && typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {\n    er = new TypeError('Invalid non-string/buffer chunk');\n  }\n  if (er) {\n    stream.emit('error', er);\n    nextTick(cb, er);\n    valid = false;\n  }\n  return valid;\n}\n\nWritable.prototype.write = function (chunk, encoding, cb) {\n  var state = this._writableState;\n  var ret = false;\n\n  if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (Buffer.isBuffer(chunk)) encoding = 'buffer';else if (!encoding) encoding = state.defaultEncoding;\n\n  if (typeof cb !== 'function') cb = nop;\n\n  if (state.ended) writeAfterEnd(this, cb);else if (validChunk(this, state, chunk, cb)) {\n    state.pendingcb++;\n    ret = writeOrBuffer(this, state, chunk, encoding, cb);\n  }\n\n  return ret;\n};\n\nWritable.prototype.cork = function () {\n  var state = this._writableState;\n\n  state.corked++;\n};\n\nWritable.prototype.uncork = function () {\n  var state = this._writableState;\n\n  if (state.corked) {\n    state.corked--;\n\n    if (!state.writing && !state.corked && !state.finished && !state.bufferProcessing && state.bufferedRequest) clearBuffer(this, state);\n  }\n};\n\nWritable.prototype.setDefaultEncoding = function setDefaultEncoding(encoding) {\n  // node::ParseEncoding() requires lower case.\n  if (typeof encoding === 'string') encoding = encoding.toLowerCase();\n  if (!(['hex', 'utf8', 'utf-8', 'ascii', 'binary', 'base64', 'ucs2', 'ucs-2', 'utf16le', 'utf-16le', 'raw'].indexOf((encoding + '').toLowerCase()) > -1)) throw new TypeError('Unknown encoding: ' + encoding);\n  this._writableState.defaultEncoding = encoding;\n  return this;\n};\n\nfunction decodeChunk(state, chunk, encoding) {\n  if (!state.objectMode && state.decodeStrings !== false && typeof chunk === 'string') {\n    chunk = Buffer.from(chunk, encoding);\n  }\n  return chunk;\n}\n\n// if we're already writing something, then just put this\n// in the queue, and wait our turn.  Otherwise, call _write\n// If we return false, then we need a drain event, so set that flag.\nfunction writeOrBuffer(stream, state, chunk, encoding, cb) {\n  chunk = decodeChunk(state, chunk, encoding);\n\n  if (Buffer.isBuffer(chunk)) encoding = 'buffer';\n  var len = state.objectMode ? 1 : chunk.length;\n\n  state.length += len;\n\n  var ret = state.length < state.highWaterMark;\n  // we must ensure that previous needDrain will not be reset to false.\n  if (!ret) state.needDrain = true;\n\n  if (state.writing || state.corked) {\n    var last = state.lastBufferedRequest;\n    state.lastBufferedRequest = new WriteReq(chunk, encoding, cb);\n    if (last) {\n      last.next = state.lastBufferedRequest;\n    } else {\n      state.bufferedRequest = state.lastBufferedRequest;\n    }\n    state.bufferedRequestCount += 1;\n  } else {\n    doWrite(stream, state, false, len, chunk, encoding, cb);\n  }\n\n  return ret;\n}\n\nfunction doWrite(stream, state, writev, len, chunk, encoding, cb) {\n  state.writelen = len;\n  state.writecb = cb;\n  state.writing = true;\n  state.sync = true;\n  if (writev) stream._writev(chunk, state.onwrite);else stream._write(chunk, encoding, state.onwrite);\n  state.sync = false;\n}\n\nfunction onwriteError(stream, state, sync, er, cb) {\n  --state.pendingcb;\n  if (sync) nextTick(cb, er);else cb(er);\n\n  stream._writableState.errorEmitted = true;\n  stream.emit('error', er);\n}\n\nfunction onwriteStateUpdate(state) {\n  state.writing = false;\n  state.writecb = null;\n  state.length -= state.writelen;\n  state.writelen = 0;\n}\n\nfunction onwrite(stream, er) {\n  var state = stream._writableState;\n  var sync = state.sync;\n  var cb = state.writecb;\n\n  onwriteStateUpdate(state);\n\n  if (er) onwriteError(stream, state, sync, er, cb);else {\n    // Check if we're actually ready to finish, but don't emit yet\n    var finished = needFinish(state);\n\n    if (!finished && !state.corked && !state.bufferProcessing && state.bufferedRequest) {\n      clearBuffer(stream, state);\n    }\n\n    if (sync) {\n      /*<replacement>*/\n        nextTick(afterWrite, stream, state, finished, cb);\n      /*</replacement>*/\n    } else {\n        afterWrite(stream, state, finished, cb);\n      }\n  }\n}\n\nfunction afterWrite(stream, state, finished, cb) {\n  if (!finished) onwriteDrain(stream, state);\n  state.pendingcb--;\n  cb();\n  finishMaybe(stream, state);\n}\n\n// Must force callback to be called on nextTick, so that we don't\n// emit 'drain' before the write() consumer gets the 'false' return\n// value, and has a chance to attach a 'drain' listener.\nfunction onwriteDrain(stream, state) {\n  if (state.length === 0 && state.needDrain) {\n    state.needDrain = false;\n    stream.emit('drain');\n  }\n}\n\n// if there's something in the buffer waiting, then process it\nfunction clearBuffer(stream, state) {\n  state.bufferProcessing = true;\n  var entry = state.bufferedRequest;\n\n  if (stream._writev && entry && entry.next) {\n    // Fast case, write everything using _writev()\n    var l = state.bufferedRequestCount;\n    var buffer = new Array(l);\n    var holder = state.corkedRequestsFree;\n    holder.entry = entry;\n\n    var count = 0;\n    while (entry) {\n      buffer[count] = entry;\n      entry = entry.next;\n      count += 1;\n    }\n\n    doWrite(stream, state, true, state.length, buffer, '', holder.finish);\n\n    // doWrite is almost always async, defer these to save a bit of time\n    // as the hot path ends with doWrite\n    state.pendingcb++;\n    state.lastBufferedRequest = null;\n    if (holder.next) {\n      state.corkedRequestsFree = holder.next;\n      holder.next = null;\n    } else {\n      state.corkedRequestsFree = new CorkedRequest(state);\n    }\n  } else {\n    // Slow case, write chunks one-by-one\n    while (entry) {\n      var chunk = entry.chunk;\n      var encoding = entry.encoding;\n      var cb = entry.callback;\n      var len = state.objectMode ? 1 : chunk.length;\n\n      doWrite(stream, state, false, len, chunk, encoding, cb);\n      entry = entry.next;\n      // if we didn't call the onwrite immediately, then\n      // it means that we need to wait until it does.\n      // also, that means that the chunk and cb are currently\n      // being processed, so move the buffer counter past them.\n      if (state.writing) {\n        break;\n      }\n    }\n\n    if (entry === null) state.lastBufferedRequest = null;\n  }\n\n  state.bufferedRequestCount = 0;\n  state.bufferedRequest = entry;\n  state.bufferProcessing = false;\n}\n\nWritable.prototype._write = function (chunk, encoding, cb) {\n  cb(new Error('not implemented'));\n};\n\nWritable.prototype._writev = null;\n\nWritable.prototype.end = function (chunk, encoding, cb) {\n  var state = this._writableState;\n\n  if (typeof chunk === 'function') {\n    cb = chunk;\n    chunk = null;\n    encoding = null;\n  } else if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (chunk !== null && chunk !== undefined) this.write(chunk, encoding);\n\n  // .end() fully uncorks\n  if (state.corked) {\n    state.corked = 1;\n    this.uncork();\n  }\n\n  // ignore unnecessary end() calls.\n  if (!state.ending && !state.finished) endWritable(this, state, cb);\n};\n\nfunction needFinish(state) {\n  return state.ending && state.length === 0 && state.bufferedRequest === null && !state.finished && !state.writing;\n}\n\nfunction prefinish(stream, state) {\n  if (!state.prefinished) {\n    state.prefinished = true;\n    stream.emit('prefinish');\n  }\n}\n\nfunction finishMaybe(stream, state) {\n  var need = needFinish(state);\n  if (need) {\n    if (state.pendingcb === 0) {\n      prefinish(stream, state);\n      state.finished = true;\n      stream.emit('finish');\n    } else {\n      prefinish(stream, state);\n    }\n  }\n  return need;\n}\n\nfunction endWritable(stream, state, cb) {\n  state.ending = true;\n  finishMaybe(stream, state);\n  if (cb) {\n    if (state.finished) nextTick(cb);else stream.once('finish', cb);\n  }\n  state.ended = true;\n  stream.writable = false;\n}\n\n// It seems a linked list but it is not\n// there will be only 2 of these for each stream\nfunction CorkedRequest(state) {\n  var _this = this;\n\n  this.next = null;\n  this.entry = null;\n\n  this.finish = function (err) {\n    var entry = _this.entry;\n    _this.entry = null;\n    while (entry) {\n      var cb = entry.callback;\n      state.pendingcb--;\n      cb(err);\n      entry = entry.next;\n    }\n    if (state.corkedRequestsFree) {\n      state.corkedRequestsFree.next = _this;\n    } else {\n      state.corkedRequestsFree = _this;\n    }\n  };\n}\n","\nimport {inherits} from 'util';\nimport {nextTick} from 'process';\nimport {Readable} from './readable';\nimport {Writable} from './writable';\n\n\ninherits(Duplex, Readable);\n\nvar keys = Object.keys(Writable.prototype);\nfor (var v = 0; v < keys.length; v++) {\n  var method = keys[v];\n  if (!Duplex.prototype[method]) Duplex.prototype[method] = Writable.prototype[method];\n}\nexport default Duplex;\nexport function Duplex(options) {\n  if (!(this instanceof Duplex)) return new Duplex(options);\n\n  Readable.call(this, options);\n  Writable.call(this, options);\n\n  if (options && options.readable === false) this.readable = false;\n\n  if (options && options.writable === false) this.writable = false;\n\n  this.allowHalfOpen = true;\n  if (options && options.allowHalfOpen === false) this.allowHalfOpen = false;\n\n  this.once('end', onend);\n}\n\n// the no-half-open enforcer\nfunction onend() {\n  // if we allow half-open state, or if the writable side ended,\n  // then we're ok.\n  if (this.allowHalfOpen || this._writableState.ended) return;\n\n  // no more data can be written.\n  // But allow more writes to happen in this tick.\n  nextTick(onEndNT, this);\n}\n\nfunction onEndNT(self) {\n  self.end();\n}\n","// a transform stream is a readable/writable stream where you do\n// something with the data.  Sometimes it's called a \"filter\",\n// but that's not a great name for it, since that implies a thing where\n// some bits pass through, and others are simply ignored.  (That would\n// be a valid example of a transform, of course.)\n//\n// While the output is causally related to the input, it's not a\n// necessarily symmetric or synchronous transformation.  For example,\n// a zlib stream might take multiple plain-text writes(), and then\n// emit a single compressed chunk some time in the future.\n//\n// Here's how this works:\n//\n// The Transform stream has all the aspects of the readable and writable\n// stream classes.  When you write(chunk), that calls _write(chunk,cb)\n// internally, and returns false if there's a lot of pending writes\n// buffered up.  When you call read(), that calls _read(n) until\n// there's enough pending readable data buffered up.\n//\n// In a transform stream, the written data is placed in a buffer.  When\n// _read(n) is called, it transforms the queued up data, calling the\n// buffered _write cb's as it consumes chunks.  If consuming a single\n// written chunk would result in multiple output chunks, then the first\n// outputted bit calls the readcb, and subsequent chunks just go into\n// the read buffer, and will cause it to emit 'readable' if necessary.\n//\n// This way, back-pressure is actually determined by the reading side,\n// since _read has to be called to start processing a new chunk.  However,\n// a pathological inflate type of transform can cause excessive buffering\n// here.  For example, imagine a stream where every byte of input is\n// interpreted as an integer from 0-255, and then results in that many\n// bytes of output.  Writing the 4 bytes {ff,ff,ff,ff} would result in\n// 1kb of data being output.  In this case, you could write a very small\n// amount of input, and end up with a very large amount of output.  In\n// such a pathological inflating mechanism, there'd be no way to tell\n// the system to stop doing the transform.  A single 4MB write could\n// cause the system to run out of memory.\n//\n// However, even in such a pathological case, only a single written chunk\n// would be consumed, and then the rest would wait (un-transformed) until\n// the results of the previous transformed chunk were consumed.\n\n\nimport {Duplex} from './duplex';\n\n\nimport {inherits} from 'util';\ninherits(Transform, Duplex);\n\nfunction TransformState(stream) {\n  this.afterTransform = function (er, data) {\n    return afterTransform(stream, er, data);\n  };\n\n  this.needTransform = false;\n  this.transforming = false;\n  this.writecb = null;\n  this.writechunk = null;\n  this.writeencoding = null;\n}\n\nfunction afterTransform(stream, er, data) {\n  var ts = stream._transformState;\n  ts.transforming = false;\n\n  var cb = ts.writecb;\n\n  if (!cb) return stream.emit('error', new Error('no writecb in Transform class'));\n\n  ts.writechunk = null;\n  ts.writecb = null;\n\n  if (data !== null && data !== undefined) stream.push(data);\n\n  cb(er);\n\n  var rs = stream._readableState;\n  rs.reading = false;\n  if (rs.needReadable || rs.length < rs.highWaterMark) {\n    stream._read(rs.highWaterMark);\n  }\n}\nexport default Transform;\nexport function Transform(options) {\n  if (!(this instanceof Transform)) return new Transform(options);\n\n  Duplex.call(this, options);\n\n  this._transformState = new TransformState(this);\n\n  // when the writable side finishes, then flush out anything remaining.\n  var stream = this;\n\n  // start out asking for a readable event once data is transformed.\n  this._readableState.needReadable = true;\n\n  // we have implemented the _read method, and done the other things\n  // that Readable wants before the first _read call, so unset the\n  // sync guard flag.\n  this._readableState.sync = false;\n\n  if (options) {\n    if (typeof options.transform === 'function') this._transform = options.transform;\n\n    if (typeof options.flush === 'function') this._flush = options.flush;\n  }\n\n  this.once('prefinish', function () {\n    if (typeof this._flush === 'function') this._flush(function (er) {\n      done(stream, er);\n    });else done(stream);\n  });\n}\n\nTransform.prototype.push = function (chunk, encoding) {\n  this._transformState.needTransform = false;\n  return Duplex.prototype.push.call(this, chunk, encoding);\n};\n\n// This is the part where you do stuff!\n// override this function in implementation classes.\n// 'chunk' is an input chunk.\n//\n// Call `push(newChunk)` to pass along transformed output\n// to the readable side.  You may call 'push' zero or more times.\n//\n// Call `cb(err)` when you are done with this chunk.  If you pass\n// an error, then that'll put the hurt on the whole operation.  If you\n// never call cb(), then you'll never get another chunk.\nTransform.prototype._transform = function (chunk, encoding, cb) {\n  throw new Error('Not implemented');\n};\n\nTransform.prototype._write = function (chunk, encoding, cb) {\n  var ts = this._transformState;\n  ts.writecb = cb;\n  ts.writechunk = chunk;\n  ts.writeencoding = encoding;\n  if (!ts.transforming) {\n    var rs = this._readableState;\n    if (ts.needTransform || rs.needReadable || rs.length < rs.highWaterMark) this._read(rs.highWaterMark);\n  }\n};\n\n// Doesn't matter what the args are here.\n// _transform does all the work.\n// That we got here means that the readable side wants more data.\nTransform.prototype._read = function (n) {\n  var ts = this._transformState;\n\n  if (ts.writechunk !== null && ts.writecb && !ts.transforming) {\n    ts.transforming = true;\n    this._transform(ts.writechunk, ts.writeencoding, ts.afterTransform);\n  } else {\n    // mark that we need a transform, so that any data that comes in\n    // will get processed, now that we've asked for it.\n    ts.needTransform = true;\n  }\n};\n\nfunction done(stream, er) {\n  if (er) return stream.emit('error', er);\n\n  // if there's nothing in the write buffer, then that means\n  // that nothing more will ever be provided\n  var ws = stream._writableState;\n  var ts = stream._transformState;\n\n  if (ws.length) throw new Error('Calling transform done when ws.length != 0');\n\n  if (ts.transforming) throw new Error('Calling transform done when still transforming');\n\n  return stream.push(null);\n}\n","\nimport {Transform} from './transform';\n\nimport {inherits} from 'util';\ninherits(PassThrough, Transform);\nexport default PassThrough;\nexport function PassThrough(options) {\n  if (!(this instanceof PassThrough)) return new PassThrough(options);\n\n  Transform.call(this, options);\n}\n\nPassThrough.prototype._transform = function (chunk, encoding, cb) {\n  cb(null, chunk);\n};\n","import EE from 'events';\nimport {inherits} from 'util';\n\nimport {Duplex} from './readable-stream/duplex.js';\nimport {Readable} from './readable-stream/readable.js';\nimport {Writable} from './readable-stream/writable.js';\nimport {Transform} from './readable-stream/transform.js';\nimport {PassThrough} from './readable-stream/passthrough.js';\ninherits(Stream, EE);\nStream.Readable = Readable;\nStream.Writable = Writable;\nStream.Duplex = Duplex;\nStream.Transform = Transform;\nStream.PassThrough = PassThrough;\n\n// Backwards-compat with node 0.4.x\nStream.Stream = Stream;\n\nexport default Stream;\nexport {Readable,Writable,Duplex,Transform,PassThrough,Stream}\n\n// old-style streams.  Note that the pipe method (the only relevant\n// part of this class) is overridden in the Readable class.\n\nfunction Stream() {\n  EE.call(this);\n}\n\nStream.prototype.pipe = function(dest, options) {\n  var source = this;\n\n  function ondata(chunk) {\n    if (dest.writable) {\n      if (false === dest.write(chunk) && source.pause) {\n        source.pause();\n      }\n    }\n  }\n\n  source.on('data', ondata);\n\n  function ondrain() {\n    if (source.readable && source.resume) {\n      source.resume();\n    }\n  }\n\n  dest.on('drain', ondrain);\n\n  // If the 'end' option is not supplied, dest.end() will be called when\n  // source gets the 'end' or 'close' events.  Only dest.end() once.\n  if (!dest._isStdio && (!options || options.end !== false)) {\n    source.on('end', onend);\n    source.on('close', onclose);\n  }\n\n  var didOnEnd = false;\n  function onend() {\n    if (didOnEnd) return;\n    didOnEnd = true;\n\n    dest.end();\n  }\n\n\n  function onclose() {\n    if (didOnEnd) return;\n    didOnEnd = true;\n\n    if (typeof dest.destroy === 'function') dest.destroy();\n  }\n\n  // don't leave dangling pipes when there are errors.\n  function onerror(er) {\n    cleanup();\n    if (EE.listenerCount(this, 'error') === 0) {\n      throw er; // Unhandled stream error in pipe.\n    }\n  }\n\n  source.on('error', onerror);\n  dest.on('error', onerror);\n\n  // remove all the event listeners that were added.\n  function cleanup() {\n    source.removeListener('data', ondata);\n    dest.removeListener('drain', ondrain);\n\n    source.removeListener('end', onend);\n    source.removeListener('close', onclose);\n\n    source.removeListener('error', onerror);\n    dest.removeListener('error', onerror);\n\n    source.removeListener('end', cleanup);\n    source.removeListener('close', cleanup);\n\n    dest.removeListener('close', cleanup);\n  }\n\n  source.on('end', cleanup);\n  source.on('close', cleanup);\n\n  dest.on('close', cleanup);\n\n  dest.emit('pipe', source);\n\n  // Allow for unix-like usage: A.pipe(B).pipe(C)\n  return dest;\n};\n","// **N3Store** objects store N3 quads by graph in memory.\nimport N3DataFactory from './N3DataFactory';\nimport { Readable } from 'stream';\nimport namespaces from './IRIs';\n\nconst { toId, fromId } = N3DataFactory.internal;\n\n// ## Constructor\nexport default class N3Store {\n  constructor(quads, options) {\n    // The number of quads is initially zero\n    this._size = 0;\n    // `_graphs` contains subject, predicate, and object indexes per graph\n    this._graphs = Object.create(null);\n    // `_ids` maps entities such as `http://xmlns.com/foaf/0.1/name` to numbers,\n    // saving memory by using only numbers as keys in `_graphs`\n    this._id = 0;\n    this._ids = Object.create(null);\n    this._ids['><'] = 0; // dummy entry, so the first actual key is non-zero\n    this._entities = Object.create(null); // inverse of `_ids`\n    // `_blankNodeIndex` is the index of the last automatically named blank node\n    this._blankNodeIndex = 0;\n\n    // Shift parameters if `quads` is not given\n    if (!options && quads && !quads[0])\n      options = quads, quads = null;\n    options = options || {};\n    this._factory = options.factory || N3DataFactory;\n\n    // Add quads if passed\n    if (quads)\n      this.addQuads(quads);\n  }\n\n  // ## Public properties\n\n  // ### `size` returns the number of quads in the store\n  get size() {\n    // Return the quad count if if was cached\n    var size = this._size;\n    if (size !== null)\n      return size;\n\n    // Calculate the number of quads by counting to the deepest level\n    size = 0;\n    var graphs = this._graphs, subjects, subject;\n    for (var graphKey in graphs)\n      for (var subjectKey in (subjects = graphs[graphKey].subjects))\n        for (var predicateKey in (subject = subjects[subjectKey]))\n          size += Object.keys(subject[predicateKey]).length;\n    return this._size = size;\n  }\n\n  // ## Private methods\n\n  // ### `_addToIndex` adds a quad to a three-layered index.\n  // Returns if the index has changed, if the entry did not already exist.\n  _addToIndex(index0, key0, key1, key2) {\n    // Create layers as necessary\n    var index1 = index0[key0] || (index0[key0] = {});\n    var index2 = index1[key1] || (index1[key1] = {});\n    // Setting the key to _any_ value signals the presence of the quad\n    var existed = key2 in index2;\n    if (!existed)\n      index2[key2] = null;\n    return !existed;\n  }\n\n  // ### `_removeFromIndex` removes a quad from a three-layered index\n  _removeFromIndex(index0, key0, key1, key2) {\n    // Remove the quad from the index\n    var index1 = index0[key0], index2 = index1[key1], key;\n    delete index2[key2];\n\n    // Remove intermediary index layers if they are empty\n    for (key in index2) return;\n    delete index1[key1];\n    for (key in index1) return;\n    delete index0[key0];\n  }\n\n  // ### `_findInIndex` finds a set of quads in a three-layered index.\n  // The index base is `index0` and the keys at each level are `key0`, `key1`, and `key2`.\n  // Any of these keys can be undefined, which is interpreted as a wildcard.\n  // `name0`, `name1`, and `name2` are the names of the keys at each level,\n  // used when reconstructing the resulting quad\n  // (for instance: _subject_, _predicate_, and _object_).\n  // Finally, `graph` will be the graph of the created quads.\n  // If `callback` is given, each result is passed through it\n  // and iteration halts when it returns truthy for any quad.\n  // If instead `array` is given, each result is added to the array.\n  _findInIndex(index0, key0, key1, key2, name0, name1, name2, graph, callback, array) {\n    var tmp, index1, index2, varCount = !key0 + !key1 + !key2,\n        // depending on the number of variables, keys or reverse index are faster\n        entityKeys = varCount > 1 ? Object.keys(this._ids) : this._entities;\n\n    // If a key is specified, use only that part of index 0.\n    if (key0) (tmp = index0, index0 = {})[key0] = tmp[key0];\n    for (var value0 in index0) {\n      var entity0 = entityKeys[value0];\n\n      if (index1 = index0[value0]) {\n        // If a key is specified, use only that part of index 1.\n        if (key1) (tmp = index1, index1 = {})[key1] = tmp[key1];\n        for (var value1 in index1) {\n          var entity1 = entityKeys[value1];\n\n          if (index2 = index1[value1]) {\n            // If a key is specified, use only that part of index 2, if it exists.\n            var values = key2 ? (key2 in index2 ? [key2] : []) : Object.keys(index2);\n            // Create quads for all items found in index 2.\n            for (var l = 0; l < values.length; l++) {\n              var parts = { subject: null, predicate: null, object: null };\n              parts[name0] = fromId(entity0, this._factory);\n              parts[name1] = fromId(entity1, this._factory);\n              parts[name2] = fromId(entityKeys[values[l]], this._factory);\n              var quad = this._factory.quad(\n                parts.subject, parts.predicate, parts.object, fromId(graph, this._factory));\n              if (array)\n                array.push(quad);\n              else if (callback(quad))\n                return true;\n            }\n          }\n        }\n      }\n    }\n    return array;\n  }\n\n  // ### `_loop` executes the callback on all keys of index 0\n  _loop(index0, callback) {\n    for (var key0 in index0)\n      callback(key0);\n  }\n\n  // ### `_loopByKey0` executes the callback on all keys of a certain entry in index 0\n  _loopByKey0(index0, key0, callback) {\n    var index1, key1;\n    if (index1 = index0[key0]) {\n      for (key1 in index1)\n        callback(key1);\n    }\n  }\n\n  // ### `_loopByKey1` executes the callback on given keys of all entries in index 0\n  _loopByKey1(index0, key1, callback) {\n    var key0, index1;\n    for (key0 in index0) {\n      index1 = index0[key0];\n      if (index1[key1])\n        callback(key0);\n    }\n  }\n\n  // ### `_loopBy2Keys` executes the callback on given keys of certain entries in index 2\n  _loopBy2Keys(index0, key0, key1, callback) {\n    var index1, index2, key2;\n    if ((index1 = index0[key0]) && (index2 = index1[key1])) {\n      for (key2 in index2)\n        callback(key2);\n    }\n  }\n\n  // ### `_countInIndex` counts matching quads in a three-layered index.\n  // The index base is `index0` and the keys at each level are `key0`, `key1`, and `key2`.\n  // Any of these keys can be undefined, which is interpreted as a wildcard.\n  _countInIndex(index0, key0, key1, key2) {\n    var count = 0, tmp, index1, index2;\n\n    // If a key is specified, count only that part of index 0\n    if (key0) (tmp = index0, index0 = {})[key0] = tmp[key0];\n    for (var value0 in index0) {\n      if (index1 = index0[value0]) {\n        // If a key is specified, count only that part of index 1\n        if (key1) (tmp = index1, index1 = {})[key1] = tmp[key1];\n        for (var value1 in index1) {\n          if (index2 = index1[value1]) {\n            // If a key is specified, count the quad if it exists\n            if (key2) (key2 in index2) && count++;\n            // Otherwise, count all quads\n            else count += Object.keys(index2).length;\n          }\n        }\n      }\n    }\n    return count;\n  }\n\n  // ### `_getGraphs` returns an array with the given graph,\n  // or all graphs if the argument is null or undefined.\n  _getGraphs(graph) {\n    if (!isString(graph))\n      return this._graphs;\n    var graphs = {};\n    graphs[graph] = this._graphs[graph];\n    return graphs;\n  }\n\n  // ### `_uniqueEntities` returns a function that accepts an entity ID\n  // and passes the corresponding entity to callback if it hasn't occurred before.\n  _uniqueEntities(callback) {\n    var uniqueIds = Object.create(null), entities = this._entities;\n    return function (id) {\n      if (!(id in uniqueIds)) {\n        uniqueIds[id] = true;\n        callback(fromId(entities[id]));\n      }\n    };\n  }\n\n  // ## Public methods\n\n  // ### `addQuad` adds a new quad to the store.\n  // Returns if the quad index has changed, if the quad did not already exist.\n  addQuad(subject, predicate, object, graph) {\n    // Shift arguments if a quad object is given instead of components\n    if (!predicate)\n      graph = subject.graph, object = subject.object,\n        predicate = subject.predicate, subject = subject.subject;\n\n    // Convert terms to internal string representation\n    subject = toId(subject);\n    predicate = toId(predicate);\n    object = toId(object);\n    graph = toId(graph);\n\n    // Find the graph that will contain the triple\n    var graphItem = this._graphs[graph];\n    // Create the graph if it doesn't exist yet\n    if (!graphItem) {\n      graphItem = this._graphs[graph] = { subjects: {}, predicates: {}, objects: {} };\n      // Freezing a graph helps subsequent `add` performance,\n      // and properties will never be modified anyway\n      Object.freeze(graphItem);\n    }\n\n    // Since entities can often be long IRIs, we avoid storing them in every index.\n    // Instead, we have a separate index that maps entities to numbers,\n    // which are then used as keys in the other indexes.\n    var ids = this._ids;\n    var entities = this._entities;\n    subject   = ids[subject]   || (ids[entities[++this._id] = subject]   = this._id);\n    predicate = ids[predicate] || (ids[entities[++this._id] = predicate] = this._id);\n    object    = ids[object]    || (ids[entities[++this._id] = object]    = this._id);\n\n    var changed = this._addToIndex(graphItem.subjects,   subject,   predicate, object);\n    this._addToIndex(graphItem.predicates, predicate, object,    subject);\n    this._addToIndex(graphItem.objects,    object,    subject,   predicate);\n\n    // The cached quad count is now invalid\n    this._size = null;\n    return changed;\n  }\n\n  // ### `addQuads` adds multiple quads to the store\n  addQuads(quads) {\n    for (var i = 0; i < quads.length; i++)\n      this.addQuad(quads[i]);\n  }\n\n  // ### `import` adds a stream of quads to the store\n  import(stream) {\n    var self = this;\n    stream.on('data', function (quad) { self.addQuad(quad); });\n    return stream;\n  }\n\n  // ### `removeQuad` removes a quad from the store if it exists\n  removeQuad(subject, predicate, object, graph) {\n    // Shift arguments if a quad object is given instead of components\n    if (!predicate)\n      graph = subject.graph, object = subject.object,\n        predicate = subject.predicate, subject = subject.subject;\n\n    // Convert terms to internal string representation\n    subject = toId(subject);\n    predicate = toId(predicate);\n    object = toId(object);\n    graph = toId(graph);\n\n    // Find internal identifiers for all components\n    // and verify the quad exists.\n    var graphItem, ids = this._ids, graphs = this._graphs, subjects, predicates;\n    if (!(subject    = ids[subject]) || !(predicate = ids[predicate]) ||\n        !(object     = ids[object])  || !(graphItem = graphs[graph])  ||\n        !(subjects   = graphItem.subjects[subject]) ||\n        !(predicates = subjects[predicate]) ||\n        !(object in predicates))\n      return false;\n\n    // Remove it from all indexes\n    this._removeFromIndex(graphItem.subjects,   subject,   predicate, object);\n    this._removeFromIndex(graphItem.predicates, predicate, object,    subject);\n    this._removeFromIndex(graphItem.objects,    object,    subject,   predicate);\n    if (this._size !== null) this._size--;\n\n    // Remove the graph if it is empty\n    for (subject in graphItem.subjects) return true;\n    delete graphs[graph];\n    return true;\n  }\n\n  // ### `removeQuads` removes multiple quads from the store\n  removeQuads(quads) {\n    for (var i = 0; i < quads.length; i++)\n      this.removeQuad(quads[i]);\n  }\n\n  // ### `remove` removes a stream of quads from the store\n  remove(stream) {\n    var self = this;\n    stream.on('data', function (quad) { self.removeQuad(quad); });\n    return stream;\n  }\n\n  // ### `removeMatches` removes all matching quads from the store\n  // Setting any field to `undefined` or `null` indicates a wildcard.\n  removeMatches(subject, predicate, object, graph) {\n    return this.remove(this.match(subject, predicate, object, graph));\n  }\n\n  // ### `deleteGraph` removes all triples with the given graph from the store\n  deleteGraph(graph) {\n    return this.removeMatches(null, null, null, graph);\n  }\n\n  // ### `getQuads` returns an array of quads matching a pattern.\n  // Setting any field to `undefined` or `null` indicates a wildcard.\n  getQuads(subject, predicate, object, graph) {\n    // Convert terms to internal string representation\n    subject = subject && toId(subject);\n    predicate = predicate && toId(predicate);\n    object = object && toId(object);\n    graph = graph && toId(graph);\n\n    var quads = [], graphs = this._getGraphs(graph), content,\n        ids = this._ids, subjectId, predicateId, objectId;\n\n    // Translate IRIs to internal index keys.\n    if (isString(subject)   && !(subjectId   = ids[subject])   ||\n        isString(predicate) && !(predicateId = ids[predicate]) ||\n        isString(object)    && !(objectId    = ids[object]))\n      return quads;\n\n    for (var graphId in graphs) {\n      // Only if the specified graph contains triples, there can be results\n      if (content = graphs[graphId]) {\n        // Choose the optimal index, based on what fields are present\n        if (subjectId) {\n          if (objectId)\n            // If subject and object are given, the object index will be the fastest\n            this._findInIndex(content.objects, objectId, subjectId, predicateId,\n                              'object', 'subject', 'predicate', graphId, null, quads);\n          else\n            // If only subject and possibly predicate are given, the subject index will be the fastest\n            this._findInIndex(content.subjects, subjectId, predicateId, null,\n                              'subject', 'predicate', 'object', graphId, null, quads);\n        }\n        else if (predicateId)\n          // If only predicate and possibly object are given, the predicate index will be the fastest\n          this._findInIndex(content.predicates, predicateId, objectId, null,\n                            'predicate', 'object', 'subject', graphId, null, quads);\n        else if (objectId)\n          // If only object is given, the object index will be the fastest\n          this._findInIndex(content.objects, objectId, null, null,\n                            'object', 'subject', 'predicate', graphId, null, quads);\n        else\n          // If nothing is given, iterate subjects and predicates first\n          this._findInIndex(content.subjects, null, null, null,\n                            'subject', 'predicate', 'object', graphId, null, quads);\n      }\n    }\n    return quads;\n  }\n\n  // ### `match` returns a stream of quads matching a pattern.\n  // Setting any field to `undefined` or `null` indicates a wildcard.\n  match(subject, predicate, object, graph) {\n    var stream = new Readable({ objectMode: true });\n\n    // Initialize stream once it is being read\n    stream._read = () => {\n      for (var quad of this.getQuads(subject, predicate, object, graph))\n        stream.push(quad);\n      stream.push(null);\n    };\n\n    return stream;\n  }\n\n  // ### `countQuads` returns the number of quads matching a pattern.\n  // Setting any field to `undefined` or `null` indicates a wildcard.\n  countQuads(subject, predicate, object, graph) {\n    // Convert terms to internal string representation\n    subject = subject && toId(subject);\n    predicate = predicate && toId(predicate);\n    object = object && toId(object);\n    graph = graph && toId(graph);\n\n    var count = 0, graphs = this._getGraphs(graph), content,\n        ids = this._ids, subjectId, predicateId, objectId;\n\n    // Translate IRIs to internal index keys.\n    if (isString(subject)   && !(subjectId   = ids[subject])   ||\n        isString(predicate) && !(predicateId = ids[predicate]) ||\n        isString(object)    && !(objectId    = ids[object]))\n      return 0;\n\n    for (var graphId in graphs) {\n      // Only if the specified graph contains triples, there can be results\n      if (content = graphs[graphId]) {\n        // Choose the optimal index, based on what fields are present\n        if (subject) {\n          if (object)\n            // If subject and object are given, the object index will be the fastest\n            count += this._countInIndex(content.objects, objectId, subjectId, predicateId);\n          else\n            // If only subject and possibly predicate are given, the subject index will be the fastest\n            count += this._countInIndex(content.subjects, subjectId, predicateId, objectId);\n        }\n        else if (predicate) {\n          // If only predicate and possibly object are given, the predicate index will be the fastest\n          count += this._countInIndex(content.predicates, predicateId, objectId, subjectId);\n        }\n        else {\n          // If only object is possibly given, the object index will be the fastest\n          count += this._countInIndex(content.objects, objectId, subjectId, predicateId);\n        }\n      }\n    }\n    return count;\n  }\n\n  // ### `forEach` executes the callback on all quads.\n  // Setting any field to `undefined` or `null` indicates a wildcard.\n  forEach(callback, subject, predicate, object, graph) {\n    this.some(function (quad) {\n      callback(quad);\n      return false;\n    }, subject, predicate, object, graph);\n  }\n\n  // ### `every` executes the callback on all quads,\n  // and returns `true` if it returns truthy for all them.\n  // Setting any field to `undefined` or `null` indicates a wildcard.\n  every(callback, subject, predicate, object, graph) {\n    var some = false;\n    var every = !this.some(function (quad) {\n      some = true;\n      return !callback(quad);\n    }, subject, predicate, object, graph);\n    return some && every;\n  }\n\n  // ### `some` executes the callback on all quads,\n  // and returns `true` if it returns truthy for any of them.\n  // Setting any field to `undefined` or `null` indicates a wildcard.\n  some(callback, subject, predicate, object, graph) {\n    // Convert terms to internal string representation\n    subject = subject && toId(subject);\n    predicate = predicate && toId(predicate);\n    object = object && toId(object);\n    graph = graph && toId(graph);\n\n    var graphs = this._getGraphs(graph), content,\n        ids = this._ids, subjectId, predicateId, objectId;\n\n    // Translate IRIs to internal index keys.\n    if (isString(subject)   && !(subjectId   = ids[subject])   ||\n        isString(predicate) && !(predicateId = ids[predicate]) ||\n        isString(object)    && !(objectId    = ids[object]))\n      return false;\n\n    for (var graphId in graphs) {\n      // Only if the specified graph contains triples, there can be results\n      if (content = graphs[graphId]) {\n        // Choose the optimal index, based on what fields are present\n        if (subjectId) {\n          if (objectId) {\n          // If subject and object are given, the object index will be the fastest\n            if (this._findInIndex(content.objects, objectId, subjectId, predicateId,\n                                  'object', 'subject', 'predicate', graphId, callback, null))\n              return true;\n          }\n          else\n            // If only subject and possibly predicate are given, the subject index will be the fastest\n            if (this._findInIndex(content.subjects, subjectId, predicateId, null,\n                                  'subject', 'predicate', 'object', graphId, callback, null))\n              return true;\n        }\n        else if (predicateId) {\n          // If only predicate and possibly object are given, the predicate index will be the fastest\n          if (this._findInIndex(content.predicates, predicateId, objectId, null,\n                                'predicate', 'object', 'subject', graphId, callback, null)) {\n            return true;\n          }\n        }\n        else if (objectId) {\n          // If only object is given, the object index will be the fastest\n          if (this._findInIndex(content.objects, objectId, null, null,\n                                'object', 'subject', 'predicate', graphId, callback, null)) {\n            return true;\n          }\n        }\n        else\n        // If nothing is given, iterate subjects and predicates first\n        if (this._findInIndex(content.subjects, null, null, null,\n                              'subject', 'predicate', 'object', graphId, callback, null)) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  // ### `getSubjects` returns all subjects that match the pattern.\n  // Setting any field to `undefined` or `null` indicates a wildcard.\n  getSubjects(predicate, object, graph) {\n    var results = [];\n    this.forSubjects(function (s) { results.push(s); }, predicate, object, graph);\n    return results;\n  }\n\n  // ### `forSubjects` executes the callback on all subjects that match the pattern.\n  // Setting any field to `undefined` or `null` indicates a wildcard.\n  forSubjects(callback, predicate, object, graph) {\n    // Convert terms to internal string representation\n    predicate = predicate && toId(predicate);\n    object = object && toId(object);\n    graph = graph && toId(graph);\n\n    var ids = this._ids, graphs = this._getGraphs(graph), content, predicateId, objectId;\n    callback = this._uniqueEntities(callback);\n\n    // Translate IRIs to internal index keys.\n    if (isString(predicate) && !(predicateId = ids[predicate]) ||\n        isString(object)    && !(objectId    = ids[object]))\n      return;\n\n    for (graph in graphs) {\n      // Only if the specified graph contains triples, there can be results\n      if (content = graphs[graph]) {\n        // Choose optimal index based on which fields are wildcards\n        if (predicateId) {\n          if (objectId)\n            // If predicate and object are given, the POS index is best.\n            this._loopBy2Keys(content.predicates, predicateId, objectId, callback);\n          else\n            // If only predicate is given, the SPO index is best.\n            this._loopByKey1(content.subjects, predicateId, callback);\n        }\n        else if (objectId)\n          // If only object is given, the OSP index is best.\n          this._loopByKey0(content.objects, objectId, callback);\n        else\n          // If no params given, iterate all the subjects\n          this._loop(content.subjects, callback);\n      }\n    }\n  }\n\n  // ### `getPredicates` returns all predicates that match the pattern.\n  // Setting any field to `undefined` or `null` indicates a wildcard.\n  getPredicates(subject, object, graph) {\n    var results = [];\n    this.forPredicates(function (p) { results.push(p); }, subject, object, graph);\n    return results;\n  }\n\n  // ### `forPredicates` executes the callback on all predicates that match the pattern.\n  // Setting any field to `undefined` or `null` indicates a wildcard.\n  forPredicates(callback, subject, object, graph) {\n    // Convert terms to internal string representation\n    subject = subject && toId(subject);\n    object = object && toId(object);\n    graph = graph && toId(graph);\n\n    var ids = this._ids, graphs = this._getGraphs(graph), content, subjectId, objectId;\n    callback = this._uniqueEntities(callback);\n\n    // Translate IRIs to internal index keys.\n    if (isString(subject) && !(subjectId = ids[subject]) ||\n        isString(object)  && !(objectId  = ids[object]))\n      return;\n\n    for (graph in graphs) {\n      // Only if the specified graph contains triples, there can be results\n      if (content = graphs[graph]) {\n        // Choose optimal index based on which fields are wildcards\n        if (subjectId) {\n          if (objectId)\n            // If subject and object are given, the OSP index is best.\n            this._loopBy2Keys(content.objects, objectId, subjectId, callback);\n          else\n            // If only subject is given, the SPO index is best.\n            this._loopByKey0(content.subjects, subjectId, callback);\n        }\n        else if (objectId)\n          // If only object is given, the POS index is best.\n          this._loopByKey1(content.predicates, objectId, callback);\n        else\n          // If no params given, iterate all the predicates.\n          this._loop(content.predicates, callback);\n      }\n    }\n  }\n\n  // ### `getObjects` returns all objects that match the pattern.\n  // Setting any field to `undefined` or `null` indicates a wildcard.\n  getObjects(subject, predicate, graph) {\n    var results = [];\n    this.forObjects(function (o) { results.push(o); }, subject, predicate, graph);\n    return results;\n  }\n\n  // ### `forObjects` executes the callback on all objects that match the pattern.\n  // Setting any field to `undefined` or `null` indicates a wildcard.\n  forObjects(callback, subject, predicate, graph) {\n    // Convert terms to internal string representation\n    subject = subject && toId(subject);\n    predicate = predicate && toId(predicate);\n    graph = graph && toId(graph);\n\n    var ids = this._ids, graphs = this._getGraphs(graph), content, subjectId, predicateId;\n    callback = this._uniqueEntities(callback);\n\n    // Translate IRIs to internal index keys.\n    if (isString(subject)   && !(subjectId   = ids[subject]) ||\n        isString(predicate) && !(predicateId = ids[predicate]))\n      return;\n\n    for (graph in graphs) {\n      // Only if the specified graph contains triples, there can be results\n      if (content = graphs[graph]) {\n        // Choose optimal index based on which fields are wildcards\n        if (subjectId) {\n          if (predicateId)\n            // If subject and predicate are given, the SPO index is best.\n            this._loopBy2Keys(content.subjects, subjectId, predicateId, callback);\n          else\n            // If only subject is given, the OSP index is best.\n            this._loopByKey1(content.objects, subjectId, callback);\n        }\n        else if (predicateId)\n          // If only predicate is given, the POS index is best.\n          this._loopByKey0(content.predicates, predicateId, callback);\n        else\n          // If no params given, iterate all the objects.\n          this._loop(content.objects, callback);\n      }\n    }\n  }\n\n  // ### `getGraphs` returns all graphs that match the pattern.\n  // Setting any field to `undefined` or `null` indicates a wildcard.\n  getGraphs(subject, predicate, object) {\n    var results = [];\n    this.forGraphs(function (g) { results.push(g); }, subject, predicate, object);\n    return results;\n  }\n\n  // ### `forGraphs` executes the callback on all graphs that match the pattern.\n  // Setting any field to `undefined` or `null` indicates a wildcard.\n  forGraphs(callback, subject, predicate, object) {\n    for (var graph in this._graphs) {\n      this.some(function (quad) {\n        callback(quad.graph);\n        return true; // Halt iteration of some()\n      }, subject, predicate, object, graph);\n    }\n  }\n\n  // ### `createBlankNode` creates a new blank node, returning its name\n  createBlankNode(suggestedName) {\n    var name, index;\n    // Generate a name based on the suggested name\n    if (suggestedName) {\n      name = suggestedName = '_:' + suggestedName, index = 1;\n      while (this._ids[name])\n        name = suggestedName + index++;\n    }\n    // Generate a generic blank node name\n    else {\n      do { name = '_:b' + this._blankNodeIndex++; }\n      while (this._ids[name]);\n    }\n    // Add the blank node to the entities, avoiding the generation of duplicates\n    this._ids[name] = ++this._id;\n    this._entities[this._id] = name;\n    return this._factory.blankNode(name.substr(2));\n  }\n\n  // ### `extractLists` finds and removes all list triples\n  // and returns the items per list.\n  extractLists({ remove = false, ignoreErrors = false } = {}) {\n    var lists = {}; // has scalar keys so could be a simple Object\n    var onError = ignoreErrors ? (() => true) :\n                  ((node, message) => { throw new Error(`${node.value} ${message}`); });\n\n    // Traverse each list from its tail\n    var tails = this.getQuads(null, namespaces.rdf.rest, namespaces.rdf.nil, null);\n    var toRemove = remove ? [...tails] : [];\n    tails.forEach(tailQuad => {\n      var items = [];             // the members found as objects of rdf:first quads\n      var malformed = false;      // signals whether the current list is malformed\n      var head;                   // the head of the list (_:b1 in above example)\n      var headPos;                // set to subject or object when head is set\n      var graph = tailQuad.graph; // make sure list is in exactly one graph\n\n      // Traverse the list from tail to end\n      var current = tailQuad.subject;\n      while (current && !malformed) {\n        var objectQuads = this.getQuads(null, null, current, null);\n        var subjectQuads = this.getQuads(current, null, null, null);\n        var i, quad, first = null, rest = null, parent = null;\n\n        // Find the first and rest of this list node\n        for (i = 0; i < subjectQuads.length && !malformed; i++) {\n          quad = subjectQuads[i];\n          if (!quad.graph.equals(graph))\n            malformed = onError(current, 'not confined to single graph');\n          else if (head)\n            malformed = onError(current, 'has non-list arcs out');\n\n          // one rdf:first\n          else if (quad.predicate.value === namespaces.rdf.first) {\n            if (first)\n              malformed = onError(current, 'has multiple rdf:first arcs');\n            else\n              toRemove.push(first = quad);\n          }\n\n          // one rdf:rest\n          else if (quad.predicate.value === namespaces.rdf.rest) {\n            if (rest)\n              malformed = onError(current, 'has multiple rdf:rest arcs');\n            else\n              toRemove.push(rest = quad);\n          }\n\n          // alien triple\n          else if (objectQuads.length)\n            malformed = onError(current, 'can\\'t be subject and object');\n          else {\n            head = quad; // e.g. { (1 2 3) :p :o }\n            headPos = 'subject';\n          }\n        }\n\n        // { :s :p (1 2) } arrives here with no head\n        // { (1 2) :p :o } arrives here with head set to the list.\n        for (i = 0; i < objectQuads.length && !malformed; ++i) {\n          quad = objectQuads[i];\n          if (head)\n            malformed = onError(current, 'can\\'t have coreferences');\n          // one rdf:rest\n          else if (quad.predicate.value === namespaces.rdf.rest) {\n            if (parent)\n              malformed = onError(current, 'has incoming rdf:rest arcs');\n            else\n              parent = quad;\n          }\n          else {\n            head = quad; // e.g. { :s :p (1 2) }\n            headPos = 'object';\n          }\n        }\n\n        // Store the list item and continue with parent\n        if (!first)\n          malformed = onError(current, 'has no list head');\n        else\n          items.unshift(first.object);\n        current = parent && parent.subject;\n      }\n\n      // Don't remove any quads if the list is malformed\n      if (malformed)\n        remove = false;\n      // Store the list under the value of its head\n      else if (head)\n        lists[head[headPos].value] = items;\n    });\n\n    // Remove list quads if requested\n    if (remove)\n      this.removeQuads(toRemove);\n    return lists;\n  }\n}\n\n// Determines whether the argument is a string\nfunction isString(s) {\n  return typeof s === 'string' || s instanceof String;\n}\n","// **N3Util** provides N3 utility functions.\n\nimport N3DataFactory from './N3DataFactory';\n\n// Tests whether the given term represents an IRI\nexport function isNamedNode(term) {\n  return !!term && term.termType === 'NamedNode';\n}\n\n// Tests whether the given term represents a blank node\nexport function isBlankNode(term) {\n  return !!term && term.termType === 'BlankNode';\n}\n\n// Tests whether the given term represents a literal\nexport function isLiteral(term) {\n  return !!term && term.termType === 'Literal';\n}\n\n// Tests whether the given term represents a variable\nexport function isVariable(term) {\n  return !!term && term.termType === 'Variable';\n}\n\n// Tests whether the given term represents the default graph\nexport function isDefaultGraph(term) {\n  return !!term && term.termType === 'DefaultGraph';\n}\n\n// Tests whether the given quad is in the default graph\nexport function inDefaultGraph(quad) {\n  return isDefaultGraph(quad.graph);\n}\n\n// Creates a function that prepends the given IRI to a local name\nexport function prefix(iri, factory) {\n  return prefixes({ '': iri }, factory)('');\n}\n\n// Creates a function that allows registering and expanding prefixes\nexport function prefixes(defaultPrefixes, factory) {\n  // Add all of the default prefixes\n  var prefixes = Object.create(null);\n  for (var prefix in defaultPrefixes)\n    processPrefix(prefix, defaultPrefixes[prefix]);\n  // Set the default factory if none was specified\n  factory = factory || N3DataFactory;\n\n  // Registers a new prefix (if an IRI was specified)\n  // or retrieves a function that expands an existing prefix (if no IRI was specified)\n  function processPrefix(prefix, iri) {\n    // Create a new prefix if an IRI is specified or the prefix doesn't exist\n    if (typeof iri === 'string') {\n      // Create a function that expands the prefix\n      var cache = Object.create(null);\n      prefixes[prefix] = function (local) {\n        return cache[local] || (cache[local] = factory.namedNode(iri + local));\n      };\n    }\n    else if (!(prefix in prefixes)) {\n      throw new Error('Unknown prefix: ' + prefix);\n    }\n    return prefixes[prefix];\n  }\n  return processPrefix;\n}\n","// **N3StreamParser** parses a text stream into a quad stream.\nimport N3Parser from './N3Parser';\nimport { Transform } from 'stream';\n\n// ## Constructor\nexport default class N3StreamParser extends Transform {\n  constructor(options) {\n    super({ decodeStrings: true });\n    this._readableState.objectMode = true;\n\n    // Set up parser with dummy stream to obtain `data` and `end` callbacks\n    var self = this, parser = new N3Parser(options), onData, onEnd;\n    parser.parse({\n      on: function (event, callback) {\n        switch (event) {\n        case 'data': onData = callback; break;\n        case 'end':   onEnd = callback; break;\n        }\n      },\n    },\n      // Handle quads by pushing them down the pipeline\n      function (error, quad) { error && self.emit('error', error) || quad && self.push(quad); },\n      // Emit prefixes through the `prefix` event\n      function (prefix, uri) { self.emit('prefix', prefix, uri); }\n    );\n\n    // Implement Transform methods through parser callbacks\n    this._transform = function (chunk, encoding, done) { onData(chunk); done(); };\n    this._flush = function (done) { onEnd(); done(); };\n  }\n\n  // ### Parses a stream of strings\n  import(stream) {\n    var self = this;\n    stream.on('data',  function (chunk) { self.write(chunk); });\n    stream.on('end',   function ()      { self.end(); });\n    stream.on('error', function (error) { self.emit('error', error); });\n    return this;\n  }\n}\n","// **N3StreamWriter** serializes a quad stream into a text stream.\nimport { Transform } from 'stream';\nimport N3Writer from './N3Writer';\n\n// ## Constructor\nexport default class N3StreamWriter extends Transform {\n  constructor(options) {\n    super({ encoding: 'utf8' });\n    this._writableState.objectMode = true;\n\n    // Set up writer with a dummy stream object\n    var self = this;\n    var writer = this._writer = new N3Writer({\n      write: function (quad, encoding, callback) { self.push(quad); callback && callback(); },\n      end: function (callback) { self.push(null); callback && callback(); },\n    }, options);\n\n    // Implement Transform methods on top of writer\n    this._transform = function (quad, encoding, done) { writer.addQuad(quad, done); };\n    this._flush = function (done) { writer.end(done); };\n  }\n\n// ### Serializes a stream of quads\n  import(stream) {\n    var self = this;\n    stream.on('data',   function (quad)  { self.write(quad); });\n    stream.on('end',    function ()      { self.end(); });\n    stream.on('error',  function (error) { self.emit('error', error); });\n    stream.on('prefix', function (prefix, iri) { self._writer.addPrefix(prefix, iri); });\n    return this;\n  }\n}\n","\"use strict\";\n\n// ref: https://github.com/tc39/proposal-global\nvar getGlobal = function () {\n\t// the only reliable means to get the global object is\n\t// `Function('return this')()`\n\t// However, this causes CSP violations in Chrome apps.\n\tif (typeof self !== 'undefined') { return self; }\n\tif (typeof window !== 'undefined') { return window; }\n\tif (typeof global !== 'undefined') { return global; }\n\tthrow new Error('unable to locate global object');\n}\n\nvar global = getGlobal();\n\nmodule.exports = exports = global.fetch;\n\n// Needed for TypeScript and Webpack.\nexports.default = global.fetch.bind(global);\n\nexports.Headers = global.Headers;\nexports.Request = global.Request;\nexports.Response = global.Response;","\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar N3 = _interopRequireWildcard(require(\"n3\"));\n\nvar _nodeFetch = _interopRequireDefault(require(\"node-fetch\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar SparqlEndpoint = /*#__PURE__*/function () {\n  function SparqlEndpoint(uri) {\n    var logQueries = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n    _classCallCheck(this, SparqlEndpoint);\n\n    this._uri = uri;\n    this._logQueries = logQueries;\n  }\n\n  _createClass(SparqlEndpoint, [{\n    key: \"getSparqlResultSet\",\n    value: function getSparqlResultSet(query) {\n      var fetchOptions = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      if (this._logQueries) console.log(query);\n      var encodedQuery = encodeURIComponent(query);\n      return (0, _nodeFetch[\"default\"])(this._uri + \"?query=\" + encodedQuery, _objectSpread(_objectSpread({}, fetchOptions), {}, {\n        headers: {\n          accept: \"application/sparql-results+json\"\n        }\n      })).then(function (response) {\n        if (!response.ok) {\n          throw response.status;\n        } else {\n          return response.json();\n        }\n      });\n    }\n  }, {\n    key: \"getSparqlRDF\",\n    value: function getSparqlRDF(query) {\n      var fetchOptions = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var parser = new N3.Parser();\n      if (this._logQueries) console.log(query);\n      var encodedQuery = encodeURIComponent(query);\n      return (0, _nodeFetch[\"default\"])(this._uri + \"?query=\" + encodedQuery, _objectSpread(_objectSpread({}, fetchOptions), {}, {\n        headers: {\n          accept: \"text/turtle\"\n        }\n      })).then(function (response) {\n        if (!response.ok) {\n          throw response.status;\n        } else {\n          return response.text();\n        }\n      }).then(function (text) {\n        return parser.parse(text);\n      });\n    }\n  }]);\n\n  return SparqlEndpoint;\n}();\n\nexports[\"default\"] = SparqlEndpoint;\nmodule.exports = exports.default;\n//# sourceMappingURL=SparqlEndpoint.js.map","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _awesomplete = _interopRequireDefault(require(\"awesomplete\"));\n\nvar _sparqlClient = _interopRequireDefault(require(\"@retog/sparql-client\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar Prefixplete =\n/*#__PURE__*/\nfunction () {\n  function Prefixplete(input) {\n    var _this = this;\n\n    var sparqlEndpoint = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new _sparqlClient[\"default\"](\"https://mtp.linked.solutions/sparql\");\n    var prefixGraphPrefix = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"https://mtp.linked.solutions/\";\n\n    _classCallCheck(this, Prefixplete);\n\n    if (sparqlEndpoint.getSparqlResultSet) {\n      this._sparqlEndpoint = sparqlEndpoint;\n    } else {\n      this._sparqlEndpoint = new _sparqlClient[\"default\"](sparqlEndpoint);\n    }\n\n    this._input = input;\n    this._prefixMappings = [];\n    var self = this;\n    var previousValue = input.value;\n    var prefixSuggestions = [];\n    var fullSuggestions = [];\n    var awesomplete = new _awesomplete[\"default\"](input);\n    awesomplete.maxItems = 15;\n    awesomplete.input.addEventListener(\"keyup\", function (e) {\n      if (input.value.length >= 2 && e.key !== \"Enter\" && input.value !== previousValue) {\n        populateSuggestions();\n      }\n\n      return true;\n    });\n    input.addEventListener(\"awesomplete-selectcomplete\", function (e) {\n      if (input.value.trim().split(\":\").length < 2 || input.value.trim().split(\":\")[1] === \"\") {\n        populateSuggestions();\n        awesomplete.open();\n      } else {\n        _this.lookup();\n      }\n    });\n\n    function getFullUri(prefixedUri) {\n      var splitup = prefixedUri.split(\":\"); //console.log(\"%cPrefixplete > getFullUri\", \"color: #4527a0\", splitup, prefixMappings);\n\n      var mapping = self._prefixMappings.find(function (m) {\n        return splitup[0] === m.prefix;\n      });\n\n      if (mapping) {\n        return mapping.uri + splitup[1];\n      } else {\n        return prefixedUri;\n      }\n    }\n\n    function getPrefixedUri(fullUri) {\n      var uri = self._getPrefixedUri(fullUri);\n\n      return uri != null ? uri : fullUri;\n    }\n\n    function populateSuggestions() {\n      if (input.value.toString().indexOf(\":\") === -1) {\n        previousValue = input.value;\n        getPrefixUrlSuggestions(input.value).then(function (_) {\n          awesomplete.list = prefixSuggestions.map(function (i) {\n            return i.display;\n          });\n          awesomplete.open();\n        });\n      } else {\n        previousValue = input.value;\n        var splitup = input.value.toString().split(\":\");\n        getFullSuggestions({\n          prefix: splitup[0],\n          url: getFullUri(input.value.toString())\n        }).then(function (_) {\n          awesomplete.list = fullSuggestions.map(function (i) {\n            return i.display !== i.prefix + \":\" ? i.display : undefined;\n          }); //console.log(\"%cPrefixplete > populateSuggestions\", \"color: #4527a0\", fullSuggestions.map(i => i.display !== i.prefix + \":\" ? i.display : undefined));\n\n          awesomplete.open();\n        });\n      }\n    }\n\n    function getPrefixUrlSuggestions(prefix) {\n      var query = \"PREFIX vann: <http://purl.org/vocab/vann/>\\n\" + \"SELECT ?prefix ?uri WHERE {\\n\" + \"    ?sub vann:preferredNamespacePrefix ?prefix ;\\n\" + \"         vann:preferredNamespaceUri ?uri .\\n\" + \"    FILTER ( REGEX (?prefix, \\\"\" + prefix + \"\\\") )\\n\" + \"}\\n\" + \"LIMIT 40\";\n      return self._sparqlEndpoint.getSparqlResultSet(query).then(function (json) {\n        prefixSuggestions = json.results.bindings.map(function (binding) {\n          return {\n            prefix: binding.prefix.value,\n            display: binding.prefix.value + \":\",\n            uri: binding.uri.value\n          };\n        });\n        self._prefixMappings = self._prefixMappings.concat(prefixSuggestions);\n        return true;\n      });\n    }\n\n    function getFullSuggestions(prefix) {\n      //console.log(\"%cPrefixplete > getFullSuggestions\", \"color: #4527a0\", prefix);\n      var query = \"SELECT DISTINCT ?uri WHERE {\\n\" + \"  GRAPH <\" + prefixGraphPrefix + prefix.prefix + \"> {\\n\" + \"    ?uri ?p ?o .\\n\" + \"    FILTER ( REGEX ( STR(?uri), \\\"\" + prefix.url.replace(/\\./g, \"\\\\\\\\.\") + \"\\\") )\\n\" + \"  }\\n\" + \"}\\n\" + \"LIMIT 40\";\n      return self._sparqlEndpoint.getSparqlResultSet(query).then(function (json) {\n        fullSuggestions = json.results.bindings.map(function (binding) {\n          return {\n            prefix: prefix.prefix,\n            display: getPrefixedUri(binding.uri.value),\n            uri: binding.uri.value\n          };\n        });\n        return true;\n      });\n    }\n  }\n\n  _createClass(Prefixplete, [{\n    key: \"_getPrefixedUri\",\n    value: function _getPrefixedUri(fullUri) {\n      var mapping = this._prefixMappings.find(function (m) {\n        return fullUri.startsWith(m.uri);\n      });\n\n      if (mapping) {\n        return fullUri.replace(mapping.uri, mapping.prefix + \":\");\n      } else {\n        return null;\n      }\n    }\n  }, {\n    key: \"setValue\",\n    value: function setValue(value) {\n      var _this2 = this;\n\n      var prefixedUri = this._getPrefixedUri(value);\n\n      if (prefixedUri) {\n        this._input.value = prefixedUri;\n      } else {\n        this._input.value = value;\n        var query = \"PREFIX vann: <http://purl.org/vocab/vann/>\\n\" + \"SELECT DISTINCT ?prefix ?uri WHERE {\\n\" + \"    ?sub vann:preferredNamespacePrefix ?prefix ;\\n\" + \"         vann:preferredNamespaceUri ?uri .\\n\" + \"    FILTER ( REGEX (\\\"\" + value + \"\\\", \\\"^\\\" + str(?uri)) )\\n\" + \"}\\n\" + \"LIMIT 1\";\n        return this._sparqlEndpoint.getSparqlResultSet(query).then(function (json) {\n          if (json.results.bindings[0]) {\n            _this2._input.value = value.replace(json.results.bindings[0].uri.value, json.results.bindings[0].prefix.value + \":\");\n\n            _this2._prefixMappings.push({\n              'prefix': json.results.bindings[0].prefix.value,\n              'uri': json.results.bindings[0].uri.value\n            });\n          }\n\n          return true;\n        });\n      }\n    }\n  }, {\n    key: \"lookup\",\n    value: function lookup() {\n      this.action(this.value);\n    }\n  }, {\n    key: \"action\",\n    value: function action(value) {\n      console.log(\"%cPrefixplete.action(value)\", \"color: #4527a0\", \"Value \" + value + \" selected, overwrite Prefixplete.action(value) method to have something happen.\");\n    }\n  }, {\n    key: \"value\",\n    get: function get() {\n      var splitup = this._input.value.toString().split(\":\");\n\n      var mapping = this._prefixMappings.find(function (m) {\n        return splitup[0] === m.prefix;\n      });\n\n      if (mapping && this._input.value.toString().indexOf(\":\") !== -1) {\n        return mapping.uri + splitup[1];\n      } else {\n        return this._input.value.toString();\n      }\n    },\n    set: function set(value) {\n      this.setValue(value);\n    }\n  }]);\n\n  return Prefixplete;\n}();\n\nexports[\"default\"] = Prefixplete;\n//# sourceMappingURL=prefixplete.js.map","<script>\n  import * as Factory from \"@rdfjs/data-model\";\n  import Prefixplete from \"prefixplete\";\n  import { onMount } from \"svelte\";\n\n  export let value;\n\n  let inputElement, prefixplete;\n\n  onMount(() => {\n    prefixplete = new Prefixplete(\n      inputElement,\n      \"https://ontologies.farewellutopia.com/sparql\",\n      \"https://ontologies.farewellutopia.com/\"\n    );\n\n    prefixplete.action = function() {\n      value = Factory.namedNode(prefixplete.value);\n    };\n    prefixplete.setValue(value.value);\n  });\n\n  function input(e) {\n    value = Factory.namedNode(prefixplete.value);\n  }\n  $: if(prefixplete) {\n     prefixplete.setValue(value.value);\n  }\n</script>\n\n<span>\n  <style>\n \n    .awesomplete > ul {\n      min-width: unset;\n    }\n    .awesomplete [hidden] {\n      display: none;\n    }\n\n    .awesomplete .visually-hidden {\n      position: absolute;\n      clip: rect(0, 0, 0, 0);\n    }\n\n    .awesomplete {\n      display: inline-block;\n      position: relative;\n    }\n\n    .awesomplete > input {\n      display: block;\n    }\n\n    .awesomplete > ul {\n      box-sizing: border-box;\n      list-style: none;\n      padding: 0;\n      margin: 0;\n      background: #fff;\n    }\n\n    .awesomplete > ul:empty {\n      display: none;\n    }\n    /*from node_modules/awesomplete/awesomplete.css*/\n    .awesomplete [hidden] {\n      display: none;\n    }\n\n    .awesomplete .visually-hidden {\n      position: absolute;\n      clip: rect(0, 0, 0, 0);\n    }\n\n    .awesomplete {\n      display: inline-block;\n      position: relative;\n    }\n\n    .awesomplete > input {\n      display: block;\n    }\n\n    .awesomplete > ul {\n      position: absolute;\n      left: 0;\n      z-index: 1;\n      min-width: 100%;\n      box-sizing: border-box;\n      list-style: none;\n      padding: 0;\n      margin: 0;\n      background: #fff;\n    }\n\n    .awesomplete > ul:empty {\n      display: none;\n    }\n\n    .awesomplete > ul {\n      border-radius: 0.3em;\n      margin: 0.2em 0 0;\n      background: hsla(0, 0%, 100%, 0.9);\n      background: linear-gradient(\n        to bottom right,\n        white,\n        hsla(0, 0%, 100%, 0.8)\n      );\n      border: 1px solid rgba(0, 0, 0, 0.3);\n      box-shadow: 0.05em 0.2em 0.6em rgba(0, 0, 0, 0.2);\n      text-shadow: none;\n    }\n\n    @supports (transform: scale(0)) {\n      .awesomplete > ul {\n        transition: 0.3s cubic-bezier(0.4, 0.2, 0.5, 1.4);\n        transform-origin: 1.43em -0.43em;\n      }\n\n      .awesomplete > ul[hidden],\n      .awesomplete > ul:empty {\n        opacity: 0;\n        transform: scale(0);\n        display: block;\n        transition-timing-function: ease;\n      }\n    }\n\n    /* Pointer */\n    .awesomplete > ul:before {\n      content: \"\";\n      position: absolute;\n      top: -0.43em;\n      left: 1em;\n      width: 0;\n      height: 0;\n      padding: 0.4em;\n      background: white;\n      border: inherit;\n      border-right: 0;\n      border-bottom: 0;\n      -webkit-transform: rotate(45deg);\n      transform: rotate(45deg);\n    }\n\n    .awesomplete > ul > li {\n      position: relative;\n      padding: 0.2em 0.5em;\n      cursor: pointer;\n    }\n\n    .awesomplete > ul > li:hover {\n      background: hsl(200, 40%, 80%);\n      color: black;\n    }\n\n    .awesomplete > ul > li[aria-selected=\"true\"] {\n      background: hsl(205, 40%, 40%);\n      color: white;\n    }\n\n    .awesomplete mark {\n      background: hsl(65, 100%, 50%);\n    }\n\n    .awesomplete li:hover mark {\n      background: hsl(68, 100%, 41%);\n    }\n\n    .awesomplete li[aria-selected=\"true\"] mark {\n      background: hsl(86, 100%, 21%);\n      color: inherit;\n    }\n  </style>\n  <input type=\"text\" bind:this={inputElement} on:input={input} />\n</span>\n","<script>\n  import * as Factory from \"@rdfjs/data-model\";\n  import HtmlEditor from \"./valueEditors/HtmlEditor.svelte\";\n  import SimpleLiteralEditor from \"./valueEditors/SimpleLiteralEditor.svelte\";\n  import NamedNodeEditor from \"./valueEditors/NamedNodeEditor.svelte\";\n  import BlankNodeEditor from \"./valueEditors/BlankNodeEditor.svelte\";\n\n  export let value;\n\n  function getType() {\n    const types = {\n      \"http://www.w3.org/1999/02/22-rdf-syntax-ns#HTML\": \"html\",\n      \"http://www.w3.org/2001/XMLSchema#string\": \"label\",\n      \"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString\": \"langString\"\n    };\n    return value.termType === \"Literal\"\n      ? types[value.datatype.value]\n        ? types[value.datatype.value]\n        : \"literal\"\n      : value.termType === \"NamedNode\"\n      ? \"IRI\"\n      : value.termType === \"DefaultGraph\"\n      ? \"DefaultGraph\"\n      : \"BlankNode\";\n  }\n  $: type = getType(value);\n</script>\n\n<div class=\"f\" :key=\"type\">\n  {#if type === 'html'}\n    <HtmlEditor bind:value on:input />\n  {:else if type === 'IRI'}\n    <NamedNodeEditor bind:value on:input />\n  {:else if type === 'BlankNode'}\n    <BlankNodeEditor bind:value on:input />\n  {:else if type === 'label' || type === 'langString'}\n    <SimpleLiteralEditor bind:value on:input />\n  {:else}\n    <div v-else>No value editor for {type}</div>\n  {/if}\n</div>\n","<script>\n  import * as Factory from \"@rdfjs/data-model\";\n  import ExistingTermEditor from \"./ExistingTermEditor.svelte\";\n\n  export let value;\n  export let termTypes = null;\n  let type = null;\n  const availableOptions = {\n    html: Factory.literal(\n      \"\",\n      Factory.namedNode(\"http://www.w3.org/1999/02/22-rdf-syntax-ns#HTML\")\n    ),\n    label: Factory.literal(\"\"),\n    \"label with language\": Factory.literal(\"\", \"en\"),\n    IRI: Factory.namedNode(\"\"),\n    \"Blank Node\": Factory.blankNode(),\n    DefaultGraph: Factory.defaultGraph()\n  };\n\n  let options = termTypes\n    ? Object.fromEntries(\n        Object.entries(availableOptions).filter(\n          ([k, n]) => termTypes.indexOf(n.termType) > -1\n        )\n      )\n    : availableOptions;\n\n  const previousValues = new Map();\n\n  function typeSelected (event) {\n      console.log(\"this.termTypes: \",termTypes);\n      console.log(\"typeSelected: \",event);\n      console.log(\"this.type: \",type);\n      if (!type) {\n          return;\n      }\n      const previousValue = previousValues.get(type);\n      if (previousValue && previousValue.value.length > 0 \n              && window.confirm(\"Restoring previous value\")) { \n              value = previousValue;\n      } else {\n          console.log(\"maps to: \",options[(type)]);\n          value = options[type];\n      }\n  }\n\n  function reset() {\n    previousValues.set(compType(), value);\n    type = null;\n    value = null;\n  }\n\n  function compType () {\n        const types = {\n            \"http://www.w3.org/1999/02/22-rdf-syntax-ns#HTML\": \"html\",\n            \"http://www.w3.org/2001/XMLSchema#string\": \"label\",\n            \"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString\": \"langString\"\n        };\n        return (\n            value !== null ?\n                value.termType === \"Literal\" ? \n                    types[value.datatype.value] ?\n                        types[value.datatype.value] : \"literal\"\n                : value.termType === \"NamedNode\" ? \"IRI\" \n                : value.termType === \"DefaultGraph\" ? \"DefaultGraph\"\n                : \"BlankNode\"\n                : null );\n    }\n</script>\n\n<style>\n  span {\n    display: flex;\n  }\n\n  svg {\n    height: 1em;\n  }\n</style>\n\n<div class=\"te\">\n  {#if !value}\n    <select bind:value={type} on:change={typeSelected}>\n      <option disabled value={null}>Select type</option>\n      {#each Object.keys(options) as option}\n        <option value={option}>{option}</option>\n      {/each}\n    </select>\n  {:else}\n    <span>\n      <button type=\"button\" class=\"icon\" on:click={reset}>\n        <svg viewBox=\"0 0 24 24\">\n          <path\n            fill=\"currentColor\"\n            d=\"M12,6L7,11H17L12,6M7,13L12,18L17,13H7Z\" />\n        </svg>\n      </button>\n      {#if value !== null}\n        <ExistingTermEditor bind:value on:input />\n      {/if}\n    </span>\n  {/if}\n</div>\n","<script>\n  import * as Factory from \"@rdfjs/data-model\";\n  import TermEditor from \"./TermEditor.svelte\";\n  import ExistingTermEditor from \"./ExistingTermEditor.svelte\";\n\n  let subject, predicate, object, graph;\n  export let value;\n  export let labels = false;\n\n  $: elementChanged(subject);\n  $: elementChanged(predicate);\n  $: elementChanged(object);\n  $: elementChanged(graph);\n\n  $: valueChanged(value);\n\n  function valueChanged(v) {\n    subject = v ? v.subject : null;\n    predicate = value ? value.predicate : Factory.namedNode(\"\");\n    object = value ? value.object : null;\n    graph = value ? value.graph : null;\n  }\n\n  function elementChanged(val) {\n    if (subject && predicate && object && graph) {\n      value = Factory.quad(subject, predicate, object, graph);\n    }\n  }\n</script>\n\n<style>\n  .area {\n    display: grid;\n    grid-template-columns: repeat(3, 1fr);\n    grid-template-rows: auto;\n    grid-gap: 0 1em;\n    gap: 0 1em;\n    align-items: start;\n    margin-bottom: 0.8rem;\n  }\n\n  .element {\n    display: flex;\n    align-items: left;\n    grid-row: 2/ span 1;\n    flex-grow: 4;\n  }\n\n  label {\n    grid-row: 1/ span 1;\n  }\n\n</style>\n\n<div class=\"area\">\n\n  {#if labels}\n    <label>Subject:</label>\n  {/if}\n  <div class=\"element\">\n  <TermEditor bind:value={subject} termTypes=\"['BlankNode', 'NamedNode']\" />\n  </div>\n  {#if labels}\n    <label>Predicate:</label>\n  {/if}\n  <div class=\"element\">\n  <ExistingTermEditor bind:value={predicate} />\n  </div>\n  {#if labels}\n    <label>Object:</label>\n  {/if}\n  <div class=\"element\">\n  <TermEditor\n    bind:value={object}\n    termTypes=\"['BlankNode', 'NamedNode', 'Literal']\" />\n  </div>\n  {#if labels}\n    <label>Graph:</label>\n  {/if}\n  <div class=\"element\">\n  <TermEditor\n    bind:value={graph}\n    termTypes=\"['BlankNode', 'NamedNode', 'DefaultGraph']\" />\n  </div>\n</div>\n","/**\r\n * provided methods to list, add, remove and replace quads\r\n */\r\nexport default class DatasetManager {\r\n    constructor(dataset, changeListener) {\r\n        this.dataset = dataset;\r\n        this.changeListener = changeListener;\r\n        this.previousHolders = new Map();\r\n    }\r\n    orderQuads(quads) {\r\n        let result = new Array();\r\n        let i = 0;\r\n        const currentHolders = new Map();\r\n        for (let quad of quads) {\r\n            let holder = this.previousHolders.get(quad);\r\n            const self = this;\r\n            if (!holder) {\r\n                holder = {\r\n                    id: \"\",\r\n                    get quad() {\r\n                        return quad;\r\n                    },\r\n                    set quad(q) {\r\n                        if (quad.equals(q)) {\r\n                            return;\r\n                        }\r\n                        self.previousHolders.delete(quad);\r\n                        self.dataset.delete(quad);\r\n                        if (q !== null) {\r\n                            self.dataset.add(q);\r\n                        }\r\n                        else {\r\n                            console.log(\"removing quad\");\r\n                        }\r\n                        quad = q;\r\n                        self.previousHolders.set(q, this);\r\n                        self.changeListener(self.dataset);\r\n                    }\r\n                };\r\n            }\r\n            this.previousHolders.set(quad, holder);\r\n            result.push(holder);\r\n        }\r\n        //previousHolders = currentHolders;\r\n        const sorted = result.sort((a, b) => {\r\n            function first(f) {\r\n                const fr = f();\r\n                const result = {\r\n                    then: function (t) {\r\n                        if (fr === 0) {\r\n                            return first(t);\r\n                        }\r\n                        else {\r\n                            return result;\r\n                        }\r\n                    },\r\n                    finally: function (t) {\r\n                        if (fr === 0) {\r\n                            return t();\r\n                        }\r\n                        else {\r\n                            return fr;\r\n                        }\r\n                    }\r\n                };\r\n                return result;\r\n            }\r\n            function compare(field) {\r\n                return () => {\r\n                    if (a.quad[field].value < b.quad[field].value) {\r\n                        return -1;\r\n                    }\r\n                    else {\r\n                        if (a.quad[field].value > b.quad[field].value) {\r\n                            return 1;\r\n                        }\r\n                        else {\r\n                            return 0;\r\n                        }\r\n                    }\r\n                };\r\n            }\r\n            return first(compare('graph'))\r\n                .then(compare('subject'))\r\n                .then(compare('predicate'))\r\n                .finally(compare('object'));\r\n        });\r\n        const zero = { id: 0 };\r\n        const max = sorted.reduce((previous, current) => previous.id > current.id ? previous : current, zero);\r\n        let j = max.id;\r\n        sorted.forEach(holder => {\r\n            if (!holder.id) {\r\n                holder.id = ++j + Math.floor(Math.random() * 10000);\r\n            }\r\n        });\r\n        //console.log(uuid, \"sorted\", JSON.stringify(sorted));\r\n        return sorted;\r\n    }\r\n    orderedQuads() {\r\n        return this.orderQuads(this.dataset);\r\n    }\r\n}\r\n","<script>\n  import DatasetManager from \"./DatasetUtils\";\n  import * as Factory from \"@rdfjs/data-model\";\n  import Dataset from \"@rdfjs/dataset\";\n  import QuadEditor from \"./QuadEditor.svelte\";\n\n  export let value;\n\n  let addingQuad = false;\n\n  let newQuad = null;\n\n  let dm = new DatasetManager(value, (ds) => value = value);\n\n  $: if (newQuad !== null) {\n    addNewQuad(newQuad);\n    newQuad = null;\n  }\n\n  $: orderedQuads = getOrderedQuads(value);\n\n  function addNewQuad(q) {\n    addingQuad = false;\n    value.add(q);\n    value = value;\n  }\n\n  function addQuad() {\n    newQuad = null;\n    addingQuad = true;\n  }\n\n  function getOrderedQuads() {\n    const r = dm.orderQuads(value);\n    return r;\n  }\n</script>\n\n<div>\n{#each orderedQuads as t (t.id)}\n  <span>\n    <QuadEditor bind:value={t.quad} />\n  </span>\n{/each}\n{#if addingQuad}\n  <div>\n    <QuadEditor bind:value={newQuad} />\n  </div>\n{:else}\n  <div>\n    <button on:click={addQuad}>Add quad</button>\n  </div>\n{/if}\n</div>\n","<script>\n  export let size = \"1em\";\n  export let width = size;\n  export let height = size;\n</script>\n\n\n<svg\n   xmlns:svg=\"http://www.w3.org/2000/svg\"\n   xmlns=\"http://www.w3.org/2000/svg\"\n   width=\"{width}\" \n   height=\"{height}\" \n   viewBox=\"0 0 8.4666667 8.4666667\"\n   version=\"1.1\">\n  <defs\n     id=\"defs2\" />\n\n  <g\n     id=\"layer1\"\n     transform=\"translate(0,-288.53333)\">\n    <path\n       style=\"fill:#000000;fill-opacity:0.99141636;fill-rule:nonzero;stroke:none;stroke-width:12;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:10;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;paint-order:normal\"\n       d=\"M 26 4 C 25.089083 4.00132 24.294135 4.6180067 24.066406 5.5 L 23.998047 5.5 C 19.95638 5.5 16.849522 6.008625 14.240234 7.5742188 C 12.595355 8.5611358 11.175274 9.9916185 9.8398438 11.904297 C 9.2772665 11.649807 8.6582344 11.5 8.0019531 11.5 C 5.5225944 11.5 3.4980469 13.524536 3.4980469 16.003906 C 3.4980469 18.483276 5.5225944 20.5 8.0019531 20.5 C 8.6582735 20.5 9.2772403 20.349458 9.8398438 20.095703 C 11.17516 22.008206 12.595548 23.438979 14.240234 24.425781 C 16.849522 25.991375 19.95638 26.5 23.998047 26.5 L 24.064453 26.5 C 24.29236 27.382696 25.088355 27.999569 26 28 C 27.10457 28 28 27.10457 28 26 C 28 24.89543 27.10457 24 26 24 C 25.090207 24.000858 24.295631 24.615651 24.066406 25.496094 L 23.998047 25.496094 C 20.039714 25.496094 17.146571 25.004757 14.755859 23.570312 C 13.267346 22.677218 11.956801 21.368413 10.699219 19.578125 C 11.659023 18.851836 12.307278 17.755254 12.447266 16.498047 L 23.998047 16.498047 L 24.064453 16.498047 C 24.291616 17.381519 25.087792 17.99934 26 18 C 27.10457 18 28 17.10457 28 16 C 28 14.89543 27.10457 14 26 14 C 25.088519 14.0015 24.293385 14.619185 24.066406 15.501953 L 23.998047 15.501953 L 12.447266 15.501953 C 12.30562 14.246368 11.656176 13.150691 10.697266 12.423828 C 11.955396 10.632345 13.266656 9.3232203 14.755859 8.4296875 C 17.146571 6.9952812 20.039714 6.5039063 23.998047 6.5039062 L 24.064453 6.5039062 C 24.293858 7.3850521 25.08948 8.000031 26 8 C 27.10457 8.0000001 28 7.1045695 28 6 C 28 4.8954305 27.10457 3.9999999 26 4 z M 8.0019531 12.496094 C 9.9408719 12.496094 11.501953 14.064971 11.501953 16.003906 C 11.501953 17.942804 9.9408719 19.501953 8.0019531 19.501953 C 6.0630343 19.501953 4.5039063 17.942804 4.5039062 16.003906 C 4.5039062 14.064971 6.0630343 12.496094 8.0019531 12.496094 z \"\n       transform=\"matrix(0.26458333,0,0,0.26458333,0,288.53333)\"\n       id=\"path4573\" />\n    <path\n       style=\"fill:#ff2a2a;fill-opacity:0.99141636;fill-rule:nonzero;stroke:none;stroke-width:0.99999994;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:10;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;paint-order:normal\"\n       d=\"m 8.0019531,12.496094 c -1.9389188,0 -3.4980469,1.568877 -3.4980469,3.507812 10e-8,1.938898 1.5591281,3.498047 3.4980469,3.498047 1.9389188,0 3.4999999,-1.559149 3.4999999,-3.498047 0,-1.938935 -1.5610811,-3.507812 -3.4999999,-3.507812 z\"\n       transform=\"matrix(0.26458333,0,0,0.26458333,0,288.53333)\"\n       id=\"path4580\" />\n  </g>\n</svg>\n","<script>\n  export let size = \"1em\";\n  export let width = size;\n  export let height = size;\n</script>\n\n\n<svg\n   xmlns:svg=\"http://www.w3.org/2000/svg\"\n   xmlns=\"http://www.w3.org/2000/svg\"\n   width=\"{width}\" \n   height=\"{height}\" \n   viewBox=\"0 0 8.4666667 8.4666667\"\n   version=\"1.1\"\n   id=\"svg8\">\n  <defs\n     id=\"defs2\" />\n  \n  <g\n     id=\"layer1\"\n     transform=\"translate(0,-288.53333)\">\n    <path\n       style=\"fill:#000000;fill-opacity:0.99141636;fill-rule:nonzero;stroke:none;stroke-width:3.17499995;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:10;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;paint-order:normal\"\n       d=\"m 1.5875001,289.59166 c 0.2410134,3.5e-4 0.4513434,0.16352 0.5115967,0.39688 h 0.018087 c 1.0693578,0 1.8913806,0.13457 2.5817547,0.5488 0.4352076,0.26112 0.8109373,0.63961 1.1642699,1.14567 0.1488486,-0.0673 0.3126341,-0.10697 0.4862752,-0.10697 0.655997,0 1.1916585,0.53566 1.1916585,1.19166 0,0.656 -0.5356615,1.18959 -1.1916585,1.18959 -0.1736514,0 -0.3374197,-0.0398 -0.4862752,-0.10697 -0.3533024,0.50601 -0.7291134,0.88457 -1.1642699,1.14566 -0.6903741,0.41423 -1.5123969,0.54881 -2.5817547,0.54881 h -0.01757 c -0.0603,0.23354 -0.2709074,0.39676 -0.5121134,0.39687 -0.2922509,0 -0.5291667,-0.23691 -0.5291667,-0.52916 0,-0.29225 0.2369158,-0.52917 0.5291667,-0.52917 0.240716,2.3e-4 0.4509476,0.16289 0.5115967,0.39584 h 0.018087 c 1.047309,0 1.8127864,-0.13 2.4453289,-0.50953 0.3938358,-0.2363 0.7405841,-0.58258 1.0733193,-1.05626 -0.2539488,-0.19217 -0.4254663,-0.48231 -0.4625048,-0.81494 h -3.0561441 -0.01757 c -0.060103,0.23375 -0.2707584,0.39722 -0.5121134,0.39739 -0.2922509,0 -0.5291667,-0.23692 -0.5291667,-0.52917 0,-0.29225 0.2369158,-0.52916 0.5291667,-0.52916 0.2411626,3.9e-4 0.4515418,0.16382 0.5115967,0.39739 h 0.018087 3.0561441 c 0.037477,-0.33221 0.2093093,-0.62211 0.4630209,-0.81442 -0.3328802,-0.474 -0.6798178,-0.82037 -1.0738361,-1.05679 -0.6325425,-0.37952 -1.3980199,-0.50952 -2.4453289,-0.50952 h -0.01757 c -0.060697,0.23313 -0.271205,0.39584 -0.5121134,0.39584 -0.2922509,0 -0.5291667,-0.23692 -0.5291667,-0.52917 0,-0.29225 0.2369158,-0.52917 0.5291665,-0.52917 z m 4.7619831,2.24793 c -0.5130056,0 -0.9260416,0.4151 -0.9260416,0.92811 0,0.513 0.413036,0.92552 0.9260416,0.92552 0.5130056,0 0.9255249,-0.41252 0.9255249,-0.92552 0,-0.51301 -0.4125193,-0.92811 -0.9255249,-0.92811 z\"\n       id=\"path4573\" />\n    <path\n       style=\"fill:#ff2a2a;fill-opacity:0.99141636;fill-rule:nonzero;stroke:none;stroke-width:0.26458332;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:10;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;paint-order:normal\"\n       d=\"m 6.3494832,291.83959 c 0.5130056,0 0.9255249,0.4151 0.9255249,0.92811 0,0.513 -0.4125193,0.92552 -0.9255249,0.92552 -0.5130056,0 -0.9260416,-0.41252 -0.9260416,-0.92552 0,-0.51301 0.413036,-0.92811 0.9260416,-0.92811 z\"\n       id=\"path4580\" />\n  </g>\n</svg>\n","<script>\nimport { createEventDispatcher } from 'svelte';\nimport SubjExpand from './images/SubjExpand.svelte';\nimport ObjExpand from './images/ObjExpand.svelte';\nconst dispatch = createEventDispatcher();\nexport let resource;\nfunction setSubject() {\n    dispatch(\"subject\", resource);\n}\nfunction setObject() {\n    dispatch(\"object\", resource);\n}\n\n</script>\n\n<style>\ndiv {\n  display: flex;\n  flex-shrink: 0;\n}\nbutton {\n  margin-left: .4em;\n}\n</style>\n\n<div>\n    <button class=\"icon\" on:click={setSubject}>\n        <SubjExpand size=\"1em\"/>\n    </button>\n    <button class=\"icon\" on:click={setObject}>\n        <ObjExpand size=\"1em\"/>\n    </button>\n</div>","<script>\n  import TermEditor from \"./TermEditor.svelte\";\n  import ExistingTermEditor from \"./ExistingTermEditor.svelte\";\n  import ResourceNavigator from \"./ResourceNavigator.svelte\";\n  import * as Factory from \"@rdfjs/data-model\";\n  import { createEventDispatcher } from \"svelte\";\n  const dispatch = createEventDispatcher();\n  export let value;\n  export let fixedSubject;\n  export let fixedObject;\n  export let fixedGraph;\n  export let labels = false;\n  let subject = value ? value.subject : fixedSubject ? fixedSubject : null;\n  let predicate = value ? value.predicate : Factory.namedNode(\"\");\n  let object = value ? value.object : fixedObject ? fixedObject : null;\n  let graph = value ? value.graph : fixedGraph ? fixedGraph : null;\n  const elementChanged = function (val) {\n    if (subject && predicate && object && graph) {\n      const newQuad = Factory.quad(subject, predicate, object, graph);\n      if (!value || !newQuad.equals(value)) {\n        console.log(\"new quad\", newQuad);\n        value = newQuad;\n      }\n    }\n  };\n  $: elementChanged(subject);\n  $: elementChanged(predicate);\n  $: elementChanged(object);\n  $: elementChanged(graph);\n  $: setElements(value);\n  function setElements(quad) {\n    if (quad !== null) {\n      subject = quad.subject;\n      predicate = quad.predicate;\n      object = quad.object;\n      graph = quad.graph;\n    }\n  }\n</script>\n\n<style>\n  .area {\n    display: grid;\n    grid-template-columns: repeat(3, 1fr);\n    grid-template-rows: auto;\n    grid-gap: 0 1em;\n    gap: 0 1em;\n    align-items: start;\n    margin-bottom: 0.8rem;\n  }\n\n  .element {\n    display: flex;\n    align-items: left;\n    grid-row: 2/ span 1;\n    flex-grow: 4;\n  }\n\n  label {\n    grid-row: 1/ span 1;\n  }\n\n  .placeholder {\n    grid-row: 2/ span 1;\n    flex-grow: 1;\n  }\n</style>\n\n<div class=\"area\">\n  {#if !fixedSubject}\n    {#if labels}\n      <label>Subject:</label>\n    {/if}\n    <div class=\"element\">\n      <TermEditor bind:value={subject} termTypes={['BlankNode', 'NamedNode']} />\n      {#if subject && subject.termType !== 'Literal'}\n        <ResourceNavigator resource={subject} on:subject on:object />\n      {/if}\n    </div>\n  {:else}\n  <div class=\"placeholder\"></div>\n  {/if}\n  {#if labels}\n    <label>Predicate:</label>\n  {/if}\n  <div class=\"element\">\n    <ExistingTermEditor bind:value={predicate} />\n  </div>\n  {#if !fixedObject}\n    {#if labels}\n      <label>Object:</label>\n    {/if}\n    <div class=\"element\">\n      <TermEditor\n        bind:value={object}\n        termTypes={['BlankNode', 'NamedNode', 'Literal']} />\n      {#if object && object.termType !== 'Literal'}\n        <ResourceNavigator resource={object} on:subject on:object />\n      {/if}\n    </div>\n  {:else}\n  <div class=\"placeholder\"></div>\n  {/if}\n  {#if !fixedGraph}\n    <div class=\"element\">\n      <TermEditor\n        bind:value={graph}\n        termTypes={['BlankNode', 'NamedNode', 'DefaultGraph']} />\n    </div>\n  {/if}\n</div>\n","<script>\nimport SubjExpand from './images/SubjExpand.svelte';\nimport ObjExpand from './images/ObjExpand.svelte';\nimport BrowserRow from \"./BrowserRow.svelte\"\nimport * as Factory from \"@rdfjs/data-model\";\nimport DatasetManager from \"./DatasetUtils\";\nexport let value;\nexport let subject = null;\nlet subjectFilter = null;\nexport let object = null;\nlet objectFilter = null;\nexport let graph = null;\nlet graphFilter = null;\nlet newQuad = null;\nlet addingQuad = false;\nconst dm = new DatasetManager(value, (ds) => value = value);\nif (subject) {\n    if (typeof subject === \"string\") {\n        subjectFilter = Factory.namedNode(subject);\n    }\n    else {\n        subjectFilter = subject;\n    }\n}\nif (object) {\n    if (typeof object === \"string\") {\n        objectFilter = Factory.namedNode(object);\n    }\n    else {\n        objectFilter = object;\n    }\n}\nif (graph) {\n    if (typeof graph === \"string\") {\n        graphFilter = Factory.namedNode(graph);\n    }\n    else {\n        graphFilter = graph;\n    }\n}\n$: if (newQuad !== null) {\n    addNewQuad(newQuad);\n    newQuad = null;\n}\nlet orderedQuads;\n//value is just us so it reacts for that var\n$: orderedQuads = value || subjectFilter || objectFilter ? getOrderedQuads() : null;\nfunction addNewQuad(q) {\n    addingQuad = false;\n    value.add(q);\n    value = value;\n}\nfunction addQuad() {\n    newQuad = null;\n    addingQuad = true;\n}\nfunction getOrderedQuads() {\n    const result = dm.orderQuads(value.match(subjectFilter, undefined, objectFilter, graphFilter));\n    console.log(\"getOrderedQuads\", result);\n    return result;\n}\nfunction setSubject(event) {\n    objectFilter = null;\n    subjectFilter = event.detail;\n}\nfunction setObject(event) {\n    console.log(\"setobj\", event.detail);\n    objectFilter = event.detail;\n    subjectFilter = null;\n}\n\n</script>\n\n<div>\n    {#if subjectFilter}\n        <h2>\n        {subjectFilter.value}\n        <SubjExpand size=\"2em\"/>\n        </h2>\n    {/if}\n    {#if objectFilter}\n        <h2 style=\"text-align: end;\">\n        <ObjExpand size=\"2em\"/>\n        {objectFilter.value}\n        </h2>\n    {/if}\n    {#each orderedQuads as t (t.id)}\n    <span>\n      <BrowserRow bind:value={t.quad} fixedSubject={subjectFilter} \n      fixedGraph={graphFilter} fixedObject={objectFilter}\n      on:subject={setSubject} on:object={setObject} />\n    </span>\n    {/each}\n    {#if addingQuad}\n        <div>\n            <BrowserRow bind:value={newQuad} fixedSubject={subjectFilter} \n            fixedGraph={graphFilter} fixedObject={objectFilter}/>\n        </div>\n    {:else}\n        <div>\n            <button on:click={addQuad}>Add attribute</button>\n        </div>\n    {/if}\n</div>","<script>\n  export let name;\n  import * as Factory from \"@rdfjs/data-model\";\n  import Dataset from \"@rdfjs/dataset\";\n  import { SimpleLiteralEditor, HtmlEditor, \n      BlankNodeEditor, NamedNodeEditor, \n      ExistingTermEditor, TermEditor,\n      QuadEditor, DatasetEditor, DatasetBrowser } from \"rdfjs-svelte\";\n\n  let literal = Factory.literal(\n    \"My first literal\",\n    \"http://www.w3.org/2001/XMLSchema#string\"\n  );\n  let htmlLiteral = Factory.literal(\n    \"Hello <strong>world</strong>\",\n    \"http://www.w3.org/1999/02/22-rdf-syntax-ns#HTML\"\n  );\n  //$: console.log(\"htmlLiteral\", htmlLiteral);\n  let blankNode1 = Factory.blankNode();\n  let namedNode1 = Factory.namedNode(\"http://example.org/foo\");\n  let namedNode2 = Factory.namedNode(\"http://example.org/other\");\n  let newValue = null;\n  let newValue2 = null;\n  let quad1 = Factory.quad(Factory.namedNode(\"http://example.org/Alice\"), \n          Factory.namedNode(\"http://example.org/knows\"), \n          Factory.namedNode(\"http://example.org/Bob\"), Factory.defaultGraph());\n  //$: console.log(\"quad1\", quad1);\n  window.q1 = quad1;\n  let dataset = Dataset.dataset([Factory.quad(Factory.namedNode(\"http://example.org/Bill\"), \n          Factory.namedNode(\"http://example.org/knows\"), \n          Factory.namedNode(\"http://example.org/Berta\"), Factory.defaultGraph()),\n          Factory.quad(Factory.namedNode(\"http://example.org/Charlie\"), \n          Factory.namedNode(\"http://example.org/knows\"), \n          Factory.namedNode(\"http://example.org/Carl\"), Factory.defaultGraph()),\n          Factory.quad(Factory.namedNode(\"http://example.org/Carl\"), \n          Factory.namedNode(\"http://example.org/admires\"), \n          Factory.namedNode(\"http://example.org/Bill\"), Factory.defaultGraph()),\n          Factory.quad(Factory.namedNode(\"http://example.org/Berta\"), \n          Factory.namedNode(\"http://example.org/knows\"), \n          Factory.namedNode(\"http://example.org/Charlie\"), Factory.defaultGraph()),\n          Factory.quad(Factory.namedNode(\"http://example.org/Bill\"), \n          Factory.namedNode(\"http://example.org/loves\"), \n          Factory.namedNode(\"http://example.org/Alice\"), \n          Factory.namedNode(\"http://example.org/BillsSecrets\"))]);\n\n  $: console.log(\"dataset\", dataset);\n</script>\n\n<style>\n  main {\n    padding: 1em;\n    margin: 0 auto;\n  }\n\n  h1 {\n    color: #ff3e00;\n    text-transform: uppercase;\n    font-size: 4em;\n    font-weight: 100;\n  }\n\n  @media (min-width: 640px) {\n    main {\n      max-width: none;\n    }\n  }\n</style>\n\n<main>\n  <h1>Demo of RDFJS-Svelte components</h1>\n  <HtmlEditor bind:value={htmlLiteral} />\n  Same: <ExistingTermEditor bind:value={htmlLiteral} />\n  <hr>\n  <SimpleLiteralEditor bind:value={literal} />\n  Same: <ExistingTermEditor bind:value={literal} />\n  <hr>\n  <NamedNodeEditor bind:value={namedNode1} /><br />\n  Same: <ExistingTermEditor bind:value={namedNode1} />\n  <hr>\n  <BlankNodeEditor bind:value={blankNode1} />\n  same: <ExistingTermEditor bind:value={blankNode1} />\n  <hr>\n  <TermEditor bind:value={newValue} />\n  Same: <TermEditor bind:value={newValue} />\n  <hr>\n  Limited types:\n  <TermEditor bind:value={newValue2} termTypes=\"['BlankNode', 'NamedNode', 'DefaultGraph']\" />\n  <hr>\n  Existing resource:\n    <TermEditor bind:value={namedNode2} />\n<hr>\n  <QuadEditor bind:value={quad1} labels />\n  Same: <QuadEditor bind:value={quad1} />\n\n  <h2>Dataset</h2>\n  <DatasetEditor bind:value={dataset} />\n  <h2>Dataset Browser</h2>\n  <DatasetBrowser bind:value={dataset} \n  subject=\"http://example.org/Bill\" graph={Factory.defaultGraph()} />\n</main>\n","import App from './App.svelte';\n\nconst app = new App({\n\ttarget: document.body,\n\tprops: {\n\t\tname: 'world'\n\t}\n});\n\nexport default app;"],"names":["noop","run","fn","blank_object","Object","create","run_all","fns","forEach","is_function","thing","safe_not_equal","a","b","append","target","node","appendChild","insert","anchor","insertBefore","detach","parentNode","removeChild","element","name","document","createElement","svg_element","createElementNS","text","data","createTextNode","space","listen","event","handler","options","addEventListener","removeEventListener","attr","attribute","value","removeAttribute","getAttribute","setAttribute","set_data","set_input_value","input","set_style","key","important","style","setProperty","select_option","select","i","length","option","__value","selected","current_component","set_current_component","component","get_current_component","Error","onMount","$$","on_mount","push","createEventDispatcher","type","detail","callbacks","e","createEvent","initCustomEvent","custom_event","slice","call","bubble","dirty_components","binding_callbacks","render_callbacks","flush_callbacks","resolved_promise","Promise","resolve","update_scheduled","add_render_callback","add_flush_callback","flushing","seen_callbacks","Set","flush","update","pop","callback","has","add","clear","fragment","before_update","dirty","p","ctx","after_update","outroing","outros","group_outros","r","c","check_outros","transition_in","block","local","delete","transition_out","o","d","outro_and_destroy_block","lookup","update_keyed_each","old_blocks","get_key","dynamic","list","destroy","create_each_block","next","get_context","n","old_indexes","new_blocks","new_lookup","Map","deltas","child_ctx","get","set","Math","abs","will_move","did_move","m","first","new_block","old_block","new_key","old_key","bind","index","props","undefined","bound","create_component","mount_component","on_destroy","new_on_destroy","map","filter","destroy_component","detaching","make_dirty","then","fill","init","instance","create_fragment","not_equal","parent_component","prop_values","context","ready","ret","rest","hydrate","nodes","Array","from","childNodes","children","l","intro","SvelteComponent","[object Object]","this","$destroy","indexOf","splice","BlankNode","id","nextId","DefaultGraph","NamedNode","iri","Literal","language","datatype","stringDatatype","langStringDatatype","Quad","subject","predicate","object","graph","Variable","prototype","equals","other","termType","defaultGraphInstance","namedNode","blankNode","literal","languageOrDatatype","defaultGraph","quad","DatasetCore","quads","size","localQuad","isMatch","matches","constructor","Symbol","iterator","assign","dataset","rdf","content","lang","Factory.literal","module","subscribe","store","unsub","unsubscribe","get_store_value","_","component_subscribe","set_store_value","destroy_each","iterations","toggle_class","toggle","classList","HtmlTag","html","u","t","innerHTML","globals","window","global","exec","command","execCommand","getTagsRecursive","tags","tagName","tag","textAlign","color","backgroundColor","item","_tag","saveRange","editor","documentSelection","getSelection","range","rangeCount","rangeStart","savedRange","getRangeAt","createRange","selectNodeContents","setEnd","startContainer","startOffset","metaRange","start","end","restoreRange","charIndex","nodeStack","foundStart","stop","nodeType","nextCharIndex","setStart","cn","removeAllRanges","addRange","removeBlockTagsRecursive","elements","tagsToRemove","some","toLowerCase","wrapper","docFrag","createDocumentFragment","firstChild","child","replaceChild","unwrap","getActionBtns","actions","keys","action","removeBadTags","badTag","replace","RegExp","isEditorClick","editorWrapper","parentElement","subscriber_queue","writable","subscribers","new_value","run_queue","s","invalidate","subscriber","linkSvg","defaultActions","viewHtml","icon","title","result","refs","references","actionObj","state","helper","showEditor","display","raw","setTimeout","disabled","active","actionBtns","undo","redo","strike","sup","sub","h1","h2","blockquote","ol","ul","hr","left","right","center","justify","selection","focusNode","actionBtn","modal","$set","show","label","link","$on","image","forecolor","colorPicker","showColorPicker","backcolor","removeFormat","toString","removeFormatTags","cmd","console","log","create_if_block","span","textContent","div3","div0","t0","div2","div1","span0","t1","t2","form","label_1","t3","span2","span1","t4","t5","t6","button0","t8","button1","dispose","if_block","preventDefault","$$self","$$props","$$invalidate","dispatcher","error","confirm","cancel","focus","$$value","EditorModal","super","getElementById","head","get_each_context","button","t_value","click_handler","args","new_ctx","create_fragment$1","each_value","each_blocks","instance$1","colors","getBtns","btns","close","selectColor","btn","EditorColorPicker","createStateStore","document_1","get_each_context$1","create_each_block$1","html_tag","button_class_value","button_title_value","button_disabled_value","raw_value","click_handler_1","create_fragment$2","textarea","current","editormodal","editorcolorpicker","editors","_onPaste","exec$1","clipboardData","getData","match","output","split","trim","cleanHtml","instance$2","$state","$references","$helper","height","foreColor","backColor","foreColorModal","backColorModal","blurActive","contextKey","userActions","newActions","getNewActionObj","getHtml","getText","setHtml","saveRange$1","restoreRange$1","_btnClicked","_handleButtonStatus","clearBtns","_onChange","_documentClick","sanitize","innerText","setContext","factory","editArea","Editor","Factory.blankNode","me","count","isOpened","$","properties","initial","attrValue","parseInt","Function","configure","minChars","maxItems","autoFirst","DATA","FILTER_CONTAINS","sort","SORT_BYLENGTH","container","CONTAINER","ITEM","REPLACE","tabSelect","hidden","role","inside","status","className","aria-live","aria-atomic","_events","evaluate","blur","reason","keydown","evt","keyCode","opened","submit","mousedown","click","li","test","nodeName","hasAttribute","all","Suggestion","isArray","_list","items","apply","el","activeElement","fire","open","goto","unbind","indexOfAwesomplete","previous","pos","lis","scrollTop","offsetTop","clientHeight","suggestions","origin","originalEvent","siblingIndex","suggestion","regExpEscape","FILTER_STARTSWITH","around","item_id","aria-selected","defineProperty","String","valueOf","expr","con","querySelector","querySelectorAll","val","ref","j","initEvent","dispatchEvent","previousElementSibling","self","Awesomplete","Document","readyState","exports","RDF","XSD","SWAP","xsd","decimal","boolean","double","integer","string","nil","langString","owl","sameAs","forSome","forAll","implies","namespaces","DataFactory","DEFAULTGRAPH","_blankNodeCounter","Term","substring","lastIndexOf","atPos","substr","datatypeString","ch","dtPos","toJSON","languageOrDataType","Number","isFinite","isInteger","isNaN","triple","internal","Triple","fromId","variable","endPos","toId","term","fromCharCode","escapeSequence","escapeReplacements","\\","'","\"","f","~",".","-","!","&","(",")","*","+",",",";","=","/","?","#","@","%","illegalIriChars","lineModeRegExps","_iri","_unescapedIri","_simpleQuotedString","_langcode","_blank","_newline","_comment","_whitespace","_endOfFile","invalidRegExp","N3Lexer","_simpleApostropheString","_prefix","_prefixed","_variable","_number","_boolean","_keyword","_sparqlKeyword","_shortPredicates","_lineMode","lineMode","_n3Mode","n3","_comments","comments","_literalClosingPos","inputFinished","_input","outputComments","whiteSpaceMatch","comment","line","_line","prefix","firstChar","matchLength","inconclusive","_previousMarker","_unescape","reportSyntaxError","_parseLiteral","toUpperCase","token","previousToken","_syntaxError","sequence","unicode4","unicode8","escapedChar","charCode","replacement","opening","openingLength","closingPos","max","backslashCount","lines","issue","err","tokens","_tokenizeToEnd","setImmediate","_pendingBuffer","setEncoding","on","Buffer","concat","blankNodePrefix","N3Parser","_contextStack","_graph","_setBase","baseIRI","initDataFactory","format","isTurtle","isTriG","isNTriples","isNQuads","isN3","isLineMode","_supportsNamedGraphs","_readPredicateOrNamedGraph","_readPredicate","_supportsQuads","_resolveRelativeIRI","_blankNodePrefix","_lexer","lexer","_explicitQuantifiers","explicitQuantifiers","fragmentPos","_base","_basePath","_baseRoot","_baseScheme","n3Mode","inverse","_inversePredicate","blankPrefix","_prefixes","quantified","_quantified","_subject","_predicate","_object","_error","_callback","_sparqlStyle","_readPrefix","_readBaseIRI","_readSubject","_readNamedGraphLabel","quantifier","_resolveIRI","_namedNode","_blankNode","_saveContext","_readBlankNodeHead","RDF_NIL","_readListItem","_readPunctuation","N3_FORSOME","_quantifier","_readQuantifierList","N3_FORALL","_literalValue","_completeSubjectLiteral","_literal","_readEntity","_getPathReader","ABBREVIATIONS","_readBlankNodeTail","_readObject","_readDataTypeOrLang","_getContextEndReader","_readGraph","_readBlankNodePunctuation","_emit","empty","_restoreContext","_readPredicateAfterBlank","previousList","stack","parent","RDF_FIRST","_readListItemDataTypeOrLang","RDF_REST","_completeObjectLiteral","_completeLiteral","listItem","completed","_readCallback","inversePredicate","_readFormulaTail","_readInTopContext","_readQuadPunctuation","_readPrefixIRI","prefixNode","_prefixCallback","_readDeclarationPunctuation","_readNamedGraphBlankLabel","entity","QUANTIFIERS_GRAPH","_readQuantifierPunctuation","afterPath","_afterPath","_readPath","_readForwardPath","_readBackwardPath","contextStack","_quad","message","_removeDotSegments","pathStart","segmentStart","quadCallback","prefixCallback","tokenize","every","parser",">","N3DataFactory","escape","escapeAll","escapedCharacters","\t","\n","\r","\b","\f","SerializedTerm","N3Writer","outputStream","_prefixRegex","write","_lists","lists","_outputStream","_endStream","chunk","encoding","done","_writeQuad","_writeQuadLine","_prefixIRIs","prefixes","addPrefixes","_inDefaultGraph","_write","_encodeIriOrBlank","_encodeObject","_encodePredicate","_prefixMatch","quadToString","join","characterReplacer","prefixMatch","_encodeLiteral","addQuad","prefixIRIs","hasPrefixes","IRIlist","prefixList","prefixIRI","contents","_blockedWrite","singleDone","character","charCodeAt","EventHandlers","EventEmitter","$getMaxListeners","that","_maxListeners","defaultMaxListeners","emitNone","isFn","len","listeners","arrayClone","emitOne","arg1","emitTwo","arg2","emitThree","arg3","emitMany","_addListener","listener","prepend","events","existing","TypeError","newListener","emit","_eventsCount","unshift","warned","w","emitter","warn","_onceWrap","fired","g","removeListener","arguments","listenerCount","evlistener","arr","copy","defaultSetTimout","defaultClearTimeout","usingDomains","domain","getPrototypeOf","setMaxListeners","getMaxListeners","er","doError","domainEmitter","domainThrown","addListener","prependListener","once","prependOnceListener","position","originalListener","k","spliceOne","removeAllListeners","unwrapListeners","eventNames","Reflect","ownKeys","cachedSetTimeout","cachedClearTimeout","runTimeout","fun","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","timeout","marker","runClearTimeout","nextTick","Item","array","ctor","superCtor","super_","enumerable","configurable","TempCtor","formatRegExp","isString","objects","inspect","str","x","JSON","stringify","isNull","isObject","deprecate","msg","isUndefined","process","debugEnviron","debugs","obj","opts","seen","stylize","stylizeNoColor","depth","isBoolean","showHidden","_extend","customInspect","stylizeWithColor","formatValue","styleType","styles","recurseTimes","isFunction","primitive","simple","arg","formatPrimitive","visibleKeys","hash","idx","arrayToHash","getOwnPropertyNames","isError","formatError","isRegExp","isDate","Date","ar","base","braces","toUTCString","hasOwnProperty","formatProperty","formatArray","reduce","prev","cur","reduceToSingleString","desc","getOwnPropertyDescriptor","re","objectToString","prop","bold","italic","underline","white","grey","black","blue","cyan","green","magenta","red","yellow","special","number","null","date","regexp","revLookup","Arr","Uint8Array","inited","code","encodeChunk","uint8","tmp","num","fromByteArray","extraBytes","parts","len2","read","buffer","offset","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","NaN","Infinity","pow","rt","floor","LN2","kMaxLength","TYPED_ARRAY_SUPPORT","createBuffer","RangeError","__proto__","encodingOrOffset","allocUnsafe","ArrayBuffer","byteOffset","byteLength","fromArrayLike","fromArrayBuffer","isEncoding","actual","fromString","internalIsBuffer","checked","fromObject","assertSize","_isBuffer","isView","loweredCase","utf8ToBytes","base64ToBytes","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","bidirectionalIndexOf","dir","arrayIndexOf","indexSize","arrLength","valLength","buf","readUInt16BE","foundIndex","found","hexWrite","remaining","strLen","parsed","utf8Write","blitBuffer","asciiWrite","byteArray","asciiToBytes","latin1Write","base64Write","ucs2Write","units","hi","lo","utf16leToBytes","base64.fromByteArray","min","res","secondByte","thirdByte","fourthByte","tempCodePoint","firstByte","codePoint","bytesPerSequence","codePoints","decodeCodePointsArray","poolSize","_augment","alloc","allocUnsafeSlow","isBuffer","isFastBuffer","readFloatLE","isSlowBuffer","compare","y","swap16","swap32","swap64","thisStart","thisEnd","thisCopy","targetCopy","includes","_arr","out","toHex","bytes","checkOffset","ext","checkInt","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","ieee754.write","writeDouble","newBuf","subarray","sliceLen","readUIntLE","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","ieee754.read","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","limit","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","INVALID_BASE64_RE","leadSurrogate","b64","placeHolders","L","base64.toByteArray","stringtrim","base64clean","src","dst","BufferList","tail","v","entry","shift","isBufferEncoding","StringDecoder","assertEncoding","surrogateSize","detectIncompleteChar","utf16DetectIncompleteChar","base64DetectIncompleteChar","passThroughWrite","charBuffer","charReceived","charLength","charStr","available","cr","enc","Readable","ReadableState","debug","debuglog","stream","objectMode","Duplex","readableObjectMode","hwm","highWaterMark","defaultHwm","pipes","pipesCount","flowing","ended","endEmitted","reading","sync","needReadable","emittedReadable","readableListening","resumeScheduled","defaultEncoding","ranOut","awaitDrain","readingMore","decoder","_readableState","readable","_read","readableAddChunk","addToFront","chunkInvalid","emitReadable","onEofChunk","_e","skipAdd","maybeReadMore_","maybeReadMore","needMoreData","isPaused","howMuchToRead","computeNewHighWaterMark","emitReadable_","flow","nReadingNextTick","resume_","fromList","hasStrings","nb","copyFromBufferString","copyFromBuffer","fromListPartial","endReadable","endReadableNT","xs","nop","WriteReq","cb","WritableState","getBuffer","writableObjectMode","needDrain","ending","finished","noDecode","decodeStrings","writing","corked","bufferProcessing","onwrite","_writableState","writecb","writelen","onwriteStateUpdate","pendingcb","errorEmitted","onwriteError","needFinish","bufferedRequest","clearBuffer","afterWrite","lastBufferedRequest","prefinished","bufferedRequestCount","corkedRequestsFree","CorkedRequest","Writable","writev","_writev","doWrite","onwriteDrain","finishMaybe","holder","finish","prefinish","need","_this","nOrig","doRead","pipe","dest","pipeOpts","endFn","onend","cleanup","onunpipe","ondrain","pipeOnDrain","cleanedUp","onclose","onfinish","onerror","ondata","increasedAwaitDrain","pause","unpipe","resume","dests","_i","ev","wrap","paused","method","_fromList","writeAfterEnd","valid","validChunk","decodeChunk","last","writeOrBuffer","cork","uncork","setDefaultEncoding","endWritable","allowHalfOpen","onEndNT","TransformState","afterTransform","ts","_transformState","transforming","writechunk","rs","needTransform","writeencoding","Transform","transform","_transform","_flush","ws","PassThrough","Stream","EE","source","_isStdio","didOnEnd","isDefaultGraph","defaultPrefixes","processPrefix","cache","_size","_graphs","_id","_ids","_entities","_blankNodeIndex","_factory","addQuads","subjects","graphs","graphKey","subjectKey","predicateKey","index0","key0","key1","key2","index1","index2","existed","name0","name1","name2","entityKeys","value0","entity0","value1","entity1","values","uniqueIds","entities","graphItem","predicates","freeze","ids","changed","_addToIndex","_removeFromIndex","removeQuad","remove","removeMatches","subjectId","predicateId","objectId","_getGraphs","graphId","_findInIndex","getQuads","_countInIndex","results","forSubjects","_uniqueEntities","_loopBy2Keys","_loopByKey1","_loopByKey0","_loop","forPredicates","forObjects","forGraphs","suggestedName","ignoreErrors","onError","tails","toRemove","tailQuad","headPos","malformed","objectQuads","subjectQuads","removeQuads","onData","onEnd","parse","uri","writer","_writer","addPrefix","getGlobal","fetch","Headers","Request","Response","_typeof","N3","__esModule","default","_getRequireWildcardCache","newObj","hasPropertyDescriptor","_interopRequireWildcard","require$$0","_nodeFetch","require$$1","WeakMap","enumerableOnly","getOwnPropertySymbols","symbols","sym","_objectSpread","_defineProperty","getOwnPropertyDescriptors","defineProperties","_classCallCheck","Constructor","_defineProperties","descriptor","SparqlEndpoint","logQueries","_uri","_logQueries","protoProps","staticProps","query","fetchOptions","encodedQuery","encodeURIComponent","headers","accept","response","ok","json","Parser","_awesomplete","_interopRequireDefault","_sparqlClient","Prefixplete","sparqlEndpoint","prefixGraphPrefix","getSparqlResultSet","_sparqlEndpoint","_prefixMappings","previousValue","prefixSuggestions","fullSuggestions","awesomplete","getFullUri","prefixedUri","splitup","mapping","find","getPrefixedUri","fullUri","_getPrefixedUri","populateSuggestions","getPrefixUrlSuggestions","getFullSuggestions","url","bindings","binding","startsWith","_this2","setValue","inputElement","prefixplete","Factory.namedNode","getType","types","http://www.w3.org/1999/02/22-rdf-syntax-ns#HTML","http://www.w3.org/2001/XMLSchema#string","http://www.w3.org/1999/02/22-rdf-syntax-ns#langString","termTypes","availableOptions","label with language","IRI","Blank Node","Factory.defaultGraph","fromEntries","entries","previousValues","compType","selected_option","labels","valueChanged","elementChanged","Factory.quad","DatasetManager","changeListener","previousHolders","q","sorted","field","fr","finally","random","orderQuads","addingQuad","newQuad","dm","ds","addNewQuad","getOrderedQuads","orderedQuads","width","dispatch","resource","fixedSubject","fixedObject","fixedGraph","setElements","subjectFilter","objectFilter","graphFilter","htmlLiteral","blankNode1","namedNode1","namedNode2","newValue","newValue2","quad1","q1","Dataset","body"],"mappings":"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"}